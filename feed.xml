<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.2.2">Jekyll</generator><link href="https://joonhwan2.github.io/feed.xml" rel="self" type="application/atom+xml" /><link href="https://joonhwan2.github.io/" rel="alternate" type="text/html" hreflang="en" /><updated>2022-09-28T17:13:36+09:00</updated><id>https://joonhwan2.github.io/feed.xml</id><title type="html">고준환</title><subtitle>A minimal, responsive, and powerful Jekyll theme for presenting professional writing.</subtitle><entry><title type="html">메모</title><link href="https://joonhwan2.github.io/posts/memo/" rel="alternate" type="text/html" title="메모" /><published>2022-09-21T00:00:00+09:00</published><updated>2022-09-21T21:44:06+09:00</updated><id>https://joonhwan2.github.io/posts/memo</id><content type="html" xml:base="https://joonhwan2.github.io/posts/memo/"><![CDATA[<p>https://www.youtube.com/watch?v=nT0pMg3tyYA
<br />숙제 (비건 유튜버)</p>

<p><br />
<br />
아래 사진을 클릭하면 <code class="language-plaintext highlighter-rouge">제 취미공간</code>으로 이어집니다 ㅎㅎ 여기에서 메모 및 일상을 기록하는데 놀러오실 분들은 언제나 환영합니다!</p>

<p><br /></p>

<h1 id="링크로-이동하려면-사진을-클릭">링크로 이동하려면 사진을 클릭</h1>

<p><a href="https://discord.com/channels/976352361142452234/976352361142452239"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQk-zPB4TCuWRNJVIF0aWgniDPNJgUTdXmILg&amp;usqp=CAU" alt="어서오셔 ㅎ" /></a></p>]]></content><author><name></name></author><category term="etc" /><category term="memo" /><category term="blog" /><category term="jekyll" /><category term="github" /><category term="git" /><summary type="html"><![CDATA[https://www.youtube.com/watch?v=nT0pMg3tyYA 숙제 (비건 유튜버)]]></summary></entry><entry><title type="html">Node.js &amp;amp; 약국지도찾기, heroku 배포하기</title><link href="https://joonhwan2.github.io/posts/pharmacy-heroku/" rel="alternate" type="text/html" title="Node.js &amp;amp; 약국지도찾기, heroku 배포하기" /><published>2022-09-13T00:00:00+09:00</published><updated>2022-09-28T17:12:55+09:00</updated><id>https://joonhwan2.github.io/posts/pharmacy-heroku</id><content type="html" xml:base="https://joonhwan2.github.io/posts/pharmacy-heroku/"><![CDATA[<p><br />
<br />
<br /></p>

<p>‘소스놀이터’님의 유튜브영상을 보고 이렇게 좋은 작업물을 완성할 수 있었습니다.<br />
양질의 자료를 제공해주신 ‘소스놀이터’님께 다시한번 감사의 말씀을 드립니다.</p>

<hr />
<h1 id="1--heroku-회원가입">1   Heroku 회원가입</h1>
<hr />

<p><br /></p>

<p><img src="/assets/img/api/Heroku/1.png" alt="Desktop View" /></p>

<p><br /></p>

<p>create app 클릭</p>

<p><br /></p>

<p><img src="/assets/img/api/Heroku/2.png" alt="Desktop View" /></p>

<p><br />
<br /></p>

<p><img src="/assets/img/api/Heroku/3.png" alt="Desktop View" /></p>

<p><br />
<br /></p>

<p>heroku cli 클릭하면 이렇게 됩니다.</p>

<p><br /></p>

<p><img src="/assets/img/api/Heroku/4.png" alt="Desktop View" /></p>

<p><br />
<br />
<br />
<br /></p>

<p>이제 Node.js 클릭 -&gt; view as single page -&gt; 보이는 지침서 참고</p>

<p><br />
<br /></p>

<p>이제 cmd를 새로 켜서 따라 입력합시다</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="go">heroku login
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="/assets/img/api/Heroku/5.png" alt="Desktop View" /></p>

<p><br />
<br />
<br /></p>

<p>자 사진에 보면 Opening browser to https://cli~~ 나오는데 이거 주소창에<br />
https 주소 복붙해서 한번 쳐주고 진행합시다 그러면 로그인 됩니다.</p>

<p><br />
<br /></p>

<p>이제</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="go">node --version
npm --version
git --version
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p>확인합시다</p>

<p><br /></p>

<p>저는 <code class="language-plaintext highlighter-rouge">노드  v16.17.0</code>, <code class="language-plaintext highlighter-rouge">npm  8.18.0</code>, ‘git  2.37.1.windows.1’ 이렇군요.</p>

<p><br />
<br />
<br />
<br /></p>

<p><img src="/assets/img/api/Heroku/6.png" alt="Desktop View" /></p>

<p><br /></p>

<p>해당되는 앱이름 클릭 -&gt; setting -&gt; Heroku git URL 복사</p>

<h1 id="잠깐">잠깐!</h1>

<p>로컬디스크C에 폴더 하나 <code class="language-plaintext highlighter-rouge">HTML_SERVER_TEST</code> 만듭시다<br />
그리고 windows + R을 눌러 CMD 입력해준후 이 경로로 옵시다<br />
<code class="language-plaintext highlighter-rouge">cd ..</code> 입력하면 경로 하나씩 줄어듭니다\</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="gp">C:\HTML_SERVER_TEST&gt;</span><span class="w"> 
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br />
<br />
<br /></p>

<p>저 경로에서</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="go">git clone Heroku에 있는 URL
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p>입력합시다</p>

<p>자 저의 경우는 그러면 이 경로로 빈 폴더가 생길겁니다.
<code class="language-plaintext highlighter-rouge">C:\HTML_SERVER_TEST\joonhwan-test</code></p>

<p><br /></p>

<p>이제 저 안에 <code class="language-plaintext highlighter-rouge">index.js</code>, <code class="language-plaintext highlighter-rouge">public_html 폴더</code>, <code class="language-plaintext highlighter-rouge">package.json</code>, <code class="language-plaintext highlighter-rouge">public 폴더</code> 복붙해줍시다</p>

<p>그리고 package.json 수정해줍시다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="p">{</span>
  <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">nodejs_pharmacy</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">version</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1.0.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">description</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">main</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">index.js</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">scripts</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">test</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">echo </span><span class="se">\"</span><span class="s2">Error: no test specified</span><span class="se">\"</span><span class="s2"> &amp;&amp; exit 1</span><span class="dl">"</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">author</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">license</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ISC</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">dependencies</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">^0.27.2</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">^4.18.1</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>———–  engines와 node 버젼 추가————&gt;</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre><span class="p">{</span>
  <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">nodejs_pharmacy</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">version</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1.0.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">description</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">main</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">index.js</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">engines</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">node</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">16.x</span><span class="dl">"</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">scripts</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">start</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">node index.js</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">test</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">echo </span><span class="se">\"</span><span class="s2">Error: no test specified</span><span class="se">\"</span><span class="s2"> &amp;&amp; exit 1</span><span class="dl">"</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">author</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">license</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ISC</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">dependencies</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">^0.27.2</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">^4.18.1</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br />
<br />
<br /></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">port</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">80</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>그리고 index.js에서 80을 5000으로 바꿔줍시다<br />
그 후 깃클론으로 폴더가 생성된 경로에서 아래 명령어 입력합시다<br />
저의 경우는 C:\HTML_SERVER_TEST\joonhwan-test 이곳에서 실행합니다</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="go">npm install express
npm install axios
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p>이제 <code class="language-plaintext highlighter-rouge">node index.js</code> 이어서 입력후 주소창에 http://localhost:5000/ 쳐봅시다.
저는 잘 나오는 군요!<br />
참! 이거 휴대폰으로 지도 보면 확대할수록 글자 크기가 작아져서 해줘야하는게 있습니다</p>

<p><br /></p>

<p>index.html로 갑시다  거기서 &lt;head&gt; &lt;/head&gt;<br />
이 사이에 이 문장 추가하면 됩니다</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
</pre></td></tr></tbody></table></code></pre></div></div>
<p>이 문장을 추가해주면 휴대폰에서도 노트북에서 보는것과 같은 크기로 볼 수 있습니다.<br />
만약 이걸 추가 안할 시 휴대폰에서 확대할수록 크기는 더욱 작아집니다.</p>

<p><br />
<br />
<br /></p>

<p>이제 입력합시다.</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="go">git add .
git commit -m "아무거나 입력"
git push origin master
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="/assets/img/api/Heroku/7.png" alt="Desktop View" /></p>

<p><br />
<br /></p>

<p>이 주소를 잘 확인했다면 console.ncloud.com -&gt; 마이페이지 -&gt; 아래사진을 봐주세요</p>

<p><br />
<br /></p>

<p><img src="/assets/img/api/Heroku/8.png" alt="Desktop View" />
<img src="/assets/img/api/Heroku/9.png" alt="Desktop View" /></p>

<p>저 곳에 아까 그 주소 추가해줍시다. 그리고 테스트를 해보니 오잉?</p>

<p><br />
<br /></p>

<p><img src="/assets/img/api/Heroku/10.png" alt="Desktop View" /></p>

<p><br />
<br />
<br /></p>

<p>F12를 눌러봅시다</p>

<p><img src="/assets/img/api/Heroku/11.png" alt="Desktop View" /></p>

<p><br />
<br />
<br /></p>

<p>아아 저거 제 아이디가 중복사용되고있었군요 바꿔주어야겠습니다. 실은 미리 하나 만들어놓고 테스트용으로 하나 더 만들어주었는데<br />
그 테스트용 아이디를 입력하지 않아서 생긴 문제입니다.</p>

<p><br />
<br /></p>

<p>수정을 완료하였으니 이제 저는 이미 배포한 앱을 지우고 새로 넣겠습니다</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="go">heroku apps:destroy --app joonhwan-test    // 그 후 자기 앱이름을 한번 더 입력하면 됩니다
git status    // 혹시 했는데 업데이트할 것이 아무것도 없다면 폴더를 바탕화면에 한번 옮겼다가 다시 재위치시켜보십시오
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p>아무것도 없으므로 폴더를 지우고 새로 만들었습니다. 그리고 cmd 껏다 켜주겠습니다</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="go">heroku login
git clone URL
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">cd joonhwan-test</code> 입력해주고 그안에 자료들 다시 옮겨주고</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="go">git status
git add .
git commit -m "아무거나"
git push origin master
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p><img src="/assets/img/api/naver-map-api-pharmacy/26.png" alt="Desktop View" /></p>

<p>노트북에서는 잘 나오군요! 휴대폰으로도 잘 나오는지 확인해봅시다! 이것으로 배포까지 끝내겠습니다 ㅎ<br />
https://pharmacy1234.herokuapp.com</p>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br /></p>

<p>아래 사진을 클릭하면 <code class="language-plaintext highlighter-rouge">제 취미공간</code>으로 이어집니다 ㅎㅎ 여기에서 메모 및 일상을 기록하는데 놀러오실 분들은 언제나 환영합니다!</p>

<p><br /></p>

<h1 id="링크로-이동하려면-사진을-클릭">링크로 이동하려면 사진을 클릭</h1>

<p><a href="https://discord.com/channels/976352361142452234/976352361142452239"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQk-zPB4TCuWRNJVIF0aWgniDPNJgUTdXmILg&amp;usqp=CAU" alt="어서오셔 ㅎ" /></a></p>

<hr />
<h1 id="참고">참고</h1>
<hr />
<p>‘소스놀이터’        <a href="https://www.youtube.com/watch?v=hqrKiKac84o">무료 Node Js 호스팅 (5분만에 무료 홈페이지 소스 올리기)</a></p>

<p><br /></p>]]></content><author><name></name></author><category term="developer-tools" /><category term="api" /><category term="Node.js" /><category term="api" /><category term="nodejs" /><category term="heroku" /><summary type="html"><![CDATA[]]></summary></entry><entry><title type="html">[네이버지도로 약국찾기 작업하면서 배운 것]</title><link href="https://joonhwan2.github.io/posts/naver-map-api/" rel="alternate" type="text/html" title="[네이버지도로 약국찾기 작업하면서 배운 것]" /><published>2022-09-13T00:00:00+09:00</published><updated>2022-09-13T22:33:34+09:00</updated><id>https://joonhwan2.github.io/posts/naver-map-api</id><content type="html" xml:base="https://joonhwan2.github.io/posts/naver-map-api/"><![CDATA[<p><br />
<br />
<br />
<br /></p>

<blockquote>
  <h1 id="️배운-것들-">✏️배운 것들  </h1>
  <ul>
    <li>동기와 비동기 차이</li>
    <li>구문 해석능력</li>
    <li>괄호와 대괄호 차이</li>
    <li>변수의 의미</li>
  </ul>
</blockquote>

<p><br />
<br />
<br /></p>

<h2 id="1-동기">1 동기</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">getLocation</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>
                <span class="k">if</span><span class="p">(</span><span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">.</span><span class="nx">getCurrentPosition</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">position</span><span class="p">){</span>
                        <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">latitude</span> <span class="c1">//위도</span>
                        <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">longitude</span> <span class="c1">//경도</span>
                        <span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">latitude</span>
                        <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">longitude</span>
                        <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">위도</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">);</span>
                        <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">경도</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">);</span>
                    <span class="p">});</span>  
                <span class="p">}</span>
                <span class="k">return</span> <span class="nx">XY</span><span class="p">;</span>     
            <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>if부터 순차적으로 구문이 실행되고 나면 XY에는 위도와 경도가 있고<br />
그 값을 return 해줘서 반환해줬기 때문에 getLocation 함수가 실행되고<br />
나면 그 return된 값이 XY에 담겨서 제대로 출력 되겠다라고 생각하게 됨</p>

<p><br />
<br />
<br />
<br />
<br /></p>

<h2 id="2-비동기">2 비동기</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">getLocation</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>
                <span class="k">if</span><span class="p">(</span><span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">.</span><span class="nx">getCurrentPosition</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">position</span><span class="p">){</span>
                        <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">latitude</span> <span class="c1">//위도</span>
                        <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">longitude</span> <span class="c1">//경도</span>
                        <span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">latitude</span>
                        <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">longitude</span>
                        <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">위도</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">);</span>
                        <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">경도</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">);</span>
                    <span class="p">});</span>  
                <span class="p">}</span>
                <span class="k">return</span> <span class="nx">XY</span><span class="p">;</span>     
            <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>원래라면 이 if문이 실행이 다되고 나서 그 다음에 return XY로 오는데<br />
실제로 안그렇고 if문 안으로 들어왔을때 한 navigator.geolocation쯤<br />
왔을때 또 다른 프로세스가 return으로 와서 전체 if문이 실행되기 전에<br />
return으로 실행되어져 XY에는 값이 정해지지않은게 return됨 이게<br />
비동기식이다</p>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br /></p>

<h2 id="3-구문해석">3 구문해석</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre>               <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
                    <span class="na">url</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
                    <span class="na">type</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
                    <span class="na">cache</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
                    <span class="na">dataType</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
                    <span class="na">data</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
                    <span class="na">sucess</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>

                    <span class="p">}</span>
                <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>여기서 위의 dataType와 data는 밑의 succes랑 아무 연관이 없다<br />
밑의 (data)는 대괄호 안의 항목만 연동이됨</p>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br /></p>

<h2 id="4-괄호와-대괄호-차이">4 괄호와 대괄호 차이</h2>

<p><br />
<br /></p>

<p>인자가 단수일때는 그냥 괄호 하나()  혹은 <br />
<br />
복수일때는 대괄호로 ({<br />
})</p>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br /></p>

<h2 id="5-변수의-의미">5 변수의 의미</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>	<span class="kd">var</span> <span class="nx">mapOptions</span> <span class="o">=</span> <span class="p">{</span>
           		<span class="na">center</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="mf">37.5666805</span><span class="p">,</span> <span class="mf">126.9784147</span><span class="p">),</span>
                            <span class="na">zoom</span><span class="p">:</span> <span class="mi">9</span>
                        <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>의미  :   mapOptions라는 변수안에 저 내용들이 담긴 것</p>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br /></p>

<h2 id="보시고-미흡한-부분이-있다면-피드백은-언제나-환영합니다">보시고 미흡한 부분이 있다면 피드백은 언제나 환영합니다!</h2>

<p><br />
<br />
아래 사진을 클릭하면 <code class="language-plaintext highlighter-rouge">제 취미공간</code>으로 이어집니다 ㅎㅎ 여기에서 메모 및 일상을 기록하는데 놀러오실 분들은 언제나 환영합니다!</p>

<p><br /></p>

<h1 id="링크로-이동하려면-사진을-클릭">링크로 이동하려면 사진을 클릭</h1>

<p><a href="https://discord.com/channels/976352361142452234/976352361142452239"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQk-zPB4TCuWRNJVIF0aWgniDPNJgUTdXmILg&amp;usqp=CAU" alt="어서오셔 ㅎ" /></a></p>

<hr />
<h1 id="참고">참고</h1>
<hr />
<p>‘지옥의불구덩이’        <a href="https://hellcoding.tistory.com/entry/VSCode-%EC%98%A4%EB%A5%98-%EC%9D%B4-%EC%8B%9C%EC%8A%A4%ED%85%9C%EC%97%90%EC%84%9C-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A5%BC-%EC%8B%A4%ED%96%89%ED%95%A0-%EC%88%98-%EC%97%86%EC%9C%BC%EB%AF%80%EB%A1%9C">VSCode 오류 : 이 시스템에서 스크립트를 실행할 수 없으므로 …</a></p>]]></content><author><name></name></author><category term="etc" /><category term="study" /><category term="study" /><summary type="html"><![CDATA[]]></summary></entry><entry><title type="html">Node.js &amp;amp; 네이버지도로 내 근처 약국들 찾기 2</title><link href="https://joonhwan2.github.io/posts/pharmacy-searching-with-navermap-api-2/" rel="alternate" type="text/html" title="Node.js &amp;amp; 네이버지도로 내 근처 약국들 찾기 2" /><published>2022-09-12T00:00:00+09:00</published><updated>2022-09-21T07:58:43+09:00</updated><id>https://joonhwan2.github.io/posts/pharmacy-searching-with-navermap-api-2</id><content type="html" xml:base="https://joonhwan2.github.io/posts/pharmacy-searching-with-navermap-api-2/"><![CDATA[<p><br />
<br />
<br /></p>

<p>이제 index.html로 갑시다</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>                $(document).ready(async function(){
                    let XY = await getLocation();

                    alert("위도" + XY.lat);
                    alert("경도" + XY.lng);
</pre></td></tr></tbody></table></code></pre></div></div>
<p>이 부분을 보면 document.ready 함수에서 문서가 document로 로드된 후 ready상태일 때<br />
현재 위치를 가리키고 그걸 alert 경고창으로 띄우는 걸 나타냅니다 일단 <code class="language-plaintext highlighter-rouge">alert 2개 주석</code>처리합시다.</p>

<p>그 후 index.js의 이 경로로 접속되게 합시다 <code class="language-plaintext highlighter-rouge">/pharmach_list</code><br />
이걸 위해 index.html로 돌아와 ajax를 사용합니다 즉 jquery</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre>                    //지도를 삽입할 HTML 요소 또는 HTML 요소의 id를 지정합니다.
                    var mapDiv = document.getElementById('map'); // 'map'으로 선언해도 동일

                    //옵션 없이 지도 객체를 생성하면 서울 시청을 중심으로 하는 16 레벨의 지도가 생성됩니다.
                    var map = new naver.maps.Map(mapDiv);
                    $.ajax({
                        url: "/pharmach_list",
                        type: "GET",
                        cache: "false",
                        dataType: "json",
                        data: {"Q0": "서울특별시", "Q1": "강남구", "QT": "", "QN": "", "ORD": "", "pageNo": "1", "numOfRows": "1000"},
                        success: function(data) {
                            console.log(data);
                        },
                        error: function(request, status, error) {

                        }

                    });
</pre></td></tr></tbody></table></code></pre></div></div>
<ol>
  <li>url은 경로</li>
  <li>type에서 GET방식은 주석처리한 주소의 ?뒤의 값들을 눈에 보이게 하나하나 입력해줌, 그래서<br />
<code class="language-plaintext highlighter-rouge">/pharmach_list</code>를 정의할 때 app.get을 사용했음</li>
  <li>데이터 값은 index.js에서 찾으면됨</li>
  <li>에러는 3가지 변수를 받음</li>
</ol>

<p><br />
<br />
<br /></p>

<p>index.js 로 가서 수정합시다</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre>                <span class="nx">params</span><span class="p">:</span> <span class="p">{</span>
                    <span class="dl">"</span><span class="s2">serviceKey</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">mL6hpE93V2cGEHnZNYbp2kbpZIm2IFyc9rhdh2wIaUseyjghN%2FlJSV7tSchmbL47mZsX8gNcLVtGpsTxQkstdA%3D%3D</span><span class="dl">"</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">Q0</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">Q0</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">Q1</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">Q1</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">QT</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">QT</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">QN</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">QN</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">ORD</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">ORD</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">pageNo</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">pageNo</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">numOfRows</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">numOfRows</span>
                <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br /></p>

<p>이렇게 하면 index.html로 전달한 값이 nodejs로 갔다가 nodejs에서 다시 nodejs에서 api를 호출하여<br />
원하는 값이 변환됩니다. index.html을 보면 나오지만 data변수의 값을 콘솔에 출력한 것을 통해<br />
디버깅을 가능하게하여 매우 유용합니다.</p>

<p><br />
<br />
<br />
<br />
<br />
<br /></p>

<h2 id="여기까지-요약">여기까지 요약</h2>
<p><br /></p>

<p>우선 api 변수가 실행되고 나면 .then으로 들어와 Header에다가 cors를 잡는 오류를 넣었습니다,<br />
그런데! response변수가 api내에서 실행되었는데 실제로 response를 return하는 부분은 바깥에 있기에</p>
<ul>
  <li>return response를 알맞은 위치인 위쪽으로 보내줍시다.</li>
  <li>response 선언한 부분 역시 api 선언문 안에 넣어줍시다</li>
  <li>try catch문 역시 axios를 쓰는 위치로 바꿔줍시다</li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
</pre></td><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/pharmach_list</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>

        <span class="kd">let</span> <span class="nx">api</span> <span class="o">=</span> <span class="k">async</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">response</span> <span class="o">=</span> <span class="kc">null</span>
            
            <span class="k">try</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">http://apis.data.go.kr/B552657/ErmctInsttInfoInqireService/getParmacyListInfoInqire</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
                <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
                    <span class="dl">"</span><span class="s2">serviceKey</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">mL6hpE93V2cGEHnZNYbp2kbpZIm2IFyc9rhdh2wIaUseyjghN%2FlJSV7tSchmbL47mZsX8gNcLVtGpsTxQkstdA%3D%3D</span><span class="dl">"</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">Q0</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">Q0</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">Q1</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">Q1</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">QT</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">QT</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">QN</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">QN</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">ORD</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">ORD</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">pageNo</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">pageNo</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">numOfRows</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">numOfRows</span>
                <span class="p">}</span>
            <span class="p">})</span>
        <span class="p">}</span>






        <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
        <span class="p">}</span>





        

            <span class="k">return</span> <span class="nx">response</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">api</span><span class="p">().</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span>  <span class="p">{</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Access-Control-Allow-Origin</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">*</span><span class="dl">"</span><span class="p">)</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
        <span class="p">});</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br /></p>

<p>그리고 req.query.Q0    req.query.Q1 이런것들은 프로그램 변수에 할당된 것들이라<br />
바꿔줘야 할 것이 있습니다.<br />
공공데이터포털 -&gt; 마이페이지<br />
여기서 인증키가 (인코딩, 디코딩) 방식이 있습니다.<br />
url은 인코딩방식, 저희의 경우엔 디코딩 방식을 써야합니다. 이제 디코딩 키를 복사하여<br />
index.js에서 serviceKey 바꿔줍시다</p>

<p>그 후</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">node</span> <span class="nx">index</span><span class="p">.</span><span class="nx">js</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>입력 후 localhost 들어가서 <code class="language-plaintext highlighter-rouge">F12</code> 누른 후 아래사진과 같이 순서대로 누르면 리스트가 쫙 나옵니다</p>

<p><img src="/assets/img/api/naver-map-api-pharmacy/15.png" alt="Desktop View" /></p>

<p><br />
<br />
<br />
<br /></p>

<p>자 이렇게 나오는 이유는 index.html을 보면 <code class="language-plaintext highlighter-rouge">/pharmach_list</code> 이 url이 제대로 실행되어 콘솔의 data결과물이<br />
console.log로 찍힌 것을 알 수 있습니다.</p>

<p><br />
<br />
<br /></p>

<p><img src="/assets/img/api/naver-map-api-pharmacy/16.png" alt="Desktop View" /></p>

<p><br />
<br />
<br /></p>

<p>여기서 코드를 조금 수정해봅시다
<br />
약국 데이터를 받고난 후 지도가 뜨도록 수정해봅시다</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>                    <span class="c1">//지도를 삽입할 HTML 요소 또는 HTML 요소의 id를 지정합니다.</span>
                    <span class="kd">var</span> <span class="nx">mapDiv</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">map</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// 'map'으로 선언해도 동일</span>

                    <span class="c1">//옵션 없이 지도 객체를 생성하면 서울 시청을 중심으로 하는 16 레벨의 지도가 생성됩니다.</span>
                    <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nb">Map</span><span class="p">(</span><span class="nx">mapDiv</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p><br /></p>

<p>이 코드를 ajax 코드 밑의 console.log(data); 아래에 옮겨줍시다<br />
<br />
그 후 https://navermaps.github.io/maps.js/docs/tutorial-digest.example.html<br />
이 주소로 와서 ‘지도 이동하기’를 찾읍시다<br />
코드를 자세히 보면 위도경도값을 LatLng객체를 생성해 그것을 웹에 설정해주면<br />
panTo라는 명령으로 이동하고, 그리고 처음지도를 실행할 때 LatLng를 center라는 옵션을 주게되면<br />
해당 설정된 경도, 위도로 웹이 이동됨.<br />
그리고 그 곳에 이 코드를 복사하여 mapOptions변수를 만들고 아래에 붙입시다</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>    <span class="nx">center</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="mf">37.5666805</span><span class="p">,</span> <span class="mf">126.9784147</span><span class="p">),</span>
    <span class="nx">zoom</span><span class="p">:</span> <span class="mi">9</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p><br />
그 후 아까 자리 옮겼던 2번째 변수의 끝에 mapOptions인자를 하나 더 넣은 것으로 수정함으로써<br />
옵션에 있는 내용의 위도와 경도 값이 들어감. 그리고 숫자가 37.xxxxx 126.xxxx 인데 그 자리를<br />
<code class="language-plaintext highlighter-rouge">XY.lat</code> <code class="language-plaintext highlighter-rouge">XY.lng</code>로 바꿉시다.</p>

<p><br />
<br />
<br /></p>

<p>이제 localhost로 가보면 이렇게 나옵니다!</p>

<p><br />
<br /></p>

<p><img src="/assets/img/api/naver-map-api-pharmacy/17.png" alt="Desktop View" /></p>

<p><br /></p>

<p>여기까지의 <code class="language-plaintext highlighter-rouge">index.js</code> <code class="language-plaintext highlighter-rouge">index.html</code>코드를 보여드릴테니 잘 안된다면 무엇이 틀린건지 비교해보시길 바랍니다.</p>

<h2 id="indexjs">index.js</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">);</span>  
<span class="kd">let</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span> <span class="p">();</span>                                       
<span class="kd">let</span> <span class="nx">port</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">80</span><span class="p">;</span>                
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="dl">"</span><span class="s2">public_html</span><span class="dl">"</span><span class="p">));</span>                     

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span>                                  
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">HTML 서버 시작됨</span><span class="dl">"</span><span class="p">)</span>
<span class="p">})</span>

<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/pharmach_list</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>

        <span class="kd">let</span> <span class="nx">api</span> <span class="o">=</span> <span class="k">async</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">response</span> <span class="o">=</span> <span class="kc">null</span>
            
            <span class="k">try</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">http://apis.data.go.kr/B552657/ErmctInsttInfoInqireService/getParmacyListInfoInqire</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
                <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
                    <span class="dl">"</span><span class="s2">serviceKey</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">mL6hpE93V2cGEHnZNYbp2kbpZIm2IFyc9rhdh2wIaUseyjghN/lJSV7tSchmbL47mZsX8gNcLVtGpsTxQkstdA==</span><span class="dl">"</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">Q0</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">Q0</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">Q1</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">Q1</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">QT</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">QT</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">QN</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">QN</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">ORD</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">ORD</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">pageNo</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">pageNo</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">numOfRows</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">numOfRows</span>
                <span class="p">}</span>
            <span class="p">})</span>
        <span class="p">}</span>






        <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
        <span class="p">}</span>







            <span class="k">return</span> <span class="nx">response</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">api</span><span class="p">().</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span>  <span class="p">{</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Access-Control-Allow-Origin</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">*</span><span class="dl">"</span><span class="p">)</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
        <span class="p">});</span>
<span class="p">});</span>
<span class="c1">//  https://apis.data.go.kr/B552657/ErmctInsttInfoInqireService/getParmacyListInfoInqire?serviceKey=mL6hpE93V2cGEHnZNYbp2kbpZIm2IFyc9rhdh2wIaUseyjghN%2FlJSV7tSchmbL47mZsX8gNcLVtGpsTxQkstdA%3D%3D&amp;Q0=%EC%84%9C%EC%9A%B8%ED%8A%B9%EB%B3%84%EC%8B%9C&amp;Q1=%EA%B0%95%EB%82%A8%EA%B5%AC&amp;QT=1&amp;QN=%EC%82%BC%EC%84%B1%EC%95%BD%EA%B5%AD&amp;ORD=NAME&amp;pageNo=1&amp;numOfRows=10</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br /></p>

<h2 id="indexhtml">index.html</h2>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>     
        <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=아이디 &amp;amp;submodules=geocoder"</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://code.jquery.com/jquery-3.6.1.min.js"</span> <span class="na">integrity=</span><span class="s">"sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="</span> <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;/head&gt;</span>    
        <span class="nt">&lt;body&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"margin-top: 20px; margin-bottom: 10px; font-weight: bold;"</span><span class="nt">&gt;</span>
                약국 지도💊
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"map"</span> <span class="na">style=</span><span class="s">"width:100%; height:80%"</span><span class="nt">&gt;</span>

            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/body&gt;</span>
            <span class="nt">&lt;script&gt;</span>
                <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="k">async</span> <span class="kd">function</span><span class="p">(){</span>
                    <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getLocation</span><span class="p">();</span>

                    <span class="c1">//alert("위도" + XY.lat);</span>
                    <span class="c1">//alert("경도" + XY.lng);</span>

                    <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
                        <span class="na">url</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/pharmach_list</span><span class="dl">"</span><span class="p">,</span>
                        <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>   <span class="c1">// GET을 통해 밑에 주석처리한 api url 부분 ?뒤부터 눈에 보이게끔 값들을 하나하나 입력해줌</span>
                        <span class="na">cache</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">//cache는 쓰지 않을거라 false</span>
                        <span class="na">dataType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>    <span class="c1">//dataType은 json으로 받겠다</span>
                        <span class="na">data</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">Q0</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">서울특별시</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Q1</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">강남구</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">QT</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">QN</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ORD</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">pageNo</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">numOfRows</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1000</span><span class="dl">"</span><span class="p">},</span>   
                        <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>

                            <span class="kd">var</span> <span class="nx">mapOptions</span> <span class="o">=</span> <span class="p">{</span>
                                <span class="na">center</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">),</span>
                                <span class="na">zoom</span><span class="p">:</span> <span class="mi">9</span>
                            <span class="p">}</span>

                                                        <span class="c1">//지도를 삽입할 HTML 요소 또는 HTML 요소의 id를 지정합니다.</span>
                            <span class="kd">var</span> <span class="nx">mapDiv</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">map</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// 'map'으로 선언해도 동일</span>

                            <span class="c1">//옵션 없이 지도 객체를 생성하면 서울 시청을 중심으로 하는 16 레벨의 지도가 생성됩니다.</span>
                            <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nb">Map</span><span class="p">(</span><span class="nx">mapDiv</span><span class="p">,</span> <span class="nx">mapOptions</span><span class="p">);</span>

                        <span class="p">},</span>
                        <span class="na">error</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span> <span class="p">{</span>

                        <span class="p">}</span>

                    <span class="p">});</span>
                <span class="p">});</span>
                
                <span class="k">async</span>  <span class="kd">function</span> <span class="nx">getLocation</span><span class="p">()</span> <span class="p">{</span>
                    <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>
                    <span class="k">if</span><span class="p">(</span><span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">)</span> <span class="p">{</span>

                        <span class="kd">let</span> <span class="nx">promise</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">rejected</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                            <span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">.</span><span class="nx">getCurrentPosition</span><span class="p">((</span><span class="nx">position</span><span class="p">)</span> <span class="o">=&gt;</span><span class="p">{</span>
                                <span class="nx">resolve</span><span class="p">(</span><span class="nx">position</span><span class="p">);</span>
                            <span class="p">});</span>
                        <span class="p">});</span>

                        <span class="kd">let</span> <span class="nx">position</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">promise</span><span class="p">;</span>
                        
                        <span class="c1">//위도 position.coords.latitude</span>
                        <span class="c1">//경도 position.coords.longitude</span>
                        <span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">latitude</span><span class="p">;</span>
                        <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">longitude</span><span class="p">;</span>
                           
                    <span class="p">}</span>
                    <span class="k">return</span> <span class="nx">XY</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>자, <code class="language-plaintext highlighter-rouge">index.html</code>의 zoom: 9 —&gt; 14로 바꾸어봅시다 그러면 더 가까운 위치로 보이게 될 것입니다.<br />
근데 아직 제일 중요한 제 위치 근처로 약국데이터들을 받아오지 못했습니다.<br />
현재 위도와 경도만 받아왔는데 이제 위도와 경도의 주소를 가지고오는 역할의 함수가 필요합니다.</p>

<p><br /></p>

<p>https://navermaps.github.io/maps.js/docs/tutorial-digest.example.html –&gt; 아래쪽에 보면 <code class="language-plaintext highlighter-rouge">주소와 좌표 검색하기 API</code> 클릭<br />
여길 보면 reverseGeocode api가 있는데 이를 사용시 위도, 경도 -&gt; 주소로 변환 
<br /></p>

<p>이제 <code class="language-plaintext highlighter-rouge">index.html</code>로 돌아가서 ajax 위에 적어줍시다 naver reverseGeocode 불러주려면 submodule이 geocoder여야 가능하다<br />
참고로 reverseGeocode는 비동기형이다 그래서 await를 적어주고 인자를 적기위해 대괄호 추가하겠습니다.<br />
LatLng 객체를 만들어 주기 위해 함수를 넣고 첫번째 인자와 두번째 인자를 넣어줍시다<br />
그리고 두번째 인자를 function형태로 받습니다 그리고 받을 때 status라는 변수와 response라는 변수로 받겠습니다.<br />
그리고 response.result에는 결과값을 받겠습니다. 그리고 그 변수를 result로 선언해줍니다, 그리고 그 밑에 result.items라고 하면<br />
items 변수가 담깁니다. items변수도 선언하겠습니다 그리고 시도와 시구군 값이 제대로 있는지 콘솔로 찍어봅시다.<br />
완성된 코드는 아래와 같습니다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre>                <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="k">async</span> <span class="kd">function</span><span class="p">(){</span>
                    <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getLocation</span><span class="p">();</span>

                    <span class="c1">//alert("위도" + XY.lat);</span>
                    <span class="c1">//alert("경도" + XY.lng);</span>

                    <span class="k">await</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Service</span><span class="p">.</span><span class="nx">reverseGeocode</span><span class="p">({</span>
                        <span class="na">location</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">)</span>
                    <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">status</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
                        <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
                        <span class="kd">let</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">items</span><span class="p">;</span>
                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addrdetail</span><span class="p">.</span><span class="nx">sido</span><span class="p">);</span> <span class="c1">// 시도값</span>
                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addrdetail</span><span class="p">.</span><span class="nx">sigugun</span><span class="p">);</span> <span class="c1">// 시구군</span>


                    <span class="p">});</span>

                    <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>여기까지하고 localhost에서 F12 -&gt;</p>

<p><br />
<br /></p>

<p><img src="/assets/img/api/naver-map-api-pharmacy/18.png" alt="Desktop View" /></p>

<p><br />
<br />
<br />
<br /></p>

<p>오 시도, 시군에 콘솔로그 해준 내용이 잘 나오군요!</p>

<p><br />
<br />
<br /></p>

<p>공공데이터포털 -&gt; 마이페이지, 잠깐 사진을 봅시다, 공백을 허용하지않군요.</p>

<p><br />
<br />
<br />
<br /></p>

<p><img src="/assets/img/api/naver-map-api-pharmacy/19.png" alt="Desktop View" /></p>

<p><br />
<br />
<br /></p>

<p>이제 <code class="language-plaintext highlighter-rouge">경상북도 xx시</code>, <code class="language-plaintext highlighter-rouge">경상남도 xx시</code>로 나누어지는 경우를 생각해봅시다. 공백을 제거하기 위해<br />
index.html의 시도, 시구군 함수 수정합시다, 일단 2개 주석처리</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre></td><td class="rouge-code"><pre>                <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="k">async</span> <span class="kd">function</span><span class="p">(){</span>
                    <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getLocation</span><span class="p">();</span>

                    <span class="c1">//alert("위도" + XY.lat);</span>
                    <span class="c1">//alert("경도" + XY.lng);</span>

                    <span class="k">await</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Service</span><span class="p">.</span><span class="nx">reverseGeocode</span><span class="p">({</span>
                        <span class="na">location</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">)</span>
                    <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">status</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
                        <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
                        <span class="kd">let</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">items</span><span class="p">;</span>
                        <span class="c1">//console.log(items[0].addrdetail.sido); // 시도값</span>
                        <span class="c1">//console.log(items[0].addrdetail.sigugun); // 시구군</span>
                        <span class="kd">let</span> <span class="nx">sido_arr</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addrdetail</span><span class="p">.</span><span class="nx">sido</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">);</span>
                        <span class="kd">let</span> <span class="nx">gubun_arr</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addrdetail</span><span class="p">.</span><span class="nx">sigugun</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">);</span>

                        <span class="kd">let</span> <span class="nx">sido</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
                        <span class="kd">let</span> <span class="nx">gubun</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
                        <span class="k">if</span><span class="p">(</span><span class="nx">sido_arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">sido</span> <span class="o">=</span> <span class="nx">sido_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                            <span class="nx">gugun</span> <span class="o">=</span> <span class="nx">gubun_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">sido_arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">sido</span> <span class="o">=</span> <span class="nx">sido_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                            <span class="nx">gugun</span> <span class="o">=</span> <span class="nx">gubun_arr</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
                        <span class="p">}</span>
                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sido</span><span class="p">);</span>
                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">gugun</span><span class="p">);</span>
                    <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>이렇게되면 2개의 요소를 가진 배열이 되어, 한줄에 있던 <code class="language-plaintext highlighter-rouge">경상남도 xx시</code><br />
–&gt;<br />
<code class="language-plaintext highlighter-rouge">경상남도</code><br />
<code class="language-plaintext highlighter-rouge">xx시</code></p>

<p><br /></p>

<p>그리고 새롭게 편집될 변수도 미리 정의해줍시다.<br />
만약 시도가 1이라는 것은 <code class="language-plaintext highlighter-rouge">서울특별시</code> 처럼 한큐에 끝날때 시도와 구군의 첫번째 요소가됨,<br />
만약 그렇지 않고 시도 어레이가 1보다 클때, 즉 공백이 하나 있을때 ex) <code class="language-plaintext highlighter-rouge">경상남도 xx시</code>
그때 시도 어래이는 0, 그러나 구군 어레이는 첫번째 인자인 1을 적어주게 되면<br />
시도와 구군이 공백이 제거된 상태로 만들어짐<br />
이제 값이 제대로 잘 적혀있는지 콘솔로 시도, 구군을 확인해봅시다</p>

<p><br />
<br /></p>

<p><img src="/assets/img/api/naver-map-api-pharmacy/20.png" alt="Desktop View" /></p>

<p><br />
<br /></p>

<p>오 잘 나오군요!<br />
이제 index.html로 가서 Q0에는 sido변수를, Q1에는 gugun변수를 넣어줍시다\</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>                    <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
                        <span class="na">url</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/pharmach_list</span><span class="dl">"</span><span class="p">,</span>
                        <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>   <span class="c1">// GET을 통해 밑에 주석처리한 api url 부분 ?뒤부터 눈에 보이게끔 값들을 하나하나 입력해줌</span>
                        <span class="na">cache</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">//cache는 쓰지 않을거라 false</span>
                        <span class="na">dataType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>    <span class="c1">//dataType은 json으로 받겠다</span>
                        <span class="na">data</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">Q0</span><span class="dl">"</span><span class="p">:</span> <span class="nx">sido</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Q1</span><span class="dl">"</span><span class="p">:</span> <span class="nx">gugun</span><span class="p">,</span> <span class="dl">"</span><span class="s2">QT</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">QN</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ORD</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">pageNo</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">numOfRows</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1000</span><span class="dl">"</span><span class="p">},</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>그리고 이부분 역시 비동기이기 때문에 ajax구문 위치를 옮깁시다.</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sido</span><span class="p">);</span>
                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">gugun</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br />
<br /></p>

<p>이곳 아래에 배치합시다, 여기까지의 index.html 코드는 이렇게 됩니다</p>

<p><br />
<br />
<br /></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
</pre></td><td class="rouge-code"><pre>                <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="k">async</span> <span class="kd">function</span><span class="p">(){</span>
                    <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getLocation</span><span class="p">();</span>

                    <span class="c1">//alert("위도" + XY.lat);</span>
                    <span class="c1">//alert("경도" + XY.lng);</span>

                    <span class="k">await</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Service</span><span class="p">.</span><span class="nx">reverseGeocode</span><span class="p">({</span>
                        <span class="na">location</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">)</span>
                    <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">status</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
                        <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
                        <span class="kd">let</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">items</span><span class="p">;</span>
                        <span class="c1">//console.log(items[0].addrdetail.sido); // 시도값</span>
                        <span class="c1">//console.log(items[0].addrdetail.sigugun); // 시구군</span>
                        <span class="kd">let</span> <span class="nx">sido_arr</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addrdetail</span><span class="p">.</span><span class="nx">sido</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">);</span>
                        <span class="kd">let</span> <span class="nx">gubun_arr</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addrdetail</span><span class="p">.</span><span class="nx">sigugun</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">);</span>

                        <span class="kd">let</span> <span class="nx">sido</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
                        <span class="kd">let</span> <span class="nx">gubun</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
                        <span class="k">if</span><span class="p">(</span><span class="nx">sido_arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">sido</span> <span class="o">=</span> <span class="nx">sido_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                            <span class="nx">gugun</span> <span class="o">=</span> <span class="nx">gubun_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">sido_arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">sido</span> <span class="o">=</span> <span class="nx">sido_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                            <span class="nx">gugun</span> <span class="o">=</span> <span class="nx">gubun_arr</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
                        <span class="p">}</span>
                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sido</span><span class="p">);</span>
                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">gugun</span><span class="p">);</span>

                        <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
                            <span class="na">url</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/pharmach_list</span><span class="dl">"</span><span class="p">,</span>
                            <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>   <span class="c1">// GET을 통해 밑에 주석처리한 api url 부분 ?뒤부터 눈에 보이게끔 값들을 하나하나 입력해줌</span>
                            <span class="na">cache</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">//cache는 쓰지 않을거라 false</span>
                            <span class="na">dataType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>    <span class="c1">//dataType은 json으로 받겠다</span>
                            <span class="na">data</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">Q0</span><span class="dl">"</span><span class="p">:</span> <span class="nx">sido</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Q1</span><span class="dl">"</span><span class="p">:</span> <span class="nx">gugun</span><span class="p">,</span> <span class="dl">"</span><span class="s2">QT</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">QN</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ORD</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">pageNo</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">numOfRows</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1000</span><span class="dl">"</span><span class="p">},</span>   
                            <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    
                                <span class="kd">var</span> <span class="nx">mapOptions</span> <span class="o">=</span> <span class="p">{</span>
                                    <span class="na">center</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">),</span>
                                    <span class="na">zoom</span><span class="p">:</span> <span class="mi">14</span>
                                <span class="p">}</span>
    
                                                            <span class="c1">//지도를 삽입할 HTML 요소 또는 HTML 요소의 id를 지정합니다.</span>
                                <span class="kd">var</span> <span class="nx">mapDiv</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">map</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// 'map'으로 선언해도 동일</span>
    
                                <span class="c1">//옵션 없이 지도 객체를 생성하면 서울 시청을 중심으로 하는 16 레벨의 지도가 생성됩니다.</span>
                                <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nb">Map</span><span class="p">(</span><span class="nx">mapDiv</span><span class="p">,</span> <span class="nx">mapOptions</span><span class="p">);</span>
    
                            <span class="p">},</span>
                            <span class="na">error</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    
                            <span class="p">}</span>
    
                        <span class="p">});</span>
                        
                    <span class="p">});</span>

                <span class="p">});</span>
                
                <span class="k">async</span>  <span class="kd">function</span> <span class="nx">getLocation</span><span class="p">()</span> <span class="p">{</span>
                    <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>
                    <span class="k">if</span><span class="p">(</span><span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">)</span> <span class="p">{</span>

                        <span class="kd">let</span> <span class="nx">promise</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">rejected</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                            <span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">.</span><span class="nx">getCurrentPosition</span><span class="p">((</span><span class="nx">position</span><span class="p">)</span> <span class="o">=&gt;</span><span class="p">{</span>
                                <span class="nx">resolve</span><span class="p">(</span><span class="nx">position</span><span class="p">);</span>
                            <span class="p">});</span>
                        <span class="p">});</span>

                        <span class="kd">let</span> <span class="nx">position</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">promise</span><span class="p">;</span>
                        
                        <span class="c1">//위도 position.coords.latitude</span>
                        <span class="c1">//경도 position.coords.longitude</span>
                        <span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">latitude</span><span class="p">;</span>
                        <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">longitude</span><span class="p">;</span>
                           
                    <span class="p">}</span>
                    <span class="k">return</span> <span class="nx">XY</span><span class="p">;</span>
                <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br />
<br /></p>

<p>그리고 강력 새로고침을 해보면 빠밤</p>

<p><br />
<br />
<br /></p>

<p><img src="/assets/img/api/naver-map-api-pharmacy/21.png" alt="Desktop View" /></p>

<p><br />
<br />
<br /></p>

<h2 id="마지막으로-약국이-지도에-보이게-하는-작업만-남았습니다">마지막으로 약국이 지도에 보이게 하는 작업만 남았습니다.\</h2>

<p>https://navermaps.github.io/maps.js/docs/tutorial-digest.example.html<br />
–&gt; 중간에 <code class="language-plaintext highlighter-rouge">정보창</code> 있는 곳에 <code class="language-plaintext highlighter-rouge">정보 창 옵션 사용하기</code> 클릭<br />
푸른 아이콘 클릭시 그곳의 정보를 보여주는 역할 수행합니다.</p>

<p><br /></p>

<p>잠깐 localhost에서 F12 -&gt; console -&gt; items 클릭<br />
그러면 아래와 같은 사진들이 보일 것입니다
<br /></p>

<p><img src="/assets/img/api/naver-map-api-pharmacy/22.png" alt="Desktop View" /></p>

<p><br />
<br /></p>

<p>총 81개의 각 배열들이 있고 제가 있는 곳은 아마 큰 번화가가 아니라 약국갯수가 이런데 다른 번화가가면 몇백개 나올 수도 있습니다.<br />
복수형으로 만들어주어야하기 때문에 하나하나 엑세스하기 위해 반복문인 forEach 받읍시다, 첫번째인자로 it, 두번째 인자로 index<br />
이 it변수에는 item 배열에 있는 81개가 각각 it변수에 담깁니다.<br />
function 영역은 81개 전체 배열갯수만큼 반복해서 실행되는 영역</p>

<p><br /></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>이 곳 아래에 적어줍시다</p>

<p>이제 각 dutyName dutyAddr dutyTel1 dutyTime으로 변수 받읍시다<br />
그리고 https://navermaps.github.io/maps.js/docs/tutorial-infowindow-options.example.html<br />
이곳에서 marker부터 끝까지 복사하여 그 아래에 붙여넣기, 그리고 marker는 let 변수로 선언해줍시다.<br />
이제 index.html을 보면 마커가 표시될 위치(position)이 있는데 position이 cityhall이라는 변수로 되있음<br />
예제를 보면 cityhall이 있는 내용이 있습니다 그 부분 복사하여 dutyTime 아래에 넣읍시다. 근데 우리는 약국을 하니까<br />
let cityhall –&gt; let pharmacy_location 바꿔줍시다 그리고 position도 바꿔주고 아래에\</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">contentString</span> <span class="o">=</span> <span class="p">[</span>
<span class="o">---</span>
<span class="o">---</span>
<span class="o">---</span>
<span class="p">]</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>—&gt;</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>                                    <span class="kd">var</span> <span class="nx">contentString</span> <span class="o">=</span> <span class="p">[</span>
                                            <span class="dl">'</span><span class="s1">&lt;div class="iw_inner"&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">   &lt;h3&gt;</span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyName</span><span class="o">+</span><span class="dl">'</span><span class="s1">&lt;/h3&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">   &lt;p&gt;</span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyAddr</span><span class="o">+</span><span class="dl">'</span><span class="s1">&lt;br /&gt;</span><span class="dl">'</span><span class="p">,</span> 
                                            <span class="dl">'</span><span class="s1">       </span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyTel1</span><span class="o">+</span><span class="dl">'</span><span class="s1">&lt;br /&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">       </span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyTime</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">   &lt;/p&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">&lt;/div&gt;</span><span class="dl">'</span>
                                        <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>참 이곳에 img src 한줄 지웁시다 우린 사진이 필요없으니</p>

<p><br />
<br />
<br /></p>

<p>그리고 localhost에서 F12를 누릅시다</p>

<p><br />
<br /></p>

<p><img src="/assets/img/api/naver-map-api-pharmacy/23.png" alt="Desktop View" /></p>

<p><br />
<br /></p>

<p>사진에 보면 행으로 번호가 0~16으로 있는데 이중에 아무거나 누르면 자세한 정보가 나오는데 그 안에 이 2개가 있을겁니다
<code class="language-plaintext highlighter-rouge">wgs84Lat</code> <code class="language-plaintext highlighter-rouge">wgs84Lon</code> 그거를 37.xxx  126.xxx 대신에 앞에 it.을 붙여 합쳐서 각각 고칩시다</p>

<p><br />
<br />
<br /></p>

<p>여기까지의 index.html 코드는 이렇습니다.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>     
        <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=b3cui5r9yl&amp;amp;submodules=geocoder"</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://code.jquery.com/jquery-3.6.1.min.js"</span> <span class="na">integrity=</span><span class="s">"sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="</span> <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;/head&gt;</span>    
        <span class="nt">&lt;body&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"margin-top: 20px; margin-bottom: 10px; font-weight: bold;"</span><span class="nt">&gt;</span>
                약국 지도💊
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"map"</span> <span class="na">style=</span><span class="s">"width:100%; height:80%"</span><span class="nt">&gt;</span>

            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/body&gt;</span>
            <span class="nt">&lt;script&gt;</span>
                <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="k">async</span> <span class="kd">function</span><span class="p">(){</span>
                    <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getLocation</span><span class="p">();</span>

                    <span class="c1">//alert("위도" + XY.lat);</span>
                    <span class="c1">//alert("경도" + XY.lng);</span>

                    <span class="k">await</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Service</span><span class="p">.</span><span class="nx">reverseGeocode</span><span class="p">({</span>
                        <span class="na">location</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">)</span>
                    <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">status</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
                        <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
                        <span class="kd">let</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">items</span><span class="p">;</span>
                        <span class="c1">//console.log(items[0].addrdetail.sido); // 시도값</span>
                        <span class="c1">//console.log(items[0].addrdetail.sigugun); // 시구군</span>
                        <span class="kd">let</span> <span class="nx">sido_arr</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addrdetail</span><span class="p">.</span><span class="nx">sido</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">);</span>
                        <span class="kd">let</span> <span class="nx">gubun_arr</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addrdetail</span><span class="p">.</span><span class="nx">sigugun</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">);</span>

                        <span class="kd">let</span> <span class="nx">sido</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
                        <span class="kd">let</span> <span class="nx">gubun</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
                        <span class="k">if</span><span class="p">(</span><span class="nx">sido_arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">sido</span> <span class="o">=</span> <span class="nx">sido_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                            <span class="nx">gugun</span> <span class="o">=</span> <span class="nx">gubun_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">sido_arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">sido</span> <span class="o">=</span> <span class="nx">sido_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                            <span class="nx">gugun</span> <span class="o">=</span> <span class="nx">gubun_arr</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
                        <span class="p">}</span>
                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sido</span><span class="p">);</span>
                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">gugun</span><span class="p">);</span>

                        <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
                            <span class="na">url</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/pharmach_list</span><span class="dl">"</span><span class="p">,</span>
                            <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>   <span class="c1">// GET을 통해 밑에 주석처리한 api url 부분 ?뒤부터 눈에 보이게끔 값들을 하나하나 입력해줌</span>
                            <span class="na">cache</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">//cache는 쓰지 않을거라 false</span>
                            <span class="na">dataType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>    <span class="c1">//dataType은 json으로 받겠다</span>
                            <span class="na">data</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">Q0</span><span class="dl">"</span><span class="p">:</span> <span class="nx">sido</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Q1</span><span class="dl">"</span><span class="p">:</span> <span class="nx">gugun</span><span class="p">,</span> <span class="dl">"</span><span class="s2">QT</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">QN</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ORD</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">pageNo</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">numOfRows</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1000</span><span class="dl">"</span><span class="p">},</span>   
                            <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    
                                <span class="kd">var</span> <span class="nx">mapOptions</span> <span class="o">=</span> <span class="p">{</span>
                                    <span class="na">center</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">),</span>
                                    <span class="na">zoom</span><span class="p">:</span> <span class="mi">14</span>
                                <span class="p">}</span>
    
                                                            <span class="c1">//지도를 삽입할 HTML 요소 또는 HTML 요소의 id를 지정합니다.</span>
                                <span class="kd">var</span> <span class="nx">mapDiv</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">map</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// 'map'으로 선언해도 동일</span>
    
                                <span class="c1">//옵션 없이 지도 객체를 생성하면 서울 시청을 중심으로 하는 16 레벨의 지도가 생성됩니다.</span>
                                <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nb">Map</span><span class="p">(</span><span class="nx">mapDiv</span><span class="p">,</span> <span class="nx">mapOptions</span><span class="p">);</span>
                                
                                <span class="nx">data</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">it</span><span class="p">,</span> <span class="nx">index</span><span class="p">){</span>
                                    <span class="kd">let</span> <span class="nx">dutyName</span> <span class="o">=</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyName</span><span class="p">;</span> <span class="c1">//약국명</span>
                                    <span class="kd">let</span> <span class="nx">dutyAddr</span> <span class="o">=</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyAddr</span><span class="p">;</span> <span class="c1">//주소</span>
                                    <span class="kd">let</span> <span class="nx">dutyTel1</span> <span class="o">=</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTel1</span><span class="p">;</span> <span class="c1">//전번</span>

                                    <span class="kd">let</span> <span class="nx">dutyTime</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span> <span class="c1">//업무시간</span>

                                    <span class="kd">let</span> <span class="nx">pharmacy_location</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">wgs84Lat</span><span class="p">,</span> <span class="nx">it</span><span class="p">.</span><span class="nx">wgs84Lon</span><span class="p">)</span>


                                    
                                    <span class="kd">let</span> <span class="nx">marker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Marker</span><span class="p">({</span>
                                        <span class="na">map</span><span class="p">:</span> <span class="nx">map</span><span class="p">,</span>
                                        <span class="na">position</span><span class="p">:</span> <span class="nx">pharmacy_location</span>
                                    <span class="p">});</span>
                                
                                    <span class="kd">var</span> <span class="nx">contentString</span> <span class="o">=</span> <span class="p">[</span>
                                            <span class="dl">'</span><span class="s1">&lt;div class="iw_inner"&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">   &lt;h3&gt;</span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyName</span><span class="o">+</span><span class="dl">'</span><span class="s1">&lt;/h3&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">   &lt;p&gt;</span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyAddr</span><span class="o">+</span><span class="dl">'</span><span class="s1">&lt;br /&gt;</span><span class="dl">'</span><span class="p">,</span> 
                                            <span class="dl">'</span><span class="s1">       </span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyTel1</span><span class="o">+</span><span class="dl">'</span><span class="s1">&lt;br /&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">       </span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyTime</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">   &lt;/p&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">&lt;/div&gt;</span><span class="dl">'</span>
                                        <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
                                        
                                        <span class="kd">var</span> <span class="nx">infowindow</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">InfoWindow</span><span class="p">({</span>
                                            <span class="na">content</span><span class="p">:</span> <span class="nx">contentString</span><span class="p">,</span>
                                            <span class="na">maxWidth</span><span class="p">:</span> <span class="mi">140</span><span class="p">,</span>
                                            <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#eee</span><span class="dl">"</span><span class="p">,</span>
                                            <span class="na">borderColor</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#2db400</span><span class="dl">"</span><span class="p">,</span>
                                            <span class="na">borderWidth</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                                            <span class="na">anchorSize</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Size</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
                                            <span class="na">anchorSkew</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                                            <span class="na">anchorColor</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#eee</span><span class="dl">"</span><span class="p">,</span>
                                            <span class="na">pixelOffset</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="o">-</span><span class="mi">20</span><span class="p">)</span>
                                        <span class="p">});</span>
                                        
                                <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Event</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="nx">marker</span><span class="p">,</span> <span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="nx">infowindow</span><span class="p">.</span><span class="nx">getMap</span><span class="p">())</span> <span class="p">{</span>
                                        <span class="nx">infowindow</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
                                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                                        <span class="nx">infowindow</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">map</span><span class="p">,</span> <span class="nx">marker</span><span class="p">);</span>
                                    <span class="p">}</span>
                                <span class="p">});</span>






                                <span class="p">});</span> 

                            <span class="p">},</span>
                            <span class="na">error</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    
                            <span class="p">}</span>
    
                        <span class="p">});</span>
                        
                    <span class="p">});</span>

                <span class="p">});</span>
                
                <span class="k">async</span>  <span class="kd">function</span> <span class="nx">getLocation</span><span class="p">()</span> <span class="p">{</span>
                    <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>
                    <span class="k">if</span><span class="p">(</span><span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">)</span> <span class="p">{</span>

                        <span class="kd">let</span> <span class="nx">promise</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">rejected</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                            <span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">.</span><span class="nx">getCurrentPosition</span><span class="p">((</span><span class="nx">position</span><span class="p">)</span> <span class="o">=&gt;</span><span class="p">{</span>
                                <span class="nx">resolve</span><span class="p">(</span><span class="nx">position</span><span class="p">);</span>
                            <span class="p">});</span>
                        <span class="p">});</span>

                        <span class="kd">let</span> <span class="nx">position</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">promise</span><span class="p">;</span>
                        
                        <span class="c1">//위도 position.coords.latitude</span>
                        <span class="c1">//경도 position.coords.longitude</span>
                        <span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">latitude</span><span class="p">;</span>
                        <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">longitude</span><span class="p">;</span>
                           
                    <span class="p">}</span>
                    <span class="k">return</span> <span class="nx">XY</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>그리고 localhost에서 강력 새로고침하여 확인해보면</p>

<p><br /></p>

<p><img src="/assets/img/api/naver-map-api-pharmacy/24.png" alt="Desktop View" /></p>

<p><br /></p>

<p>약국은 잘 뜨는데 보이는 폭이 좁아서 글자가 좀 잘리는 것 같군요.<br />
폭 maxWidth 140 -&gt; 440으로 고칩시다 그리고 요일별 영업시간 번호 등 추가해줍시다.</p>

<p><br /></p>

<p>오 이제 잘나옵니다!</p>

<p><br />
<br />
<br /></p>

<p><img src="/assets/img/api/naver-map-api-pharmacy/25.png" alt="Desktop View" /></p>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br /></p>

<p>여기까지의 <code class="language-plaintext highlighter-rouge">index.html</code>와 <code class="language-plaintext highlighter-rouge">index.js</code> 코드를 공개할테니 잘 안되시는 분들은 비교해보시고 수정해보세요ㅎ</p>

<p><br />
<br />
<br /></p>

<h2 id="indexhtml-1">index.html</h2>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>     
        <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=아이디 &amp;amp;submodules=geocoder"</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://code.jquery.com/jquery-3.6.1.min.js"</span> <span class="na">integrity=</span><span class="s">"sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="</span> <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;/head&gt;</span>    
        <span class="nt">&lt;body&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"margin-top: 20px; margin-bottom: 10px; font-weight: bold;"</span><span class="nt">&gt;</span>
                약국 지도💊
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"map"</span> <span class="na">style=</span><span class="s">"width:100%; height:80%"</span><span class="nt">&gt;</span>

            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/body&gt;</span>
            <span class="nt">&lt;script&gt;</span>
                <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="k">async</span> <span class="kd">function</span><span class="p">(){</span>
                    <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getLocation</span><span class="p">();</span>

                    <span class="c1">//alert("위도" + XY.lat);</span>
                    <span class="c1">//alert("경도" + XY.lng);</span>

                    <span class="k">await</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Service</span><span class="p">.</span><span class="nx">reverseGeocode</span><span class="p">({</span>
                        <span class="na">location</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">)</span>
                    <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">status</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
                        <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
                        <span class="kd">let</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">items</span><span class="p">;</span>
                        <span class="c1">//console.log(items[0].addrdetail.sido); // 시도값</span>
                        <span class="c1">//console.log(items[0].addrdetail.sigugun); // 시구군</span>
                        <span class="kd">let</span> <span class="nx">sido_arr</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addrdetail</span><span class="p">.</span><span class="nx">sido</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">);</span>
                        <span class="kd">let</span> <span class="nx">gubun_arr</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addrdetail</span><span class="p">.</span><span class="nx">sigugun</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">);</span>

                        <span class="kd">let</span> <span class="nx">sido</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
                        <span class="kd">let</span> <span class="nx">gubun</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
                        <span class="k">if</span><span class="p">(</span><span class="nx">sido_arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">sido</span> <span class="o">=</span> <span class="nx">sido_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                            <span class="nx">gugun</span> <span class="o">=</span> <span class="nx">gubun_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">sido_arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">sido</span> <span class="o">=</span> <span class="nx">sido_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                            <span class="nx">gugun</span> <span class="o">=</span> <span class="nx">gubun_arr</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
                        <span class="p">}</span>
                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sido</span><span class="p">);</span>
                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">gugun</span><span class="p">);</span>

                        <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
                            <span class="na">url</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/pharmach_list</span><span class="dl">"</span><span class="p">,</span>
                            <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>   <span class="c1">// GET을 통해 밑에 주석처리한 api url 부분 ?뒤부터 눈에 보이게끔 값들을 하나하나 입력해줌</span>
                            <span class="na">cache</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">//cache는 쓰지 않을거라 false</span>
                            <span class="na">dataType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>    <span class="c1">//dataType은 json으로 받겠다</span>
                            <span class="na">data</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">Q0</span><span class="dl">"</span><span class="p">:</span> <span class="nx">sido</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Q1</span><span class="dl">"</span><span class="p">:</span> <span class="nx">gugun</span><span class="p">,</span> <span class="dl">"</span><span class="s2">QT</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">QN</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ORD</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">pageNo</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">numOfRows</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1000</span><span class="dl">"</span><span class="p">},</span>   
                            <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    
                                <span class="kd">var</span> <span class="nx">mapOptions</span> <span class="o">=</span> <span class="p">{</span>
                                    <span class="na">center</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">),</span>
                                    <span class="na">zoom</span><span class="p">:</span> <span class="mi">20</span>
                                <span class="p">}</span>
    
                                                            <span class="c1">//지도를 삽입할 HTML 요소 또는 HTML 요소의 id를 지정합니다.</span>
                                <span class="kd">var</span> <span class="nx">mapDiv</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">map</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// 'map'으로 선언해도 동일</span>
    
                                <span class="c1">//옵션 없이 지도 객체를 생성하면 서울 시청을 중심으로 하는 16 레벨의 지도가 생성됩니다.</span>
                                <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nb">Map</span><span class="p">(</span><span class="nx">mapDiv</span><span class="p">,</span> <span class="nx">mapOptions</span><span class="p">);</span>
                                
                                <span class="nx">data</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">it</span><span class="p">,</span> <span class="nx">index</span><span class="p">){</span>
                                    <span class="kd">let</span> <span class="nx">dutyName</span> <span class="o">=</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyName</span><span class="p">;</span> <span class="c1">//약국명</span>
                                    <span class="kd">let</span> <span class="nx">dutyAddr</span> <span class="o">=</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyAddr</span><span class="p">;</span> <span class="c1">//주소</span>
                                    <span class="kd">let</span> <span class="nx">dutyTel1</span> <span class="o">=</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTel1</span><span class="p">;</span> <span class="c1">//전번</span>

                                    <span class="kd">let</span> <span class="nx">dutyTime</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span> <span class="c1">//업무시간</span>

                                    
                                    <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime1s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime1c</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">월요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime1s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime1c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                    <span class="p">}</span>
    
                                    <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime2s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime2c</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">화요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime2s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime2c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                    <span class="p">}</span>
    
                                    <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime3s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime3c</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">수요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime3s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime3c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                    <span class="p">}</span>
    
                                    <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime4s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime4c</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">목요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime4s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime4c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                    <span class="p">}</span>
    
                                    <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime5s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime5c</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">금요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime5s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime5c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                    <span class="p">}</span>
    
                                    <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime6s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime6c</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">토요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime6s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime6c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                    <span class="p">}</span>
    
                                    <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime7s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime7c</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">일요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime7s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime7c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                    <span class="p">}</span>
    
                                    <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime8s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime8c</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">공휴일</span><span class="dl">"</span><span class="p">;</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime8s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime8c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                    <span class="p">}</span>
                                    


                                    <span class="kd">let</span> <span class="nx">pharmacy_location</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">wgs84Lat</span><span class="p">,</span> <span class="nx">it</span><span class="p">.</span><span class="nx">wgs84Lon</span><span class="p">)</span>


                                    
                                    <span class="kd">let</span> <span class="nx">marker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Marker</span><span class="p">({</span>
                                        <span class="na">map</span><span class="p">:</span> <span class="nx">map</span><span class="p">,</span>
                                        <span class="na">position</span><span class="p">:</span> <span class="nx">pharmacy_location</span>
                                    <span class="p">});</span>
                                
                                    <span class="kd">var</span> <span class="nx">contentString</span> <span class="o">=</span> <span class="p">[</span>
                                            <span class="dl">'</span><span class="s1">&lt;div class="iw_inner"&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">   &lt;h3&gt;</span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyName</span><span class="o">+</span><span class="dl">'</span><span class="s1">&lt;/h3&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">   &lt;p&gt;</span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyAddr</span><span class="o">+</span><span class="dl">'</span><span class="s1">&lt;br /&gt;</span><span class="dl">'</span><span class="p">,</span> 
                                            <span class="dl">'</span><span class="s1">       </span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyTel1</span><span class="o">+</span><span class="dl">'</span><span class="s1">&lt;br /&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">       </span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyTime</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">   &lt;/p&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">&lt;/div&gt;</span><span class="dl">'</span>
                                        <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
                                        
                                        <span class="kd">var</span> <span class="nx">infowindow</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">InfoWindow</span><span class="p">({</span>
                                            <span class="na">content</span><span class="p">:</span> <span class="nx">contentString</span><span class="p">,</span>
                                            <span class="na">maxWidth</span><span class="p">:</span> <span class="mi">440</span><span class="p">,</span>
                                            <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#eee</span><span class="dl">"</span><span class="p">,</span>
                                            <span class="na">borderColor</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#2db400</span><span class="dl">"</span><span class="p">,</span>
                                            <span class="na">borderWidth</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                                            <span class="na">anchorSize</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Size</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
                                            <span class="na">anchorSkew</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                                            <span class="na">anchorColor</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#eee</span><span class="dl">"</span><span class="p">,</span>
                                            <span class="na">pixelOffset</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="o">-</span><span class="mi">20</span><span class="p">)</span>
                                        <span class="p">});</span>
                                        
                                <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Event</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="nx">marker</span><span class="p">,</span> <span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="nx">infowindow</span><span class="p">.</span><span class="nx">getMap</span><span class="p">())</span> <span class="p">{</span>
                                        <span class="nx">infowindow</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
                                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                                        <span class="nx">infowindow</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">map</span><span class="p">,</span> <span class="nx">marker</span><span class="p">);</span>
                                    <span class="p">}</span>
                                <span class="p">});</span>






                                <span class="p">});</span> 

                            <span class="p">},</span>
                            <span class="na">error</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    
                            <span class="p">}</span>
    
                        <span class="p">});</span>
                        
                    <span class="p">});</span>

                <span class="p">});</span>
                
                <span class="k">async</span>  <span class="kd">function</span> <span class="nx">getLocation</span><span class="p">()</span> <span class="p">{</span>
                    <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>
                    <span class="k">if</span><span class="p">(</span><span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">)</span> <span class="p">{</span>

                        <span class="kd">let</span> <span class="nx">promise</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">rejected</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                            <span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">.</span><span class="nx">getCurrentPosition</span><span class="p">((</span><span class="nx">position</span><span class="p">)</span> <span class="o">=&gt;</span><span class="p">{</span>
                                <span class="nx">resolve</span><span class="p">(</span><span class="nx">position</span><span class="p">);</span>
                            <span class="p">});</span>
                        <span class="p">});</span>

                        <span class="kd">let</span> <span class="nx">position</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">promise</span><span class="p">;</span>
                        
                        <span class="c1">//위도 position.coords.latitude</span>
                        <span class="c1">//경도 position.coords.longitude</span>
                        <span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">latitude</span><span class="p">;</span>
                        <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">longitude</span><span class="p">;</span>
                           
                    <span class="p">}</span>
                    <span class="k">return</span> <span class="nx">XY</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br /></p>

<h2 id="indexjs-1">index.js</h2>

<p><br />
<br /></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">);</span>  
<span class="kd">let</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span> <span class="p">();</span>                                       
<span class="kd">let</span> <span class="nx">port</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">80</span><span class="p">;</span>                
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="dl">"</span><span class="s2">public_html</span><span class="dl">"</span><span class="p">));</span>                     

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span>                                  
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">HTML 서버 시작됨</span><span class="dl">"</span><span class="p">)</span>
<span class="p">})</span>

<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/pharmach_list</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>

        <span class="kd">let</span> <span class="nx">api</span> <span class="o">=</span> <span class="k">async</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">response</span> <span class="o">=</span> <span class="kc">null</span>
            
            <span class="k">try</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">http://apis.data.go.kr/B552657/ErmctInsttInfoInqireService/getParmacyListInfoInqire</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
                <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
                    <span class="dl">"</span><span class="s2">serviceKey</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">mL6hpE93V2cGEHnZNYbp2kbpZIm2IFyc9rhdh2wIaUseyjghN/lJSV7tSchmbL47mZsX8gNcLVtGpsTxQkstdA==</span><span class="dl">"</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">Q0</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">Q0</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">Q1</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">Q1</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">QT</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">QT</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">QN</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">QN</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">ORD</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">ORD</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">pageNo</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">pageNo</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">numOfRows</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">numOfRows</span>
                <span class="p">}</span>
            <span class="p">})</span>
        <span class="p">}</span>






        <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
        <span class="p">}</span>







            <span class="k">return</span> <span class="nx">response</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">api</span><span class="p">().</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span>  <span class="p">{</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Access-Control-Allow-Origin</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">*</span><span class="dl">"</span><span class="p">)</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
        <span class="p">});</span>
<span class="p">});</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br />
<br />
<br />
<br /></p>

<p>2022 09 19일 갑자기 내 위치를 나타내는 커스텀 마커가 추가하고싶어졌다. 그리하여 코드를 변형시켰다<br />
<code class="language-plaintext highlighter-rouge">index.html</code> 로 갑시다.</p>

<p><br />
<br /></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">mapOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">center</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">),</span>
<span class="na">zoom</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span>

<span class="p">}</span>
<span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nb">Map</span><span class="p">(</span><span class="nx">mapDiv</span><span class="p">,</span> <span class="nx">mapOptions</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>이문장 바로 아래에 이 문장들을 추가합시다</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre></td><td class="rouge-code"><pre>                                <span class="kd">var</span> <span class="nx">position</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">);</span>

                                <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nb">Map</span><span class="p">(</span><span class="dl">'</span><span class="s1">map</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
                                    <span class="na">center</span><span class="p">:</span> <span class="nx">position</span><span class="p">,</span>
                                    <span class="na">zoom</span><span class="p">:</span> <span class="mi">14</span>
                                <span class="p">});</span>

                                <span class="kd">var</span> <span class="nx">markerOptions</span> <span class="o">=</span> <span class="p">{</span>
                                    <span class="na">position</span><span class="p">:</span> <span class="nx">position</span><span class="p">,</span>
                                    <span class="na">map</span><span class="p">:</span> <span class="nx">map</span><span class="p">,</span>
                                    <span class="na">icon</span><span class="p">:</span> <span class="p">{</span>
                                        <span class="na">content</span><span class="p">:</span> <span class="p">[</span>
                                        <span class="dl">'</span><span class="s1">&lt;img src="/img/sugar.jpg" style="position:absolute; top:2px; left:2px; width:32px; height:32px; object-fit:cover; object-position:center center; border-radius:50%; z-index:6"&gt;</span><span class="dl">'</span><span class="p">,</span>
                                        <span class="dl">'</span><span class="s1">&lt;img src="/map-pin-afterUser.svg" style="position;absolute; top:0; left:0; z-index:5"&gt;</span><span class="dl">'</span><span class="p">,</span>
                                        <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">),</span>

                                        <span class="na">anchor</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">26</span><span class="p">)</span>
                                    <span class="p">}</span>
                                <span class="p">};</span>
                                <span class="kd">var</span> <span class="nx">marker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Marker</span><span class="p">(</span><span class="nx">markerOptions</span><span class="p">);</span>                            




                            <span class="kd">var</span> <span class="nx">circle</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Circle</span><span class="p">({</span>
                                <span class="na">map</span><span class="p">:</span> <span class="nx">map</span><span class="p">,</span>
                                <span class="na">center</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">),</span>
                                <span class="na">radius</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
                                <span class="na">fillColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">red</span><span class="dl">'</span><span class="p">,</span>
                                <span class="na">fillOpacity</span><span class="p">:</span> <span class="mf">0.2</span>
                            <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>그 후 저의 경우에는 public 폴더를 만들어 그안에 img 폴더, 그안에 <code class="language-plaintext highlighter-rouge">sugar.jpg</code>를 저장하였습니다.<br />
자 이상태로 바로 node index.js 실행하면 오류나서 커스텀 마커 안나옵니다</p>

<p><br /></p>

<p>무슨 말이냐면 <code class="language-plaintext highlighter-rouge">index.js</code>에 코드에 static으로 img 디렉터리를 지정하거나<br />
리소스에 접근했을때 보내주는 코드가 없기 때문입니다.<br />
(이 부분은 뀰님께서 도와주셔서 해결할 수 있었습니다, 다시 한번 감사드립니다.)<br />
이제 <code class="language-plaintext highlighter-rouge">index.js</code>로 가서 문장 하나 추가해주고 포트번호 80 -&gt; 5000 변경해줍시다</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="dl">'</span><span class="s1">public</span><span class="dl">'</span><span class="p">));</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
그러면 사진처럼 빰!</p>

<p><img src="/assets/img/api/naver-map-api-pharmacy/26.png" alt="Desktop View" /></p>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br /></p>

<p>자 여기까지의 파일트리와 <code class="language-plaintext highlighter-rouge">index.js</code>와 <code class="language-plaintext highlighter-rouge">index.html</code> 코드는 이렇습니다.</p>

<p><br />
<br />
<br /></p>

<p><img src="/assets/img/api/naver-map-api-pharmacy/27.png" alt="Desktop View" /></p>

<p><br />
<br />
<br />
<br /></p>

<h3 id="indexjs-2">index.js</h3>

<p><br /></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">);</span>
<span class="c1">// express모듈을 선언   +   어떤 모듈을 쓸건지 require로 지정   =    이제 이 구문을 통해 express모듈이 사용 가능한 상태가 됨</span>

<span class="kd">let</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>
<span class="c1">// axios 모듈을 사용하겠다</span>

<span class="kd">let</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span> <span class="p">();</span>
<span class="c1">// app 이라는 변수 하나를 더 선언하여 express객체를 할당하자     이제 이 구문을 통해 app이라는 변수는 express 모듈을 가르키게 됨</span>

<span class="kd">let</span> <span class="nx">port</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">5000</span><span class="p">;</span>


<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="dl">'</span><span class="s1">public</span><span class="dl">'</span><span class="p">));</span>
<span class="c1">// 커스텀 마커를 사용하기 위해 public 폴더 안 파일과 localhost:5000 연동되게 해줌</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="dl">"</span><span class="s2">public_html</span><span class="dl">"</span><span class="p">));</span>
<span class="c1">// express의 use 메소드를 선언하고 express.static이라고 괄호 사이에 입력한 후  public_html 로 지정하겠다</span>
<span class="c1">// 이제 public_html 폴더 아래에 있는 모든 파일들은 app.use 즉 express 모듈의 웹서버가 구동되게함</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">HTML 서버 시작됨</span><span class="dl">"</span><span class="p">)</span>
<span class="p">})</span>
<span class="c1">// express 서비스가 작동될 포트 지정 보통 80번 많이씀 그리고 포트 열렸는지 확인해주기위해 콘솔을 적음</span>
<span class="c1">// app.listen에 port를 사용해주고 대신 위에 포트 80변수를 선언해주자 이건 사용되기 앞서 그 이전에 설정되야함</span>
<span class="c1">// 이제 위로 가서 포트 80 변수를 선언해주자  process.env.PORT는 환경설정 내용이다</span>



<span class="c1">//현재 app.use를 사용해 웹서버를 열은 상황이다 근데</span>
<span class="c1">//한페이지만 이름을 pharmach_list따로 열어보겠다 </span>
<span class="c1">//이 경우는 app.get으로 가능하다</span>
<span class="c1">//그리고 여기 접속했을때 어떤 데이터를 보낼지 결정가능</span>

<span class="c1">/////////</span>

<span class="c1">////////</span>


<span class="nx">app</span><span class="p">.</span><span class="kd">get</span> <span class="p">(</span><span class="dl">"</span><span class="s2">/pharmach_list</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span>  <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">api</span> <span class="o">=</span> <span class="k">async</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">response</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

            <span class="k">try</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">http://apis.data.go.kr/B552657/ErmctInsttInfoInqireService/getParmacyListInfoInqire</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
                <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
                        <span class="dl">"</span><span class="s2">serviceKey</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">mL6hpE93V2cGEHnZNYbp2kbpZIm2IFyc9rhdh2wIaUseyjghN/lJSV7tSchmbL47mZsX8gNcLVtGpsTxQkstdA==</span><span class="dl">"</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">Q0</span><span class="dl">"</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">Q0</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">Q1</span><span class="dl">"</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">Q1</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">QT</span><span class="dl">"</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">QT</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">QN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">QN</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">ORD</span><span class="dl">"</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">ORD</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">pageNo</span><span class="dl">"</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">pageNo</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">numOfRows</span><span class="dl">"</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">numOfRows</span>    <span class="c1">//  1000개의 데이터를 1장에 한번에 받겠다 </span>
                    <span class="p">}</span>
                <span class="p">})</span>
            <span class="p">}</span>








            <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
            <span class="p">}</span>






            
            <span class="k">return</span> <span class="nx">response</span><span class="p">;</span>
        <span class="p">}</span>


        <span class="nx">api</span><span class="p">().</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Access-Control-Allow-Origin</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">*</span><span class="dl">"</span><span class="p">);</span>    <span class="c1">// * = all,   access control 근원(origin)으로 가능한 것들은 전부 허용해줘라    이렇게 세팅시 cors 로 인한 문제 해결 가능</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span> <span class="c1">// data.response.body가 위에 보이는 약국데이터다, 이를 pharmach_list 경로로 접근하는 컴퓨터에게 데이터 제공</span>
        <span class="p">});</span>  
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br />
<br />
<br />
<br />
<br /></p>

<h3 id="indexhtml-2">index.html</h3>

<p><br /></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>     <span class="c">&lt;!-- script type는 자바스크립트, src를 넣어 소스는 다른 곳에 있다고 지정 ex) 네이버 open api에 있는 정보--&gt;</span>
        <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=xeulgqnc95&amp;amp;submodules=geocoder"</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://code.jquery.com/jquery-3.6.1.min.js"</span> <span class="na">integrity=</span><span class="s">"sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="</span> <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/head&gt;</span>    
        <span class="nt">&lt;body&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"margin-top: 20px; margin-bottom: 10px; font-weight: bold;"</span><span class="nt">&gt;</span>
                약국 지도💊
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"map"</span> <span class="na">style=</span><span class="s">"width:100%; height:80%"</span><span class="nt">&gt;</span>

            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;script&gt;</span>
            <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="k">async</span> <span class="kd">function</span><span class="p">(){</span>
                <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getLocation</span><span class="p">();</span>
                <span class="c1">//alert("위도" + XY.lat);</span>
                <span class="c1">//alert("경도" + XY.lng);</span>

                <span class="c1">// reverseGeocode는 비동기형이라 await 추가</span>
                <span class="k">await</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Service</span><span class="p">.</span><span class="nx">reverseGeocode</span><span class="p">({</span>
                    <span class="na">location</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">)</span>
                <span class="p">},</span><span class="kd">function</span><span class="p">(</span><span class="nx">status</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
                    <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
                    <span class="kd">let</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">items</span><span class="p">;</span>
                    <span class="c1">//console.log(items[0].addrdetail.sido);</span>
                    <span class="c1">//console.log(items[0].addrdetail.sigugun);</span>
                    <span class="kd">let</span> <span class="nx">sido_arr</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addrdetail</span><span class="p">.</span><span class="nx">sido</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">);</span>
                    <span class="kd">let</span> <span class="nx">gubun_arr</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addrdetail</span><span class="p">.</span><span class="nx">sigugun</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">);</span>

                    <span class="kd">let</span> <span class="nx">sido</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
                    <span class="kd">let</span> <span class="nx">gubun</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
                    <span class="k">if</span><span class="p">(</span><span class="nx">sido_arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">sido</span> <span class="o">=</span> <span class="nx">sido_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                        <span class="nx">gugun</span> <span class="o">=</span> <span class="nx">gubun_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="p">}</span>


                    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">sido_arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">sido</span> <span class="o">=</span> <span class="nx">sido_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                        <span class="nx">gugun</span> <span class="o">=</span> <span class="nx">sido_arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="p">}</span>
                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sido</span><span class="p">);</span>
                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">gugun</span><span class="p">);</span>


                    <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
                        <span class="na">url</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/pharmach_list</span><span class="dl">"</span><span class="p">,</span>
                        <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>   <span class="c1">// GET을 통해 밑에 주석처리한 api url 부분 ?뒤부터 눈에 보이게끔 값들을 하나하나 입력해줌</span>
                        <span class="na">cache</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">//cache는 쓰지 않을거라 false</span>
                        <span class="na">dataType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>    <span class="c1">//dataType은 json으로 받겠다</span>
                        <span class="na">data</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">Q0</span><span class="dl">"</span><span class="p">:</span> <span class="nx">sido</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Q1</span><span class="dl">"</span><span class="p">:</span> <span class="nx">gugun</span><span class="p">,</span> <span class="dl">"</span><span class="s2">QT</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">QN</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ORD</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">pageNo</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">numOfRows</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1000</span><span class="dl">"</span><span class="p">},</span>   
                        <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    
    
                            <span class="c1">//지도를 삽입할 HTML 요소 또는 HTML 요소의 id를 지정합니다.</span>
                            <span class="kd">var</span> <span class="nx">mapDiv</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">map</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// 'map'으로 선언해도 동일</span>
    
                            <span class="c1">//옵션 없이 지도 객체를 생성하면 서울 시청을 중심으로 하는 16 레벨의 지도가 생성됩니다.</span>
                            <span class="kd">var</span> <span class="nx">mapOptions</span> <span class="o">=</span> <span class="p">{</span>
                                <span class="na">center</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">),</span>
                                <span class="na">zoom</span><span class="p">:</span> <span class="mi">14</span>
                            <span class="p">}</span>
                            <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nb">Map</span><span class="p">(</span><span class="nx">mapDiv</span><span class="p">,</span> <span class="nx">mapOptions</span><span class="p">);</span>

<span class="c1">//////////////////////////////////////////////////////////////////////////////////////////</span>
                                <span class="kd">var</span> <span class="nx">position</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">);</span>

                                <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nb">Map</span><span class="p">(</span><span class="dl">'</span><span class="s1">map</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
                                    <span class="na">center</span><span class="p">:</span> <span class="nx">position</span><span class="p">,</span>
                                    <span class="na">zoom</span><span class="p">:</span> <span class="mi">14</span>
                                <span class="p">});</span>

                                <span class="kd">var</span> <span class="nx">markerOptions</span> <span class="o">=</span> <span class="p">{</span>
                                    <span class="na">position</span><span class="p">:</span> <span class="nx">position</span><span class="p">,</span>
                                    <span class="na">map</span><span class="p">:</span> <span class="nx">map</span><span class="p">,</span>
                                    <span class="na">icon</span><span class="p">:</span> <span class="p">{</span>
                                        <span class="na">content</span><span class="p">:</span> <span class="p">[</span>
                                        <span class="dl">'</span><span class="s1">&lt;img src="/img/sugar.jpg" style="position:absolute; top:2px; left:2px; width:32px; height:32px; object-fit:cover; object-position:center center; border-radius:50%; z-index:6"&gt;</span><span class="dl">'</span><span class="p">,</span>
                                        <span class="dl">'</span><span class="s1">&lt;img src="/map-pin-afterUser.svg" style="position;absolute; top:0; left:0; z-index:5"&gt;</span><span class="dl">'</span><span class="p">,</span>
                                        <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">),</span>

                                        <span class="na">anchor</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">26</span><span class="p">)</span>
                                    <span class="p">}</span>
                                <span class="p">};</span>
                                <span class="kd">var</span> <span class="nx">marker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Marker</span><span class="p">(</span><span class="nx">markerOptions</span><span class="p">);</span>                            




                            <span class="kd">var</span> <span class="nx">circle</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Circle</span><span class="p">({</span>
                                <span class="na">map</span><span class="p">:</span> <span class="nx">map</span><span class="p">,</span>
                                <span class="na">center</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">),</span>
                                <span class="na">radius</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
                                <span class="na">fillColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">red</span><span class="dl">'</span><span class="p">,</span>
                                <span class="na">fillOpacity</span><span class="p">:</span> <span class="mf">0.2</span>
                            <span class="p">});</span>
                            
 <span class="c1">//////////////////////////////////////////////////////////////////////////////</span>
                            
                            <span class="nx">data</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">it</span><span class="p">,</span> <span class="nx">index</span><span class="p">){</span>
                                <span class="kd">let</span> <span class="nx">dutyName</span> <span class="o">=</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyName</span><span class="p">;</span>
                                <span class="kd">let</span> <span class="nx">dutyAddr</span> <span class="o">=</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyAddr</span><span class="p">;</span>
                                <span class="kd">let</span> <span class="nx">dutyTel1</span> <span class="o">=</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTel1</span><span class="p">;</span>

                                <span class="kd">let</span> <span class="nx">dutyTime</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
                                <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime1s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime1c</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">월요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime1s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime1c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                <span class="p">}</span>

                                <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime2s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime2c</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">화요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime2s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime2c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                <span class="p">}</span>

                                <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime3s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime3c</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">수요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime3s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime3c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                <span class="p">}</span>

                                <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime4s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime4c</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">목요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime4s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime4c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                <span class="p">}</span>

                                <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime5s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime5c</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">금요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime5s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime5c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                <span class="p">}</span>

                                <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime6s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime6c</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">토요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime6s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime6c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                <span class="p">}</span>

                                <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime7s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime7c</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">일요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime7s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime7c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                <span class="p">}</span>

                                <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime8s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime8c</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">공휴일</span><span class="dl">"</span><span class="p">;</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime8s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime8c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                <span class="p">}</span>


                                <span class="kd">let</span> <span class="nx">pharmacy_location</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">wgs84Lat</span><span class="p">,</span> <span class="nx">it</span><span class="p">.</span><span class="nx">wgs84Lon</span><span class="p">)</span>

                                    <span class="kd">let</span> <span class="nx">marker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Marker</span><span class="p">({</span>
                                        <span class="na">map</span><span class="p">:</span> <span class="nx">map</span><span class="p">,</span>
                                        <span class="na">position</span><span class="p">:</span> <span class="nx">pharmacy_location</span>
                                    <span class="p">});</span>
                                
                                    <span class="kd">var</span> <span class="nx">contentString</span> <span class="o">=</span> <span class="p">[</span>
                                            <span class="dl">'</span><span class="s1">&lt;div class="iw_inner"&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">   &lt;h3&gt;</span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyName</span><span class="o">+</span><span class="dl">'</span><span class="s1">&lt;/h3&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">   &lt;p&gt;</span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyAddr</span><span class="o">+</span><span class="dl">'</span><span class="s1">&lt;br /&gt;</span><span class="dl">'</span><span class="p">,</span> 
                                            <span class="dl">'</span><span class="s1">       </span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyTel1</span><span class="o">+</span><span class="dl">'</span><span class="s1">&lt;br /&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">       </span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyTime</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">   &lt;/p&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">&lt;/div&gt;</span><span class="dl">'</span>
                                        <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
                                    
                                    <span class="kd">var</span> <span class="nx">infowindow</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">InfoWindow</span><span class="p">({</span>
                                        <span class="na">content</span><span class="p">:</span> <span class="nx">contentString</span><span class="p">,</span>
                                        <span class="na">maxWidth</span><span class="p">:</span> <span class="mi">440</span><span class="p">,</span>
                                        <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#eee</span><span class="dl">"</span><span class="p">,</span>
                                        <span class="na">borderColor</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#2db400</span><span class="dl">"</span><span class="p">,</span>
                                        <span class="na">borderWidth</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                                        <span class="na">anchorSize</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Size</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
                                        <span class="na">anchorSkew</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                                        <span class="na">anchorColor</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#eee</span><span class="dl">"</span><span class="p">,</span>
                                        <span class="na">pixelOffset</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="o">-</span><span class="mi">20</span><span class="p">)</span>
                                    <span class="p">});</span>
                                    
                                    <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Event</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="nx">marker</span><span class="p">,</span> <span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="k">if</span> <span class="p">(</span><span class="nx">infowindow</span><span class="p">.</span><span class="nx">getMap</span><span class="p">())</span> <span class="p">{</span>
                                            <span class="nx">infowindow</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
                                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                                            <span class="nx">infowindow</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">map</span><span class="p">,</span> <span class="nx">marker</span><span class="p">);</span>
                                        <span class="p">}</span>
                                    <span class="p">});</span>












                                    
                                    <span class="p">});</span>
    
                        <span class="p">},</span>
                        <span class="na">error</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
                            
                        <span class="p">}</span>
                    <span class="p">});</span>


                <span class="p">});</span>


            <span class="p">});</span>

            <span class="c1">// geolocation은 gps와 관련된 객체, 이 객체가 존재하면 getLocation 실행함</span>
            <span class="c1">// getCurrentPosition 사용시 현재 위치를 알 수 있다, position 이라는 객체를 통해 현 위치 파악</span>
            <span class="k">async</span> <span class="kd">function</span> <span class="nx">getLocation</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>
                <span class="k">if</span><span class="p">(</span><span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">)</span> <span class="p">{</span>

                    
                    <span class="kd">let</span> <span class="nx">promise</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">rejected</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                        <span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">.</span><span class="nx">getCurrentPosition</span><span class="p">((</span><span class="nx">position</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                            <span class="nx">resolve</span><span class="p">(</span><span class="nx">position</span><span class="p">);</span>
                        <span class="p">});</span>
                    <span class="p">});</span>

                    <span class="kd">let</span> <span class="nx">position</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">promise</span><span class="p">;</span>

                    <span class="c1">//위도 position.coords.latitude </span>
                    <span class="c1">//경도 position.coords.longitude </span>
                    <span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">latitude</span>
                    <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">longitude</span>
  
                <span class="p">}</span>
                <span class="k">return</span> <span class="nx">XY</span><span class="p">;</span>     
            <span class="p">}</span>        
        <span class="nt">&lt;/script&gt;</span>    
<span class="nt">&lt;/html&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br />
<br /></p>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br /></p>

<p>아래 사진을 클릭하면 <code class="language-plaintext highlighter-rouge">제 취미공간</code>으로 이어집니다 ㅎㅎ 여기에서 메모 및 일상을 기록하는데 놀러오실 분들은 언제나 환영합니다!</p>

<p><br /></p>

<h1 id="링크로-이동하려면-사진을-클릭">링크로 이동하려면 사진을 클릭</h1>

<p><a href="https://discord.com/channels/976352361142452234/976352361142452239"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQk-zPB4TCuWRNJVIF0aWgniDPNJgUTdXmILg&amp;usqp=CAU" alt="어서오셔 ㅎ" /></a></p>

<hr />
<h1 id="참고">참고</h1>
<hr />
<p>‘소스놀이터’        <a href="https://www.youtube.com/watch?v=FKQxItpstIk&amp;t=1245s">Node.Js로 네이버 약국 지도 만들기 #2 (express &amp; axios 모듈, 비동기 문제 해결)</a>      30:12 ~</p>

<p><br /></p>

<p>‘소스놀이터’        <a href="https://www.youtube.com/watch?v=XC8vBN_WhYs">Node.Js로 네이버 약국 지도 만들기 #3 (LAST) (data.go.kr 오픈 API)</a>     </p>

<p><br /></p>

<p>http://expressjs.com/ko/starter/static-files.html</p>

<p><br />
 <br />
 <br />
 <br />
 <br />
 <br /></p>

<hr />
<h1 id="도와주신-분들">도와주신 분들</h1>
<hr />

<p>‘뀰’ - https://github.com/devlaq</p>

<p><br /></p>

<p><code class="language-plaintext highlighter-rouge">유튜브</code> - 소스놀이터</p>

<p><br /></p>

<p><code class="language-plaintext highlighter-rouge">오중호랑이</code> - https://ojtiger.com/</p>]]></content><author><name></name></author><category term="developer-tools" /><category term="api" /><category term="Node.js" /><category term="api" /><category term="nodejs" /><summary type="html"><![CDATA[]]></summary></entry><entry><title type="html">Node.js &amp;amp; 네이버지도로 내 근처 약국들 찾기 1</title><link href="https://joonhwan2.github.io/posts/pharmacy-searching-with-navermap-api/" rel="alternate" type="text/html" title="Node.js &amp;amp; 네이버지도로 내 근처 약국들 찾기 1" /><published>2022-09-07T00:00:00+09:00</published><updated>2022-09-13T16:39:26+09:00</updated><id>https://joonhwan2.github.io/posts/pharmacy-searching-with-navermap-api</id><content type="html" xml:base="https://joonhwan2.github.io/posts/pharmacy-searching-with-navermap-api/"><![CDATA[<p><br />
<br />
<br /></p>

<p>‘소스놀이터’님의 유튜브영상을 보고 이렇게 좋은 작업물을 완성할 수 있었습니다.<br />
양질의 자료를 제공해주신 ‘소스놀이터’님께 다시한번 감사의 말씀을 드립니다.</p>
<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />vscode 설치</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />nodejs 설치완료</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />nodejs 환경변수 설정</li>
</ul>

<p><br />
이 3가지가 완료되어있다는 가정하에 시작하겠습니다.
<br /></p>

<p><br />
<br />
<br /></p>

<hr />
<h1 id="1--폴더-만들기-네이버api-가입-공공데이터-포털">1   폴더 만들기, 네이버api 가입, 공공데이터 포털</h1>
<hr />

<h3 id="1-1--로컬디스크c에--미리-nodejs_pharmacy-폴더-만들어-놓기">1-1   로컬디스크C에  미리 <code class="language-plaintext highlighter-rouge">nodejs_pharmacy 폴더</code> 만들어 놓기</h3>

<p><br /></p>

<p>미리 로컬디스크C에 nodejs_pharmacy 폴더를 만들어 놓은 후<br />
이제 cmd로 들어갑시다, C:\Users\rhwns&gt; 이경로가 나와서   <code class="language-plaintext highlighter-rouge">cd ..</code> 을 2번 입력해줍시다  그러면 경로 하나씩 지워지면서<br />
C:/&gt; 이쪽으로 경로가 바뀝니다 이제 여기서 cd nodejs_pharmacy 입력 ㄱㄱ
<br />
<br /></p>

<p>이제 cmd나 vscode를 열어 C:\nodejs_pharmacy&gt; 이 경로에서 아래 문장 입력</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="go">npm init
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p><br /></p>

<p><img src="/assets/img/error/npm/1.PNG" alt="Desktop View" /></p>

<p><br /></p>

<p>이렇게 나옵니다 근데 당황하진 맙시다! 왜냐하면 우린 고칠 수 있으니까!</p>
<h3 id="오류를-고치기-위해-이걸-클릭"><a href="https://joonhwan2.github.io/posts/npm-init-error/">오류를 고치기 위해 이걸 클릭</a></h3>

<p><br />
<br /></p>

<p>자 오류를 해결했으면 이 경로에서 C:\nodejs_pharmacy&gt; 이어서 입력합시다</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="go">npm init
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p>이거 입력하면
어떤 항목들이 나오는데 쭉 엔터하다가 마지막에<br />
<code class="language-plaintext highlighter-rouge">is this OK? (yes)</code> 라는 문장이 나오는데 여기서 y입력을 하고 엔터누르면 <code class="language-plaintext highlighter-rouge">package.json</code>이 생성됩니다.<br />
저 파일을 들어가보면 버젼은 어떻고 메인으로 index.js 파일을 써라 등 기본정보가 나와있습니다.</p>

<p>이제 이어서</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="go">npm install express
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p>입력 후 잘 설치가되었다면 현재 경로에 <code class="language-plaintext highlighter-rouge">폴더 node_modules</code> 그리고 <code class="language-plaintext highlighter-rouge">package-lock.json</code>이 생성되어 있을 것입니다.
<br />
<br />
<br />
<br />
<br /></p>

<p>이제 <code class="language-plaintext highlighter-rouge">index.js</code> 파일을 만들어줍시다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">);</span>                           <span class="c1">// 1</span>
<span class="kd">let</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span> <span class="p">();</span>                                       <span class="c1">// 2</span>
<span class="kd">let</span> <span class="nx">port</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">80</span><span class="p">;</span>                <span class="c1">// 포트 80 변수 선언</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="dl">"</span><span class="s2">public_html</span><span class="dl">"</span><span class="p">));</span>                     <span class="c1">// 3</span>


<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span>                                  <span class="c1">//4</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">HTML 서버 시작됨</span><span class="dl">"</span><span class="p">)</span>
<span class="p">})</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>1)   express모듈을 선언   +   어떤 모듈을 쓸건지 require로 지정   =    이제 이 구문을 통해 express모듈이 사용 가능한 상태가 됨
2)   app 이라는 변수 하나를 더 선언하여 express객체를 할당하자     이제 이 구문을 통해 app이라는 변수는 express 모듈을 가르키게 됨
3)   express의 use 메소드를 선언하고 express.static이라고 괄호 사이에 입력한 후  public_html 로 지정하겠다<br />
  이제 public_html 폴더 아래에 있는 모든 파일들은 app.use 즉 express 모듈의 웹서버가 구동되게함
4) express 서비스가 작동될 포트 지정 보통 80번 많이씀 그리고 포트 열렸는지 확인해주기위해 콘솔을 적음<br />
app.listen에 port를 사용해주고 이건 사용되기 이전에 선언되야 하니 위에 포트 80변수를 선언해주자</p>

<p><br />
★ 사실 nodejs heroku를 작동시킬때 <code class="language-plaintext highlighter-rouge">process.env.PORT || 80;</code> 이 포트환경설정 문구가 있으면 헤로쿠에서도 작동이 잘된다.<br />
console.log 추가후 잘 작동되는지 확인해봅시다</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">node</span> <span class="nx">index</span><span class="p">.</span><span class="nx">js</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>입력합시다, 잘 나온다면 아래와 같은 사진처럼 나올겁니다.</p>

<p><img src="/assets/img/api/naver-map-api-pharmacy/1.PNG" alt="Desktop View" /></p>

<p><br />
<br /></p>

<p>이를 통해 정상적으로 app.listen이 진행되어 80번 포트가 열려있고 html서버가 express모듈을 통해 실행되면서<br />
80번 포트를 통해 제공되는걸 알 수 있습니다.</p>

<p><br />
<br />
<br /></p>

<p>app.use에 적었던 것과 같이 이제 같은 경로에 <code class="language-plaintext highlighter-rouge">public_html 폴더</code> 만들어줍시다, 그 폴더 안에 있는 내용이 웹서버로 서비스됨.<br />
vscode에서 ctr + n 눌러 새로운 파일을 생성후 ctr + s 눌러서 public_html 안에 index.html로 저장해주고 index.html에 <code class="language-plaintext highlighter-rouge">ㅎㅇ루</code> 입력한 뒤<br />
주소창에 localhost 쳐봅시다.</p>

<p><br />
<br />
<br />
<br /></p>

<p><img src="/assets/img/api/naver-map-api-pharmacy/2.PNG" alt="Desktop View" /></p>

<p><br /></p>

<p>위의 화면처럼 안나오고 혹시 아래 화면과 같이 나온다면
<br />
<br />
<br />
<br />
<br />
<br /></p>

<p><img src="/assets/img/api/naver-map-api-pharmacy/3.PNG" alt="Desktop View" /></p>

<p><br />
<br /></p>

<p>또잉?     이유는 아래사진을 보면 나옵니다</p>

<p><br />
<br />
<br /></p>

<p><img src="/assets/img/api/naver-map-api-pharmacy/4.PNG" alt="Desktop View" /></p>

<p><br />
<br />
<br />
<br /></p>

<p>그건 <code class="language-plaintext highlighter-rouge">node index.js</code>가 꺼져있기 때문에 다시 틀어주면 됩니다!<br />
편한 방법으로 vscode 터미널에서 화살표 방향 윗키 누르면 그 명령어 다시 불러옵니다.<br />
이제 그러고 다시 주소창에 localhost  친곳에서 강력한 새로고침 (ctr + shirt + r) 누르면 홈페이에 <code class="language-plaintext highlighter-rouge">ㅎㅇ루</code> 나올겁니다.</p>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br /></p>

<h3 id="1-2--네이버-지도-api-불러오기">1-2   네이버 지도 api 불러오기</h3>

<p><br />
<br /></p>

<p>ncloud.com -&gt; 회원가입 –&gt; 로그인 –&gt; 우측상단 콘솔
검색 –&gt; naver api –&gt; 이렇게 나온다 aiㆍnaver api –&gt; application
–&gt; application 등록 –&gt; 약국찾기인 경우 Maps 선택</p>

<blockquote>
  <p>다 선택해도 상관없는데 저의 경우는 나머지는 체크 해제하고 이거 3개만 체크하였습니다.</p>
  <ul>
    <li>Web dynamic Map   (웹페이지에 지도를 띄우기 위함)</li>
    <li>geocoding   (위도 경로 좌표를 주소로 변환)</li>
    <li>Reverse Geocoding  (주소를 위도 경로로 변환)</li>
  </ul>
</blockquote>

<p><img src="/assets/img/api/naver-map-api-pharmacy/5.PNG" alt="Desktop View" /></p>

<p><br /></p>

<p>인증정보🔑 옆에있는 <code class="language-plaintext highlighter-rouge">수정</code> 클릭하면 아래와 같은 사진이 보일겁니다.
<br /></p>

<p>★참고 <code class="language-plaintext highlighter-rouge">인증정보🔑</code> 이거 나중에 필요합니다. 클릭하여 안에 들어가보면<br />
client id, client secret 값이 나오는데 네이버 지도를 띄울때 사용됩니다.</p>

<p><br />
<br />
<br /></p>

<p><img src="/assets/img/api/naver-map-api-pharmacy/6.PNG" alt="Desktop View" /></p>

<p><br />
<br />
<br />
<br />
<br />
<br /></p>

<p>URL란에 추가 -&gt; 등록      http://localhost</p>

<p><br />
<br />
<br />
<br />
<br /></p>

<p>이제 지도를 불러옵시다, 2가지방법중 아무거나</p>
<ol>
  <li>검색 -&gt; 네이버 지도 예제</li>
  <li>https://navermaps.github.io/maps.js/docs/tutorial-digest.example.html</li>
</ol>

<p><br /></p>

<p><code class="language-plaintext highlighter-rouge">지도 기본 예제</code> 클릭후 아래로 내리면 이런 코드가 보일겁니다</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="c1">//지도를 삽입할 HTML 요소 또는 HTML 요소의 id를 지정합니다.</span>
<span class="kd">var</span> <span class="nx">mapDiv</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">map</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// 'map'으로 선언해도 동일</span>

<span class="c1">//옵션 없이 지도 객체를 생성하면 서울 시청을 중심으로 하는 16 레벨의 지도가 생성됩니다.</span>
<span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nb">Map</span><span class="p">(</span><span class="nx">mapDiv</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>html요소의 id를 넣어주면 그 id를 기반으로 네이버 지도 api가 작동한다는 내용이다.</p>

<p><br />
<br />
<br /></p>

<p>이제 index.html로 가서 내용을 수정합시다.<br />
head태그 - 디자인적인 부분은 아니지만 상단에 정의되야할 부분을 미리 정의해줌   
ex) 제목, CSS부분, script(자바스크립트 부분) 등<br />
<br />
body태그 - 실제 본문</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;script </span><span class="na">type =</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"주소"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
        <span class="nt">&lt;body&gt;</span>

        <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br /></p>

<p>자 이제 주소를 찾기 위해 아까 열었던 <code class="language-plaintext highlighter-rouge">지도 기본 예제</code>로 갑시다 
<br />
<br />
<br />
<br />
<br /></p>

<p><img src="/assets/img/api/naver-map-api-pharmacy/7.PNG" alt="Desktop View" /></p>

<p><br />
<br /></p>

<p>지도 기본 예제의 흰공간 –&gt; 우클릭으로 페이지소스 보기 –&gt; ctr f 로 script 검색 후 open api 내용 한줄 쭉 복사후<br />
기존 &lt;script type 부분을 없앤 후 index.html에 붙여넣기합시다</p>

<p><img src="/assets/img/api/naver-map-api-pharmacy/8.PNG" alt="Desktop View" /></p>

<p><br />
<br />
그럼 아래사진처럼 됩니다</p>

<p><img src="/assets/img/api/naver-map-api-pharmacy/9.PNG" alt="Desktop View" /></p>

<p>id는 아까 <code class="language-plaintext highlighter-rouge">인증정보🔑</code> 이거 있던곳에서 저걸 클릭하여 아이디 복붙해서 바꿔주면되고<br />
submodule은 geocoder만 남겨놓으면 됩니다 geocoder는 <code class="language-plaintext highlighter-rouge">주소 -&gt;좌표</code>, <code class="language-plaintext highlighter-rouge">좌표 -&gt; 주소</code> 를 바꿔주는 기능을 하기때문에 꼭 필요합니다<br />
여기까지 코드는 이렇게 됩니다.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=보안을 위해 제 아이디 입력 안함&amp;amp;submodules=geocoder"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
        <span class="nt">&lt;body&gt;</span>

        <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>이제 편의성을 위해 jquery cdn을 사용하겠습니다.<br />
구글검색 -&gt; jquery cdn</p>

<p><br />
<br />
<br /></p>

<p><img src="/assets/img/api/naver-map-api-pharmacy/10.PNG" alt="Desktop View" /></p>

<p><br />
<br />
<br />
<br />
<br />
<br /></p>

<p>2022.09.08 기준으로 제일 최신버젼인 3.x를 사용합시다 그리고 <code class="language-plaintext highlighter-rouge">minified</code> 클릭하면 <script> 코드들이 나오는데 싹 다 복사하여 &lt;script type -- 바로 아래에 붙여줍시다 하게된다면 코드는 이렇게 됩니다</script></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre> <span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=보안을 위해 제 아이디 입력 안함&amp;amp;submodules=geocoder"</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://code.jquery.com/jquery-3.6.1.min.js"</span> <span class="na">integrity=</span><span class="s">"sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="</span><span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
        <span class="nt">&lt;body&gt;</span>

        <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>                                                                                           
</pre></td></tr></tbody></table></code></pre></div></div>
<p><br />
 <br />
 <br />
 <br />
 <br />
 <br /></p>

<p>이제 <code class="language-plaintext highlighter-rouge">naver map api</code> 그리고 그 아래줄에 <code class="language-plaintext highlighter-rouge">제이쿼리</code>도 활성화 됩니다. 이제 디자인적 요소를 넣기위해 body태그 안에 div객체를 만듭시다,<br />
이 div객체가 <code class="language-plaintext highlighter-rouge">네이버지도</code>가 들어올 곳입니다.</p>

<ul>
  <li>우선 div 객체의 id에 map으로 설정하겠습니다 스타일은 폭 100% 너비 80%</li>
  <li>그위에 div객체 하나 더 생성해 <code class="language-plaintext highlighter-rouge">약국지도💊</code> 입력 후 스타일 지정해줍시다 <code class="language-plaintext highlighter-rouge">상단여백 20픽셀</code>, <code class="language-plaintext highlighter-rouge">하단여백 10픽셀</code>, <code class="language-plaintext highlighter-rouge">글자 굵게 보이기</code></li>
  <li>body 태그 안에 script 구문 추가 document가 ready상태일때 function(기능)을 하기위해 코드를 넣어야하는데<br />
그건 아까 <code class="language-plaintext highlighter-rouge">지도 기본 예제</code>에 있던 코드 복사하면 된다.</li>
</ul>

<p><br />
<br />
<br /></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;head&gt;</span>     
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=보안을 위해 제 아이디 입력안함&amp;amp;submodules=geocoder"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://code.jquery.com/jquery-3.6.1.min.js"</span> <span class="na">integrity=</span><span class="s">"sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="</span> <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/head&gt;</span>    
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"margin-top: 20px; margin-bottom: 10px; font-weight: bold;"</span><span class="nt">&gt;</span>
            약국 지도💊
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"map"</span> <span class="na">style=</span><span class="s">"width:100%; height:80%"</span><span class="nt">&gt;</span>

        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;script&gt;</span>
            <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
                <span class="c1">//지도를 삽입할 HTML 요소 또는 HTML 요소의 id를 지정합니다.</span>
                <span class="kd">var</span> <span class="nx">mapDiv</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">map</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// 'map'으로 선언해도 동일</span>

                <span class="c1">//옵션 없이 지도 객체를 생성하면 서울 시청을 중심으로 하는 16 레벨의 지도가 생성됩니다.</span>
                <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nb">Map</span><span class="p">(</span><span class="nx">mapDiv</span><span class="p">);</span>
            <span class="p">});</span>
        <span class="nt">&lt;/script&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br />
<br /></p>

<p>이제 다시 그 localhost 홈페이지로 가서 ctr + shift + r (강력 새로고침)하면 아래처럼 지도가 빰!</p>

<p><br />
<br />
<br />
<br /></p>

<p><img src="/assets/img/api/naver-map-api-pharmacy/11.PNG" alt="Desktop View" /></p>

<p><br />
<br />
<br /></p>

<p><del>문제가 하나 있는데 접속한 사람의 위치에 따른 지도가 떠야하는 것이다</del>, 위도와 경도정보를 등록합시다
<br />
<br />
1) 이제 function을 하나 만들어봅시다 이름은 getLocation으로, 사용할 객체는 navigator.geolocation (gps 관련 객체)</p>

<p>2) navigator.geolocation.getCurrentPosition 이걸 사용하면 현재 위치를 알 수 있습니다, 그 인자로<br />
function을 적고 position 이라는 객체를 통해 현 위치를 알 수 있습니다.</p>

<p>3) getLocation은 위도, 경도 2개를 반환해야하기 때문에 미리 객체를 만들어줍시다<br />
let XY로 XY변수를 Object형으로 선언해줍시다.<br />
그리고 XY.lat, XY.lng 옵션에 각각 위도, 경도값 저장해줍시다.</p>

<p>4) 아래엔 XY를 return해줍시다 = 현재위치의 XY좌표(위도, 경도) 반환
<br />
★참고 <code class="language-plaintext highlighter-rouge">getCurrentPosition</code> 이게 비동기형이라 이대로 하면 문제가 됨 즉 동기형으로 바꾸어주어야 한다</p>

<p>5) 일단 잘 작동되는지 확인하기위해 getLocation을 실행하고 거기서 return된 값을 XY로 받아 alert로 경도,위도값 띄워봅시다</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre></td><td class="rouge-code"><pre><span class="o">&lt;</span><span class="sr">/body</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
            <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
                <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="nx">getLocation</span><span class="p">();</span>                 <span class="c1">// 5</span>
                <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">위도</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">);</span>
                <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">경도</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">);</span>
                <span class="c1">//지도를 삽입할 HTML 요소 또는 HTML 요소의 id를 지정합니다.</span>
                <span class="kd">var</span> <span class="nx">mapDiv</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">map</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// 'map'으로 선언해도 동일</span>

                <span class="c1">//옵션 없이 지도 객체를 생성하면 서울 시청을 중심으로 하는 16 레벨의 지도가 생성됩니다.</span>
                <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nb">Map</span><span class="p">(</span><span class="nx">mapDiv</span><span class="p">);</span>
            <span class="p">});</span>
            
            <span class="kd">function</span> <span class="nx">getLocation</span><span class="p">()</span> <span class="p">{</span>                            <span class="c1">// 1</span>
                <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>           <span class="c1">// 3-1</span>
                <span class="k">if</span><span class="p">(</span><span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">)</span> <span class="p">{</span>                      <span class="c1">// 2</span>
                    <span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">.</span><span class="nx">getCurrentPosition</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">position</span><span class="p">){</span>
                        <span class="c1">//위도 position.coords.latitude</span>
                        <span class="c1">//경도 position.coords.longitude</span>
                        <span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">latitude</span><span class="p">;</span>           <span class="c1">// 3-2</span>
                        <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">longitude</span><span class="p">;</span>
                    <span class="p">});</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="nx">XY</span><span class="p">;</span>              <span class="c1">// 4</span>
            <span class="p">}</span>
        <span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br />
<br /></p>

<p>자 이상태로 바로 localhost 보면 안 나올수도 있기때문에 vscode 종료하고 localhost홈페이지도 끄고 둘다 다시 재실행시킵시다.<br />
그러면 아래와 같은 사진과 함께 이 2문구가 나올겁니다, <code class="language-plaintext highlighter-rouge">위도 undefined</code>   <code class="language-plaintext highlighter-rouge">경도 undefined</code>
<br /></p>

<p><img src="/assets/img/api/naver-map-api-pharmacy/12.png" alt="Desktop View" />
지도가 잘 나오지않는데 그 이유는 그 이유는 아까 말씀드린대로 <code class="language-plaintext highlighter-rouge">getCurrentPosition</code>가 비동기형이기때문입니다<br />
이제 동기형으로 바꿔주기위해 코드를 수정합시다</p>

<p>기존 alert 2줄 위치를 XY.lat, XY.lng 아래로 옮긴 후 확인해보면 위도, 경도와 함께 지도가 잘 나옵니다</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre></td><td class="rouge-code"><pre>        <span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
            <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
                <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="nx">getLocation</span><span class="p">();</span>

                <span class="c1">//지도를 삽입할 HTML 요소 또는 HTML 요소의 id를 지정합니다.</span>
                <span class="kd">var</span> <span class="nx">mapDiv</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">map</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// 'map'으로 선언해도 동일</span>

                <span class="c1">//옵션 없이 지도 객체를 생성하면 서울 시청을 중심으로 하는 16 레벨의 지도가 생성됩니다.</span>
                <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nb">Map</span><span class="p">(</span><span class="nx">mapDiv</span><span class="p">);</span>
            <span class="p">});</span>
            
            <span class="kd">function</span> <span class="nx">getLocation</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>
                <span class="k">if</span><span class="p">(</span><span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">.</span><span class="nx">getCurrentPosition</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">position</span><span class="p">){</span>
                        <span class="c1">//위도 position.coords.latitude</span>
                        <span class="c1">//경도 position.coords.longitude</span>
                        <span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">latitude</span><span class="p">;</span>
                        <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">longitude</span><span class="p">;</span>
                        <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">위도</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">);</span>
                        <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">경도</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">);</span>
                    <span class="p">});</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="nx">XY</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p>자, <code class="language-plaintext highlighter-rouge">function getLocation() {</code>       여기부터는 비동기입니다 getLocation이 비동기이기 때문에,<br />
무슨 말이냐면 if 구문안의 식이 진행되다가 밑의 alert까지 읽기 전에 XY.lat에서 값을 return 할 수도 있다는 얘기입니다.
<br /></p>

<p>ex) 휴대폰으로 햄버거세트를 10개 주문하여 주문프로그램에서 그걸 인지하고 그 주문정보를 나에게 다시 반환해주었는데<br />
정작 나의 주문량은 7개로 되어있음</p>

<p><br />
<br /></p>

<h3 id="비동기형---동기형전환">비동기형 -&gt; 동기형   (전환)</h3>
<p>1) <code class="language-plaintext highlighter-rouge">function getLocation() {</code>    앞에 async를 넣음으로써 이 function 안에 비동기구문이 있다고 표시</p>

<p>2) <code class="language-plaintext highlighter-rouge">getCurrentPosition</code>을 promise 객체를 통해 재정의</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>
<span class="k">if</span><span class="p">(</span><span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">)</span> <span class="p">{</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>이곳 바로 아래에 추가</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>            <span class="kd">let</span> <span class="nx">promise</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">rejected</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                        <span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">.</span><span class="nx">getCurrentPosition</span><span class="p">((</span><span class="nx">position</span><span class="p">)</span> <span class="o">=&gt;</span><span class="p">{</span>
                            
                        <span class="p">});</span>
                    <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">=&gt;</code>는 function으로 지정한 부분과 같은 역할을 수행, 그리고 <code class="language-plaintext highlighter-rouge">getCurrentPosition</code>이 실행될 때<br />
resolve를 적고 그 인자로 position을 적으면 <code class="language-plaintext highlighter-rouge">getCurrentPosition</code>을 Promise로 감싸고 또 성공했을 때<br />
position 객체를 반환하며 실패하면 rejected</p>

<p>3) 아래에 이어서 position 변수 생성하고 선언한 후 await 합시다<br />
Promise 변수는 getCurrentPosition을 가리키며 await(끝날때까지 기다림)해줍니다.<br />
비동기가 끝나고 나면 이 position 변수에 그 값이 들어와 동기형태를 띄게됨</p>

<p>4) <code class="language-plaintext highlighter-rouge">let position = await promise;</code>여기서 navigator.geolocation이 한줄없애고 맨 밑의 alert 2문장을 잠시 다른데 보관 그 후, <br />
실행해주면 getLocaiton function이 동기식으로 변형됨<br />
= 현재의 위치를 받은 후, 동기식으로 마지막에 XY좌표값이 return됨</p>

<p>5) 이 코드 아래에 아까 그 alert 두 문장 옮깁시다</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="s2">`let XY = getLocation();  
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>6) 그리고 이제 이 <code class="language-plaintext highlighter-rouge">getLocation 호출하는 이 function코드</code>에도 async를 넣어주고,<br />
getLocation을 실행할때 await을 하나 더 넣어줍시다</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>                <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
                    <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="nx">getLocation</span><span class="p">();</span>
<span class="o">---</span>
<span class="o">---</span>                    
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>—&gt;</p>

<p><br /></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>                <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="k">async</span> <span class="kd">function</span><span class="p">(){</span>
                    <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getLocation</span><span class="p">();</span>
<span class="o">---</span>
<span class="o">---</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br />
<br /></p>

<p>여기 까지의 코드는 이렇습니다</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre></td><td class="rouge-code"><pre>            <span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
                <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="k">async</span> <span class="kd">function</span><span class="p">(){</span>
                    <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getLocation</span><span class="p">();</span>

                    <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">위도</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">);</span>
                    <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">경도</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">);</span>

                    <span class="c1">//지도를 삽입할 HTML 요소 또는 HTML 요소의 id를 지정합니다.</span>
                    <span class="kd">var</span> <span class="nx">mapDiv</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">map</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// 'map'으로 선언해도 동일</span>

                    <span class="c1">//옵션 없이 지도 객체를 생성하면 서울 시청을 중심으로 하는 16 레벨의 지도가 생성됩니다.</span>
                    <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nb">Map</span><span class="p">(</span><span class="nx">mapDiv</span><span class="p">);</span>
                <span class="p">});</span>
                
                <span class="k">async</span>  <span class="kd">function</span> <span class="nx">getLocation</span><span class="p">()</span> <span class="p">{</span>
                    <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>
                    <span class="k">if</span><span class="p">(</span><span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">)</span> <span class="p">{</span>

                        <span class="kd">let</span> <span class="nx">promise</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">rejected</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                            <span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">.</span><span class="nx">getCurrentPosition</span><span class="p">((</span><span class="nx">position</span><span class="p">)</span> <span class="o">=&gt;</span><span class="p">{</span>
                                <span class="nx">resolve</span><span class="p">(</span><span class="nx">position</span><span class="p">);</span>
                            <span class="p">});</span>
                        <span class="p">});</span>

                        <span class="kd">let</span> <span class="nx">position</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">promise</span><span class="p">;</span>
                        
                        <span class="c1">//위도 position.coords.latitude</span>
                        <span class="c1">//경도 position.coords.longitude</span>
                        <span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">latitude</span><span class="p">;</span>
                        <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">longitude</span><span class="p">;</span>
                           
                    <span class="p">}</span>
                    <span class="k">return</span> <span class="nx">XY</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p>이제 실행해보면 위도, 경도 값 및 네이버지도가 동기식으로 바뀌어 잘 나온다는 것을 알 수 있습니다.</p>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br /></p>

<h3 id="1-3--공공데이터-사용">1-3   공공데이터 사용</h3>

<p><br /></p>

<p>주소창에 <a href="https://www.data.go.kr/">data.go.kr</a> –&gt; 로그인 –&gt; 검색 : <code class="language-plaintext highlighter-rouge">국립중앙의료원_전국 약국 정보 조회 서비스</code> –&gt; 신청\</p>

<p><br />
이제 마이페이지에서 약국서비스를 선택한 후 조금 내려오면</p>

<p><img src="/assets/img/api/naver-map-api-pharmacy/13.png" alt="Desktop View" /></p>

<p><br />
확인 -&gt; 미리보기 -&gt; 주소창 복사하여 일단 index.js에 아무곳에나 주석처리하여 보관
https://apis.data.go.kr/B552657/ErmctInsttInfoInqireService/getParmacyListInfoInqire?serviceKey=mL6hpE93V2cGEHnZNYbp2kbpZIm2IFyc9rhdh2wIaUseyjghN%2FlJSV7tSchmbL47mZsX8gNcLVtGpsTxQkstdA%3D%3D&amp;Q0=%EC%84%9C%EC%9A%B8%ED%8A%B9%EB%B3%84%EC%8B%9C&amp;Q1=%EA%B0%95%EB%82%A8%EA%B5%AC&amp;QT=1&amp;QN=%EC%82%BC%EC%84%B1%EC%95%BD%EA%B5%AD&amp;ORD=NAME&amp;pageNo=1&amp;numOfRows=10</p>

<p><br />
<br /></p>

<p>이제 index.js 로 가보면 app.use를 통해 웹 서버를 열은 것을 알 수 있는데,<br />
한 페이지만 따로 app.get을 사용하여 열어봅시다, 열기위해 사용할 페이지 이름은 pharmach_list<br />
이제 “/pharmach_list” 이 경로로 접속하는 사용자들에게 자료제공 가능</p>

<p><br />
<br />
<br /></p>

<blockquote>
  <ul>
    <li>참고</li>
    <li><code class="language-plaintext highlighter-rouge">res(response)</code> : node.js에서 클라이언트들에게 데이터를 보냄</li>
    <li><code class="language-plaintext highlighter-rouge">req(requests)</code> : 사용자로부터 전달받는 내용</li>
  </ul>
</blockquote>

<p><br />
<br />
<br /></p>

<p>이제 아래에 <code class="language-plaintext highlighter-rouge">api</code>라는 변수를 선언허</p>
<ul>
  <li>참고 api.get 역시 비동기식이라 async 입혀줍시다<br />
api로 작동시킬 모듈은 <code class="language-plaintext highlighter-rouge">axios</code>, get메소드를 통해 웹상의 정보를 가져옴
<br /></li>
</ul>

<p>아까 주석처리해놓은 주소를 https -&gt; http로 바꾸어 ?앞까지만 복사하여 붙입시다<br />
?뒤의 것들은 params라는 변수로 받읍시다 콤마하고 한칸 띄워서 붙이면됩니다,<br />
그리고 params는 하나가 아니라 여러개니 대괄호 처리해줍시다</p>

<p><br /></p>

<p>넣을 항목들</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">"serviceKey": ""</code>       ““안에는 serviceKey= 여기 값부터 &amp;QO앞까지만 복사하여 넣으면됩니다 그리고 콤마,</li>
  <li>Q0 (2번째인자)        이곳에 넣을 정보로는 공공데이터포털 -&gt; 마이페이지 -&gt; 약국목록정보 조회 확인 클릭</li>
  <li>Q1      Q0과 같은방법으로</li>
  <li>–</li>
  <li>–</li>
</ul>

<p>그리고 없어도 되는 값은 넣지 않았습니다.      여기까지의 코드는 아래와 같습니다</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/pharmach_list</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">api</span> <span class="o">=</span> <span class="k">async</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">http://apis.data.go.kr/B552657/ErmctInsttInfoInqireService/getParmacyListInfoInqire</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
                <span class="dl">"</span><span class="s2">serviceKey</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">mL6hpE93V2cGEHnZNYbp2kbpZIm2IFyc9rhdh2wIaUseyjghN%2FlJSV7tSchmbL47mZsX8gNcLVtGpsTxQkstdA%3D%3D</span><span class="dl">"</span><span class="p">,</span>
                <span class="dl">"</span><span class="s2">Q0</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">서울특별시</span><span class="dl">"</span><span class="p">,</span>
                <span class="dl">"</span><span class="s2">Q1</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">강남구</span><span class="dl">"</span><span class="p">,</span>
                <span class="dl">"</span><span class="s2">QT</span><span class="dl">"</span><span class="p">:</span><span class="dl">""</span><span class="p">,</span>
                <span class="dl">"</span><span class="s2">QN</span><span class="dl">"</span><span class="p">:</span><span class="dl">""</span><span class="p">,</span>
                <span class="dl">"</span><span class="s2">ORD</span><span class="dl">"</span><span class="p">:</span><span class="dl">""</span><span class="p">,</span>
                <span class="dl">"</span><span class="s2">pageNo</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span>             <span class="c1">//페이지 한개에만 보겠다는 뜻</span>
                <span class="dl">"</span><span class="s2">numOfRows</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">1000</span><span class="dl">"</span><span class="p">,</span>       <span class="c1">// 보일 목록건수 1000개</span>
            <span class="p">}</span>
        <span class="p">})</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>근데 axios.get 역시 비동기형태이기 때문에 동기형으로 바꾸어줍시다<br />
awiat를 적어주고 그 결과값을 response라는 변수로 받읍시다, 그걸 위해 그 이전에 response 변수 선언해줍시다<br />
초기값 null로 설정후 나중에 아래와같은 데이터로 받게됩니다. 그리고 마지막을<code class="language-plaintext highlighter-rouge">return response</code>로<br />
response 객체를 반환합니다. 그럼 이제 pharmach_list로 들어왔을 때<br />
이 api결과<code class="language-plaintext highlighter-rouge">(serviceKey, return response 등)</code>가 출력됨</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/pharmach_list</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">response</span> <span class="o">=</span> <span class="kc">null</span>
    <span class="kd">let</span> <span class="nx">api</span> <span class="o">=</span> <span class="k">async</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">http://apis.data.go.kr/B552657/ErmctInsttInfoInqireService/getParmacyListInfoInqire</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
<span class="o">---</span>
<span class="o">---</span>
<span class="o">---</span>
    <span class="k">return</span> <span class="nx">response</span><span class="p">;</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>그리고 위에 axios 모듈을 추가해줍시다.</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br />
<br />
<br />
<br />
<br /></p>

<p>잠시 점검! index.js의 여기까지의 코드는 이렇습니다</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">);</span>  
<span class="kd">let</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span> <span class="p">();</span>                                       
<span class="kd">let</span> <span class="nx">port</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">80</span><span class="p">;</span>                
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="dl">"</span><span class="s2">public_html</span><span class="dl">"</span><span class="p">));</span>                     


<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span>                                  
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">HTML 서버 시작됨</span><span class="dl">"</span><span class="p">)</span>
<span class="p">})</span>

<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/pharmach_list</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">response</span> <span class="o">=</span> <span class="kc">null</span>
    <span class="kd">let</span> <span class="nx">api</span> <span class="o">=</span> <span class="k">async</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">http://apis.data.go.kr/B552657/ErmctInsttInfoInqireService/getParmacyListInfoInqire</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
                <span class="dl">"</span><span class="s2">serviceKey</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">mL6hpE93V2cGEHnZNYbp2kbpZIm2IFyc9rhdh2wIaUseyjghN%2FlJSV7tSchmbL47mZsX8gNcLVtGpsTxQkstdA%3D%3D</span><span class="dl">"</span><span class="p">,</span>
                <span class="dl">"</span><span class="s2">Q0</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">서울특별시</span><span class="dl">"</span><span class="p">,</span>
                <span class="dl">"</span><span class="s2">Q1</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">강남구</span><span class="dl">"</span><span class="p">,</span>
                <span class="dl">"</span><span class="s2">QT</span><span class="dl">"</span><span class="p">:</span><span class="dl">""</span><span class="p">,</span>
                <span class="dl">"</span><span class="s2">QN</span><span class="dl">"</span><span class="p">:</span><span class="dl">""</span><span class="p">,</span>
                <span class="dl">"</span><span class="s2">ORD</span><span class="dl">"</span><span class="p">:</span><span class="dl">""</span><span class="p">,</span>
                <span class="dl">"</span><span class="s2">pageNo</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span>
                <span class="dl">"</span><span class="s2">numOfRows</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">1000</span><span class="dl">"</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">})</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">response</span><span class="p">;</span>
<span class="p">});</span>

</pre></td></tr></tbody></table></code></pre></div></div>
<p>이제 axios모듈을 쓰겠다고 정의해주었으니</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="go">npm install axios
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p>해줍시다.</p>

<p><br />
<br />
<br />
<br /></p>

<p>이어서</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="go">node index.js
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p>입력하게 되면 오잉??</p>

<p><br />
<br />
<br />
<br /></p>

<p><img src="/assets/img/api/naver-map-api-pharmacy/14.png" alt="Desktop View" /></p>

<p><br />
<br />
<br /></p>

<h3 id="-문제-발생">🚨 문제 발생</h3>
<ul>
  <li>에러이벤트를 핸들링하지 않았다</li>
  <li>80번 포트가 이미 사용중이다</li>
</ul>

<p><br />
<br />
<br />
<br />
<br /></p>

<h3 id="해결방법">🔑해결방법</h3>
<ul>
  <li>axios모듈을 쓰면 try catch문으로 에러 핸들링을 해줍시다</li>
</ul>

<p>우선 try catch문을 만들어 try문 안에 api구문을 다 넣어주었고,<br />
이 try문에서 에러 발생시 그 에러가 catch로 오게됨, 그 예외상황이 오면 콘솔로그로 에러상황을 찍음<br />
그리고 nodejs로 api내용을 가져오는 이유는 cors보안문제를 해결하기 위함입니다.<br />
<code class="language-plaintext highlighter-rouge">.then</code>이라고 작성해주면 이 api기능이 실행될때 오류를 잡을 수 있습니다. 약국정보 있는게 response고,<br />
res는 이 api를 사용하는 객체에게 전달해주는 값입니다, 이제 이 api를 호출하는 대상에게<br />
데이터를 남기기 위해 두번째 res변수로 <code class="language-plaintext highlighter-rouge">res.setHeader</code>를 지정합니다. 여기에 보면 <code class="language-plaintext highlighter-rouge">*</code>이 있는데 *=all<br />
앞의 allow부터 쭉 읽어보면 가능한 것들은 다 허가해줘라는 뜻입니다.</p>

<p><br /></p>

<p>이제 이 api에 접속한 대상에게 api데이터를 전달하기 위해 response.body 입력,<br />
이렇게 되면 약국데이터를 저 경로로 접속한 컴퓨터에게 제공해줍니다.</p>

<p>코드는 이렇게 변형되었습니다</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre></td><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/pharmach_list</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">response</span> <span class="o">=</span> <span class="kc">null</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">api</span> <span class="o">=</span> <span class="k">async</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">http://apis.data.go.kr/B552657/ErmctInsttInfoInqireService/getParmacyListInfoInqire</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
                <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
                    <span class="dl">"</span><span class="s2">serviceKey</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">mL6hpE93V2cGEHnZNYbp2kbpZIm2IFyc9rhdh2wIaUseyjghN%2FlJSV7tSchmbL47mZsX8gNcLVtGpsTxQkstdA%3D%3D</span><span class="dl">"</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">Q0</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">서울특별시</span><span class="dl">"</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">Q1</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">강남구</span><span class="dl">"</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">QT</span><span class="dl">"</span><span class="p">:</span><span class="dl">""</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">QN</span><span class="dl">"</span><span class="p">:</span><span class="dl">""</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">ORD</span><span class="dl">"</span><span class="p">:</span><span class="dl">""</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">pageNo</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">numOfRows</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">1000</span><span class="dl">"</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="p">})</span>
        <span class="p">}</span>
        <span class="nx">api</span><span class="p">().</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span>  <span class="p">{</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Access-Control-Allow-Origin</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">*</span><span class="dl">"</span><span class="p">)</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">}</span>
    <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">response</span><span class="p">;</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br />
<br />
<br />
<br /></p>

<ul>
  <li>80번포트가 이미 사용중 에러<br />
앞서 실행중인 메모리가 콘솔에 남아있기 때문에 vscode를 껏다키면 해결됩니다.</li>
</ul>

<p><br />
<br /></p>

<p>——————- 한것을 잠깐 요약해보면 ——————-<br />
<code class="language-plaintext highlighter-rouge">index.js</code><br />
express 모듈 -  웹서버 구현<br />
axios 모듈 - 약국 api 불러오기</p>

<p>(이 2가지는 벡엔드 역할을 해줍니다.)
<br />
<br /></p>

<p><code class="language-plaintext highlighter-rouge">index.html</code><br />
웹 브라우저에서 작동하는 페이지</p>

<h1 id="이어서-2부에서">이어서 2부에서</h1>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br /></p>

<p>아래 사진을 클릭하면 <code class="language-plaintext highlighter-rouge">제 취미공간</code>으로 이어집니다 ㅎㅎ 여기에서 메모 및 일상을 기록하는데 놀러오실 분들은 언제나 환영합니다!</p>

<p><br /></p>

<h1 id="링크로-이동하려면-사진을-클릭">링크로 이동하려면 사진을 클릭</h1>

<p><a href="https://discord.com/channels/976352361142452234/976352361142452239"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQk-zPB4TCuWRNJVIF0aWgniDPNJgUTdXmILg&amp;usqp=CAU" alt="어서오셔 ㅎ" /></a></p>

<hr />
<h1 id="참고">참고</h1>
<hr />
<p>‘소스놀이터’        <a href="https://www.youtube.com/watch?v=-sKd4NYS2sA&amp;t=548s">Node Js로 네이버 약국 지도 만들기 #1 (공공데이터포털 오픈 API 활용)</a></p>

<p><br /></p>

<p>‘소스놀이터’        <a href="https://www.youtube.com/watch?v=FKQxItpstIk&amp;t=1245s">Node.Js로 네이버 약국 지도 만들기 #2 (express &amp; axios 모듈, 비동기 문제 해결)</a>      30:12 까지</p>]]></content><author><name></name></author><category term="developer-tools" /><category term="api" /><category term="Node.js" /><category term="api" /><category term="nodejs" /><summary type="html"><![CDATA[]]></summary></entry><entry><title type="html">[error: npm init]</title><link href="https://joonhwan2.github.io/posts/npm-init-error/" rel="alternate" type="text/html" title="[error: npm init]" /><published>2022-09-07T00:00:00+09:00</published><updated>2022-09-07T23:13:01+09:00</updated><id>https://joonhwan2.github.io/posts/npm-init-error</id><content type="html" xml:base="https://joonhwan2.github.io/posts/npm-init-error/"><![CDATA[<p><br />
<br />
<br />
<br /></p>

<blockquote>
  <h1 id="문제-발생-">🚨문제 발생  </h1>
  <ul>
    <li>사진 참고</li>
  </ul>
</blockquote>

<p><br />
<br /></p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="go">npm init
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p>입력했더니</p>

<p><img src="/assets/img/error/npm/1.PNG" alt="Desktop View" /></p>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br /></p>

<blockquote>
  <h1 id="내가-해결한-방법">🔑내가 해결한 방법</h1>
</blockquote>

<h2 id="1---windowspowershell을-입력하여-관리자로-실행합시다">1    <code class="language-plaintext highlighter-rouge">windowspowershell</code>을 입력하여 관리자로 실행합시다</h2>
<p><img src="/assets/img/error/npm/2.PNG" width="500" height="500" /></p>

<p><br />
<br />
<br />
<br />
<br /></p>

<p><br />
<br />
<br /></p>

<h2 id="2---권한상태-확인">2    권한상태 확인</h2>

<p><br /></p>

<p><img src="/assets/img/error/npm/3.PNG" width="700" height="600" /></p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="go"> get-ExecutionPolicy
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p>이걸 입력해보면 Restricted 라고 나올겁니다</p>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br /></p>

<h2 id="3---권한변경-및-변경이-잘-되었는지-확인">3    권한변경 및 변경이 잘 되었는지 확인</h2>

<p><br /></p>

<p><img src="/assets/img/error/npm/4.PNG" alt="Desktop View" /></p>

<p><br />
<br />
<br /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre>- 권한 상태값 참고

 Restricted : default설정값으로, 스크립트 파일을 실행할 수 없습니다.

 AllSigned : 신뢰할 수 있는(서명된) 스크립트 파일만 실행할 수 있습니다.

 RemoteSigned : 로컬에서 본인이 생성한 스크립트와, 신뢰할 수 있는(서명된) 스크립트 파일 실행할 수 있습니다.

 Unrestricted : 모든 스크립트 실행가능

 ByPass : 경고/차단 없이 모든 것을 실행가능하도록함

 Undefined : 권한을 설정하지 않겠음
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br />
<br /></p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="go">Set-ExecutionPolicy RemoteSigned
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p>입력후 y 입력하고 엔터</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="go"> get-ExecutionPolicy
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p>그리고 <code class="language-plaintext highlighter-rouge">RemoteSigned</code>로 변경이 잘 되었는지 확인해봅시다<br />
다 되었다면 vscode나 cmd에서 npm init 입력하였을때 잘 작동할겁니다!</p>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br /></p>

<h2 id="보시고-미흡한-부분이-있다면-피드백은-언제나-환영합니다">보시고 미흡한 부분이 있다면 피드백은 언제나 환영합니다!</h2>

<p><br />
<br />
아래 사진을 클릭하면 <code class="language-plaintext highlighter-rouge">제 취미공간</code>으로 이어집니다 ㅎㅎ 여기에서 메모 및 일상을 기록하는데 놀러오실 분들은 언제나 환영합니다!</p>

<p><br /></p>

<h1 id="링크로-이동하려면-사진을-클릭">링크로 이동하려면 사진을 클릭</h1>

<p><a href="https://discord.com/channels/976352361142452234/976352361142452239"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQk-zPB4TCuWRNJVIF0aWgniDPNJgUTdXmILg&amp;usqp=CAU" alt="어서오셔 ㅎ" /></a></p>

<hr />
<h1 id="참고">참고</h1>
<hr />
<p>‘지옥의불구덩이’        <a href="https://hellcoding.tistory.com/entry/VSCode-%EC%98%A4%EB%A5%98-%EC%9D%B4-%EC%8B%9C%EC%8A%A4%ED%85%9C%EC%97%90%EC%84%9C-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A5%BC-%EC%8B%A4%ED%96%89%ED%95%A0-%EC%88%98-%EC%97%86%EC%9C%BC%EB%AF%80%EB%A1%9C">VSCode 오류 : 이 시스템에서 스크립트를 실행할 수 없으므로 …</a></p>]]></content><author><name></name></author><category term="etc" /><category term="error" /><category term="npm" /><summary type="html"><![CDATA[]]></summary></entry><entry><title type="html">[js] three.js로 커스텀3D 물체 불러오기</title><link href="https://joonhwan2.github.io/posts/threejs/" rel="alternate" type="text/html" title="[js] three.js로 커스텀3D 물체 불러오기" /><published>2022-08-22T00:00:00+09:00</published><updated>2022-08-22T16:09:06+09:00</updated><id>https://joonhwan2.github.io/posts/threejs</id><content type="html" xml:base="https://joonhwan2.github.io/posts/threejs/"><![CDATA[<p><br />
<br />
<br />
<br /></p>

<blockquote>
  <h3 id="잠깐">잠깐❗</h3>
  <p>자바스크립트를 처음 하는 분 기준으로 진행하겠습니다.<br />
저도 3일전에 처음 자바스크립트를 threejs로 바로 시작했<br />
기에 얼마나 어려운지 잘 알고 있습니다. 그렇기에 처음 시작하시는 분들은<br />
저와 같이 어려움을 겪지않고 쉽게 하시길 바라고자 이렇게 직접 블로그에 남기<br />
게 되었습니다. 그리고 저에게 정말 많은 도움을 주신 <code class="language-plaintext highlighter-rouge">MincoMK</code> 선생님<br />
다시 한번 감사드립니다!</p>
</blockquote>

<p><br /></p>

<blockquote>
  <h4 id="확인할-것">확인할 것!</h4>
  <ul>
    <li>checklist 1
<code class="language-plaintext highlighter-rouge">vs코드</code>를 설치했는가?</li>
    <li>checklist 2
<code class="language-plaintext highlighter-rouge">Node.js</code>를 설치하였는가?</li>
    <li>checklist 3
    Node.js의 <code class="language-plaintext highlighter-rouge">시스템변수, 환경변수</code>를 설정하였는가?</li>
  </ul>
</blockquote>

<p><br />
<br />
<br />
<br /></p>

<blockquote>
  <h5 id="내가-참고할-것">(내가 참고할 것)</h5>
  <p>Node.js 설치 후 npm폴더를 만들어<br />
환경변수  C:\Users\rhwns\AppData\Roaming\npm</p>

  <p><br /></p>

  <p>시스템 변수   <code class="language-plaintext highlighter-rouge">nodejs 설치한 경로명</code> (바탕화면에 nodejs1 폴더를 만들어 그안에 설치하였다)<br />
C:\users\rhwns\desktop\nodejs1\nodejs;</p>
</blockquote>

<p><br />
<br />
<br />
<br /></p>

<p><br /></p>

<p><br />
<br /></p>

<blockquote>
  <h2 id="1--sketchfabcom에서-먼저-gltf-파일로-다운받기">1     <code class="language-plaintext highlighter-rouge">sketchfab.com</code>에서 먼저 gltf 파일로 다운받기</h2>
  <p><a href="https://sketchfab.com/search?q=cute&amp;type=models">커스텀 3D물체 다운받으러가기</a>
***
<br /></p>
</blockquote>

<p><img src="/assets/img/html-css-js/2022-08-22/1.PNG" width="500" height="500" /></p>

<p><br />
<br /></p>

<p>저는 바탕화면에 <code class="language-plaintext highlighter-rouge">toaster 라는 폴더</code> 생성후 그곳에 토스터 기계를 <code class="language-plaintext highlighter-rouge">toaster라는 폴더</code>안에 다운로드 받았어요ㅎ<br />
다운로드 받으실땐 무조건 glTF 파일로 다운로드 받아주세요.</p>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />    <br />
<br />
<br />
<br /></p>

<blockquote>
  <h2 id="2--threejs-모듈-생성">2     threejs 모듈 생성</h2>
  <p>잠깐❗ 하시기 전 4번의 설명을 보고 하셔도 늦지 않습니다!<br />
<br />
<br /></p>
</blockquote>

<p>자 저의 경우는 cmd에서 cd desktop\toaster 통해 저의 폴더 경로로 입장한 후 아래 문구를 입력합니다</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>npm <span class="nb">install </span>three
</pre></td></tr></tbody></table></code></pre></div></div>
<p>그러면 이제 toaster 라는 폴더에 node_modules 라는 폴더가 생길텐데 그 안에 들어가면<br />
<code class="language-plaintext highlighter-rouge">폴더 three</code>이것만 toaster 폴더에 놓아두고 나머지 node_moudles 폴더 삭제합니다<br />
결과는 아래와 같이 되야합니다.</p>

<p><br />
<br />
<br /></p>

<p><img src="/assets/img/html-css-js/2022-08-22/2.PNG" width="500" height="500" /></p>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br />    <br />
<br />
<br />
<br /></p>

<blockquote>
  <h2 id="3--저-폴더-안에서-indexhtml-파일을-만듭시다">3     저 폴더 안에서 <code class="language-plaintext highlighter-rouge">index.html</code> 파일을 만듭시다</h2>
</blockquote>

<p>! 치고 엔터를 쳐서 기본틀 생성합시다</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"X-UA-Compatible"</span> <span class="na">content=</span><span class="s">"IE=edge"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Document<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>이제 &lt;body&gt; 바로 아래에 이렇게 수정해줍시다</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;body&gt;</span>
    
    <span class="nt">&lt;canvas</span> <span class="na">id=</span><span class="s">"canvas"</span><span class="nt">&gt;&lt;/canvas&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br />    <br />
<br />
<br />
<br /></p>

<blockquote>
  <h2 id="4--이제-모듈-관련-입력해줍시다">4     이제 모듈 관련 입력해줍시다</h2>
  <p>```html</p>
</blockquote>
<canvas id="canvas"></canvas>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="rouge-code"><pre>이 문장을 이렇게 추가하여 수정해줍시다
  
  &lt;br&gt;
  &lt;br&gt;
  
```html
  &lt;canvas id="canvas"&gt;&lt;/canvas&gt;

&lt;script type="importmap"&gt;
    {
        "imports": {
            "three": "./three/build/three.module.js",
            "three/examples/jsm/loaders/GLTFLoader":"./three/examples/jsm/loaders/GLTFLoader.js",
            "three/examples/jsm/controls/OrbitControls": "./three/examples/jsm/controls/OrbitControls.js"
        }
    }
&lt;/script&gt;

--------------------이 줄은 추가하지 마세요 잠시 설명을 위해 분리해놓았습니다-----------------------------
  
    &lt;script type="module"&gt;
        import { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';
        import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';
        import * as THREE from 'three';  
</pre></td></tr></tbody></table></code></pre></div></div>

<p>만약에 “<code class="language-plaintext highlighter-rouge">npm install three</code> 입력시 모듈이 너무 많아서 노트북 속도가 느려져서 다운받기 싫다!” 하시는 분들은<br />
<code class="language-plaintext highlighter-rouge">npm install three</code>를 입력하지않고 위에것만 쓰시면 되고
<br /></p>

<p>나는 정석으로 가겠다 하시는 분은 <code class="language-plaintext highlighter-rouge">npm intall three</code>를 콘솔창에 입력하시고 아래의 구문만 쓰시면 되는데<br />
저의 경우는 <code class="language-plaintext highlighter-rouge">npm install three</code>를 입력하고 저 2개를 같이 배치해두니 되길래 저는 이 방법을 사용하였습니다.</p>

<p><br />
<br /></p>

<blockquote>
  <p>※ 참고</p>
  <ul>
    <li>GLTFLoader를 임포트 하겠다는 것은 GLTF사진을 가져와서 쓰겠다 뜻</li>
    <li>OrbitControls를 임포트 하겠다는 것은 물체를 마우스로 조절할 수 있게 하겠다는 뜻</li>
  </ul>
</blockquote>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />    <br />
<br />
<br />
<br /></p>

<blockquote>
  <h2 id="5--3d물체-기본설정">5     3D물체 기본설정</h2>
</blockquote>

<p><br />
<br /></p>

<p>이어서 아래에 붙여줍시다</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="p">[</span><span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span><span class="p">];</span>
<span class="kd">let</span> <span class="nx">aspectRatio</span> <span class="o">=</span> <span class="nx">width</span> <span class="o">/</span> <span class="nx">height</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#canvas</span><span class="dl">'</span><span class="p">);</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span><span class="nx">canvas</span><span class="p">,</span> <span class="p">{</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span> <span class="p">});</span>      
</pre></td></tr></tbody></table></code></pre></div></div>
<p>물체 보이는 높낮이에 관한 설정입니다!</p>

<p><br />
<br /></p>

<p>아래에 이어서 붙입시다</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">scene</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Scene</span><span class="p">();</span>       <span class="c1">// 3D물체 장면을 생성하기 위해 scene이라는 변수를 만들어주었다.</span>
     
<span class="nx">scene</span><span class="p">.</span><span class="nx">background</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Color</span><span class="p">(</span><span class="dl">'</span><span class="s1">#ffffff</span><span class="dl">'</span><span class="p">);</span>               <span class="c1">// 배경색 설정</span>
      
<span class="kd">let</span> <span class="nx">light</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">AmbientLight</span><span class="p">(</span><span class="mh">0xffffff</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>            <span class="c1">// 이 두문장 추가하면 물체(토스트기계)를 보이게해줌</span>
<span class="nx">scene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">light</span><span class="p">);</span>      

      
<span class="kd">let</span> <span class="nx">renderer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">({</span>                 <span class="c1">// 브라우저를 켰을때 물체장면을 보여주는 함수입니다</span>
    <span class="nx">canvas</span><span class="p">,</span>
    <span class="na">antialias</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">});</span>      
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />    <br />
<br />
<br />
<br /></p>

<blockquote>
  <h2 id="6---카메라설정--마우스로-움직이게-하기">6      카메라설정 + 마우스로 움직이게 하기</h2>
  <p>이것도 아래에 이어서 붙입시다</p>
</blockquote>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">camera</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">PerspectiveCamera</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="nx">aspectRatio</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>             <span class="c1">// 카메라 관점 설정 (숫자 변경을 통해 조절 가능)</span>
<span class="nx">camera</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">500</span><span class="p">);</span>          <span class="c1">//카메라 보이는 각도 설정 (숫자 변경을 통해 조절가능)</span>

      
<span class="kd">let</span> <span class="nx">controls</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OrbitControls</span><span class="p">(</span><span class="nx">camera</span><span class="p">,</span> <span class="nx">renderer</span><span class="p">.</span><span class="nx">domElement</span><span class="p">);</span>            <span class="c1">// 마우스로 움직이게 할 수 있는 기능</span>
<span class="nx">controls</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>      
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>이제 이문장을 추가해봅시다</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">controls</span><span class="p">.</span><span class="nx">autoRotate</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>         <span class="c1">// 자동회전 O     </span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br />
<br />
<br />
<br />
<br />    <br />
<br />
<br />
<br />
<br /></p>

<blockquote>
  <h2 id="7---마무리작업">7      마무리작업</h2>
</blockquote>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">loader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GLTFLoader</span><span class="p">();</span>
<span class="nx">loader</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="dl">'</span><span class="s1">./scene.gltf</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gltf</span><span class="p">){</span>           <span class="c1">// 안에 내부 설계를 했으니 이제 뚜껑으로 덮어줘야한다   그런 비슷한 존재 </span>
    <span class="nx">scene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">gltf</span><span class="p">.</span><span class="nx">scene</span><span class="p">);</span>      

      
      
    <span class="p">(</span><span class="kd">function</span> <span class="nx">animate</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">renderer</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">scene</span><span class="p">,</span> <span class="nx">camera</span><span class="p">);</span>
        <span class="nx">controls</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>                <span class="c1">//animate() 함수안에 controls.update() 추가함으로써 매프레임마다 자동으로 돌아감)</span>
        <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">animate</span><span class="p">);</span>             <span class="nx">그리고</span> <span class="nx">프레임마다</span> <span class="nx">조금씩</span> <span class="nx">각도를</span> <span class="nx">높여줌</span>
    <span class="p">})();</span> <span class="c1">//requestAnimationFrame              // 이거는 성능에 따라 프레임 수를 조절해서 몇 밀리초 뒤에 다음 프레임을 호출할지 결정</span>
  <span class="p">});</span>  
      
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />    <br />
<br />
<br />
<br />
<br /></p>

<h1 id="완성된----indexhtml">완성된    index.html</h1>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"X-UA-Compatible"</span> <span class="na">content=</span><span class="s">"IE=edge"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Document<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    
    <span class="nt">&lt;canvas</span> <span class="na">id=</span><span class="s">"canvas"</span><span class="nt">&gt;&lt;/canvas&gt;</span>

<span class="c">&lt;!-- 2 이걸 적어주고 시작 --&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"importmap"</span><span class="nt">&gt;</span>
    <span class="p">{</span>
        <span class="dl">"</span><span class="s2">imports</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">"</span><span class="s2">three</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./three/build/three.module.js</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">three/examples/jsm/loaders/GLTFLoader</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">./three/examples/jsm/loaders/GLTFLoader.js</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">three/examples/jsm/controls/OrbitControls</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./three/examples/jsm/controls/OrbitControls.js</span><span class="dl">"</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>

    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"module"</span><span class="nt">&gt;</span>
        <span class="k">import</span> <span class="p">{</span> <span class="nx">GLTFLoader</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">three/examples/jsm/loaders/GLTFLoader</span><span class="dl">'</span><span class="p">;</span>
        <span class="k">import</span> <span class="p">{</span> <span class="nx">OrbitControls</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">three/examples/jsm/controls/OrbitControls</span><span class="dl">'</span><span class="p">;</span>
        <span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">THREE</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">three</span><span class="dl">'</span><span class="p">;</span>

        <span class="kd">let</span> <span class="p">[</span><span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span><span class="p">];</span>
        <span class="kd">let</span> <span class="nx">aspectRatio</span> <span class="o">=</span> <span class="nx">width</span> <span class="o">/</span> <span class="nx">height</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#canvas</span><span class="dl">'</span><span class="p">);</span>
        <span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span><span class="nx">canvas</span><span class="p">,</span> <span class="p">{</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span> <span class="p">});</span>

         <span class="c1">//3 이제 3D물체 장면을 만들자</span>
         <span class="kd">let</span> <span class="nx">scene</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Scene</span><span class="p">();</span>

         <span class="nx">scene</span><span class="p">.</span><span class="nx">background</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Color</span><span class="p">(</span><span class="dl">'</span><span class="s1">#ffffff</span><span class="dl">'</span><span class="p">);</span>
        
         <span class="c1">//이문장 추가하면 토스터기계 보임</span>
        <span class="kd">let</span> <span class="nx">light</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">AmbientLight</span><span class="p">(</span><span class="mh">0xffffff</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="nx">scene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">light</span><span class="p">);</span>
        <span class="c1">//</span>

    
        <span class="c1">//4브라우저에 물체장면을 보여주소</span>
        <span class="kd">let</span> <span class="nx">renderer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">({</span>
            <span class="nx">canvas</span><span class="p">,</span>
            <span class="na">antialias</span><span class="p">:</span> <span class="kc">true</span>
        <span class="p">});</span>

        <span class="c1">//5 카메라 ------- 아래 문장 추가 후 render.render(scene, camera) 바꿔주자</span>
        <span class="kd">let</span> <span class="nx">camera</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">PerspectiveCamera</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="nx">aspectRatio</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>
        <span class="nx">camera</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">500</span><span class="p">);</span>

        <span class="kd">let</span> <span class="nx">controls</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OrbitControls</span><span class="p">(</span><span class="nx">camera</span><span class="p">,</span> <span class="nx">renderer</span><span class="p">.</span><span class="nx">domElement</span><span class="p">);</span>
        <span class="nx">controls</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="nx">controls</span><span class="p">.</span><span class="nx">autoRotate</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>  <span class="c1">//controls.autoRotate =true;  자동회전O</span>
        <span class="c1">// -------------------------</span>
        <span class="kd">let</span> <span class="nx">loader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GLTFLoader</span><span class="p">();</span>
        <span class="nx">loader</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="dl">'</span><span class="s1">./scene.gltf</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gltf</span><span class="p">){</span>
            <span class="nx">scene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">gltf</span><span class="p">.</span><span class="nx">scene</span><span class="p">);</span>
            
            <span class="p">(</span><span class="kd">function</span> <span class="nx">animate</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">renderer</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">scene</span><span class="p">,</span> <span class="nx">camera</span><span class="p">);</span>
                <span class="nx">controls</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span> <span class="c1">//animate() 함수안에 controls.update() 추가함으로써 매프레임마다 자동으로 돌아감)</span>
                <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">animate</span><span class="p">);</span>  <span class="c1">//그리고 프레임마다 조금씩 각도를 높여줌</span>
            <span class="p">})();</span> <span class="c1">//requestAnimationFrame 이거는 성능에 따라 프레임 수를 조절해서 몇 밀리초 뒤에 다음 프레임을 호출할지 결정</span>
        <span class="p">});</span>

        
    <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>

<span class="c">&lt;!-- This work is based on "Cute Toaster" (https://sketchfab.com/3d-models/cute-toaster-9f6d03cf29f245ad97c51a56e9b1ca90) by blkelly (https://sketchfab.com/blkelly) licensed under CC-BY-4.0 (http://creativecommons.org/licenses/by/4.0/) --&gt;</span>      
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />    <br />
<br />
<br />
<br /></p>

<blockquote>
  <h2 id="8---확인하기">8      확인하기</h2>
  <p>저장 한번 해주고 cmd로 들어가서 원하는 경로에 들어가서 이제 입력합시다<br />
저의 경우는 cd desktop\toaster 로 경로를 맞추고 시작하였습니다</p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>npm i http-server <span class="nt">-g</span>               // 글로벌 http 서버를 설치하겠다
npx http-server <span class="nt">-p</span> 8080            // 끝자리가 8080인 서버를 만들자
</pre></td></tr></tbody></table></code></pre></div></div>
<p>그 후 생성된 <a href="http://127.0.0.1:8080">http://127.0.0.1:8080</a> 들어가서 <code class="language-plaintext highlighter-rouge">ctr shift r</code>(강력한 새로고침) 한번 눌러줍시다.</p>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br />    <br />
<br />
<br />
<br />    <br />
아래 사진을 클릭하면 <code class="language-plaintext highlighter-rouge">제 취미공간</code>으로 이어집니다 ㅎㅎ 여기에서 메모 및 일상을 기록하는데 놀러오실 분들은 언제나 환영합니다!</p>

<p><br /></p>

<h1 id="링크로-이동하려면-사진을-클릭">링크로 이동하려면 사진을 클릭</h1>

<p><a href="https://discord.gg/zkzk5xtm"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQk-zPB4TCuWRNJVIF0aWgniDPNJgUTdXmILg&amp;usqp=CAU" alt="어서오셔 ㅎ" /></a></p>

<hr />
<h1 id="참고">참고</h1>
<hr />
<p>‘애플코딩’        <a href="https://www.youtube.com/watch?v=CojyGfCMvuU&amp;t=80s">웹 포트폴리오에 간지나게 3D 모델을 추가해보자 (Three.js)</a></p>

<p><br />
<br />
<br />
<br />
<br /></p>

<hr />
<h1 id="많은-도움을-주신-선생님">많은 도움을 주신 선생님</h1>
<hr />
<p>‘MincoMK’<br />
선생님 깃허브 <a href="https://github.com/MincoMK?tab=repositories">https://github.com/MincoMK?tab=repositories</a><br />
선생님 디스코드 닉네임  <code class="language-plaintext highlighter-rouge">! !#0123</code></p>]]></content><author><name></name></author><category term="developer-tools" /><category term="html-css-js" /><category term="css" /><category term="js" /><category term="Node.js" /><category term="html" /><summary type="html"><![CDATA[]]></summary></entry><entry><title type="html">[git] git merge 정리</title><link href="https://joonhwan2.github.io/posts/git-merge/" rel="alternate" type="text/html" title="[git] git merge 정리" /><published>2022-08-18T00:00:00+09:00</published><updated>2022-08-19T00:15:47+09:00</updated><id>https://joonhwan2.github.io/posts/git-merge</id><content type="html" xml:base="https://joonhwan2.github.io/posts/git-merge/"><![CDATA[<p><br />
<br />
<br /></p>

<blockquote>
  <h2 id="요약">요약</h2>
  <ul>
    <li>원 자료에 영향을 주지않고 버그 수정이나 새로운 기능 구현을 위해서는 새로운 브랜치를 만들자</li>
    <li>브랜치 변경 후 <code class="language-plaintext highlighter-rouge">vim index.html</code>로 새로운 공간을 만들어 그곳에서 작업하자</li>
    <li>기능 구현 완료된 작업물은 다시 주요 브랜치로 변경하여 그 곳에서 하던 브랜치를 병합해주자</li>
  </ul>
</blockquote>

<hr />
<h2 id="-git-merge---그림-18--상황-추가---글-다음-그림결과">🎲 git merge   그림 1~8 &amp; 상황 추가      글 다음 그림결과</h2>
<hr />

<p><br /></p>

<h3 id="그림-1----main-브랜치로-a3까지-작업하였다">그림 1         <code class="language-plaintext highlighter-rouge">main</code> 브랜치로 A3까지 작업하였다</h3>

<p><img src="/assets/img/git/merge/1.PNG" alt="Desktop View" /></p>

<p><br />
<br /></p>

<p><br />
<br /></p>

<p>수력발전 프로그램 구현을 위해 <code class="language-plaintext highlighter-rouge">water</code> 브랜치 추가하여</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre> <span class="nv">$git</span> branch water
 <span class="nv">$git</span> checkout water
</pre></td></tr></tbody></table></code></pre></div></div>
<p>혹은</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre> <span class="nv">$git</span> checkout <span class="nt">-b</span> water
 이거 성공시 Switched to a new branch <span class="s2">"water"</span> 이렇게 나옵니다
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br />
<br />
<br /></p>

<h3 id="그림-2">그림 2</h3>

<p><img src="/assets/img/git/merge/2.PNG" alt="Desktop View" /></p>

<p><br />
<br /></p>

<p><code class="language-plaintext highlighter-rouge">water</code>브랜치 설정 된 상태에서 아래와 같은 명령어를 입력하면 새로운 공간을 만들어<br />
그곳에서 작업할 수 있는 환경을 조성함</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nv">$vim</span> index.html    <span class="o">(</span>새로운 작업공간 창조<span class="o">)</span>
<span class="nv">$git</span> commit <span class="nt">-m</span> <span class="s2">"water system checking 1"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br />
<br />
<br /></p>

<h3 id="그림-3">그림 3</h3>

<p><img src="/assets/img/git/merge/3.PNG" alt="Desktop View" /></p>

<p><br />
<br />
<br /></p>

<p>예로 만드는 사이트에서 버그가 생기면 즉시 고쳐야한다! 근데 작업중인 <code class="language-plaintext highlighter-rouge">water</code>에 반영되면<br />
안되기 때문에 <code class="language-plaintext highlighter-rouge">hurryfix</code>브랜치를 만들어 이곳에서 해결하기 위해 다시 <code class="language-plaintext highlighter-rouge">git checkout main</code>으로 돌아가서</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nv">$git</span> checkout <span class="nt">-b</span> hurryfix
</pre></td></tr></tbody></table></code></pre></div></div>
<p>생성 후 A3에 <code class="language-plaintext highlighter-rouge">hurryfix</code> 브랜치가 생기고 매인 브랜치로 바뀌는 동시, 이때</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nv">$vim</span> index.html
<span class="nv">$git</span> commit <span class="nt">-m</span> <span class="s2">"hotfix locked and loaded"</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>입력하면 main브랜치가 있던 A3까지를 기억하는 A5를 생성해 <code class="language-plaintext highlighter-rouge">water</code>브랜치에서 작업하는데 방해하지 않고 버그 수정 가능하다</p>

<p><br />
<br />
<br /></p>

<h3 id="그림-4">그림 4</h3>

<p><img src="/assets/img/git/merge/4.PNG" alt="Desktop View" /></p>

<p><br />
<br />
<br /></p>

<p>자 이제 급한 버그 수정이 끝났으면</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nv">$git</span> checkout main
<span class="nv">$git</span> merge hurryfix
<span class="nv">$git</span> branch <span class="nt">-D</span> hurryfix
</pre></td></tr></tbody></table></code></pre></div></div>
<p>그러면 이제 <code class="language-plaintext highlighter-rouge">hurryfix</code> 브랜치는 사라진다.</p>

<h3 id="그림-5">그림 5</h3>

<p><img src="/assets/img/git/merge/5.PNG" alt="Desktop View" /></p>

<p><br />
<br />
<br /></p>

<p>hurryfix 브랜치가 삭제된 상태에서</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nv">$git</span> branch water    이제 <span class="sb">`</span>water<span class="sb">`</span> 브랜치로 바뀜
<span class="nv">$vim</span> index.html     A4까지 완료한거 영향을 안주기위해 백업해놓고 A6생성
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br />
<br />
<br /></p>

<h3 id="그림-6">그림 6</h3>

<p><img src="/assets/img/git/merge/6.PNG" alt="Desktop View" /></p>

<p><br />
<br /></p>

<p>수력발전 프로그램 구현 완료후 이제 main 브랜치에 병합을 시키자</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nv">$git</span> checkout main     <span class="o">(</span>main으로 매인브랜치 변경<span class="o">)</span>
<span class="nv">$git</span> merge water       <span class="o">(</span>water 브랜치 내용을 병합하겠다<span class="o">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br />
<br /></p>

<h3 id="그림-7">그림 7</h3>
<p><img src="/assets/img/git/merge/7.PNG" alt="Desktop View" /></p>

<p><br />
<br /></p>

<p>이제 <code class="language-plaintext highlighter-rouge">water</code>브랜치는 지워도 무방</p>

<p><br />
<br />
<br /></p>

<h3 id="그림-8">그림 8</h3>
<p><img src="/assets/img/git/merge/8.PNG" alt="Desktop View" /></p>

<p><br />
<br />
`
<br />
<br />
<br />
<br />
<br />
<br />
<br /></p>

<p>아래 사진을 클릭하면 <code class="language-plaintext highlighter-rouge">제 취미공간</code>으로 이어집니다 ㅎㅎ 여기에서 메모 및 일상을 기록하는데 놀러오실 분들은 언제나 환영합니다!</p>

<p><br /></p>

<h1 id="링크로-이동하려면-사진을-클릭">링크로 이동하려면 사진을 클릭</h1>

<p><a href="https://discord.gg/zkzk5xtm"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQk-zPB4TCuWRNJVIF0aWgniDPNJgUTdXmILg&amp;usqp=CAU" alt="어서오셔 ㅎ" /></a></p>

<hr />
<h1 id="참고-">참고   </h1>
<hr />
<p>‘git 공식홈페이지’        <a href="https://git-scm.com/book/ko/v2/Git-%EB%B8%8C%EB%9E%9C%EC%B9%98-%EB%B8%8C%EB%9E%9C%EC%B9%98%EC%99%80-Merge-%EC%9D%98-%EA%B8%B0%EC%B4%88#_basic_merging">3.2 Git 브랜치 - 브랜치와 Merge 의 기초</a></p>]]></content><author><name></name></author><category term="developer-tools" /><category term="git" /><category term="git" /><summary type="html"><![CDATA[]]></summary></entry><entry><title type="html">[git] git pull fetch 정리</title><link href="https://joonhwan2.github.io/posts/git-pull-fetch/" rel="alternate" type="text/html" title="[git] git pull fetch 정리" /><published>2022-08-18T00:00:00+09:00</published><updated>2022-08-18T16:05:42+09:00</updated><id>https://joonhwan2.github.io/posts/git-pull-fetch</id><content type="html" xml:base="https://joonhwan2.github.io/posts/git-pull-fetch/"><![CDATA[<p><br /></p>

<blockquote>
  <h2 id="공부하는-공작새님의-블로그를-참고하여-작성했습니다">‘공부하는 공작새’님의 블로그를 참고하여 작성했습니다.</h2>
  <p><br />
<br />
<br />
<br />
<br /></p>
</blockquote>

<hr />
<blockquote>
  <ul>
    <li>
      <h1 id="git-fetch">git fetch</h1>
      <hr />
      <p>원격저장소(깃허브 인터넷 상)에 있는 변경사항들을 로컬저장소(내 노트북)에 가져오기 전에 변경내용을 확인하고 싶은경우에 사용<br />
만약 제가 공동으로 작업하는 파일을 github에 올리고 잤어요.<br />
근데 다음날 누군가 제 파일에 수정을 했는지 안했는지 확인하고 싶을때!<br />
로컬디렉토리(내 노트북)로 변경한 내용을 가져오지 않고 변경한 내역들만 확인<br />
그 명령어가 fetch 입니다.</p>
    </li>
  </ul>
</blockquote>

<p><br />
<br />
<br />
실험을 위해 파일을 하나 만들어봅시다!</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">echo</span> <span class="s2">"hiya it's me Joonhwan!"</span> <span class="o">&gt;</span> yes.txt
</pre></td></tr></tbody></table></code></pre></div></div>
<p>그 후 git add ~ push 를 통해 원격저장소에 올려줍시다, 이제 깃허브로 가보면
<br />
<br />
<br />
<br /></p>

<p><img src="/assets/img/git/fetch-pull/1.PNG" alt="Desktop View" /></p>

<p><br />
<br />
<br /></p>

<p>이제 여기서 직접 수정해줍시다</p>

<p><br />
<br />
<br /></p>

<p><img src="/assets/img/git/fetch-pull/2.PNG" alt="Desktop View" /></p>

<p><br />
<br />
<br /></p>

<p>완료 후 맨 아래에 내려가서 <code class="language-plaintext highlighter-rouge">commit changes</code> 클릭</p>

<p><br />
 <br /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre> git fetch 원격저장소 이름
</pre></td></tr></tbody></table></code></pre></div></div>
<p>저는 origin 이라서     <code class="language-plaintext highlighter-rouge">git fetch origin</code> 으로 했습니다</p>

<p><br />
<br />
<br /></p>

<p><img src="/assets/img/git/fetch-pull/3.PNG" alt="Desktop View" /></p>

<p><br />
<br />
<br />
<br /></p>

<p>그 후</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>git fetch <span class="nt">-r</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>해당 명령어를 치면 fetch 확인 가능한 브랜치 내역들이 나옵니다<br />
자 저는 <code class="language-plaintext highlighter-rouge">origin/gh-pages</code>  <code class="language-plaintext highlighter-rouge">origin/main</code> 2가지가 있는데 origin/main 을 선택하겠습니다.</p>

<p><br />
<br /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>git checkout origin/main
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br />
<br />
<br /></p>

<p><img src="/assets/img/git/fetch-pull/4.PNG" alt="Desktop View" /></p>

<p><br />
<br />
<br /></p>

<p>빨간 네모를 잘 봐주시고 이제 깃허브로 갑시다</p>

<p><br />
<br />
<br /></p>

<p><img src="/assets/img/git/fetch-pull/5.PNG" alt="Desktop View" /></p>

<p><br />
<br />
<br />
action을 눌러 저는 해당되는 숫자를 찾아 클릭해보니 
<br />
<br />
<br /></p>

<p><img src="/assets/img/git/fetch-pull/6.PNG" alt="Desktop View" /></p>

<p><br />
<br /></p>

<p>자 원격저장소에서는 바뀌었지만 로컬저장소(내 노트북)에서는 어떨까?<br />
바로 확인해봅시다.</p>

<p><br />
<br /></p>

<p><img src="/assets/img/git/fetch-pull/7.PNG" alt="Desktop View" /></p>

<p><br /></p>

<p>오! git fetch는 원격저장소만 수정하고 내 로컬저장소는 수정하지 않군요.<br />
여기까지가 git fetch이고 이어서 git pull 합니다 ㅎ</p>

<p><br />
<br />
<br />
<br /></p>

<hr />
<blockquote>
  <h4 id="-잠깐-혹시-git-push-하다가-오류나서-git-status-쳤는데-이런-오류가-떳다면-여기를-참고해주세요-ㅎ">❗ 잠깐 혹시 <code class="language-plaintext highlighter-rouge">git push</code> 하다가 오류나서 <code class="language-plaintext highlighter-rouge">git status</code> 쳤는데 이런 오류가 떳다면 여기를 참고해주세요 ㅎ</h4>
  <hr />
  <p><img src="/assets/img/git-error/head-detached-at/1.PNG" alt="Desktop View" /></p>
</blockquote>

<h3 id="head-detached-at-오류-해결하러가기"><a href="https://joonhwan2.github.io/posts/git-fetch-head-detached/">HEAD detached at 오류 해결하러가기!</a></h3>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br /></p>

<hr />
<blockquote>
  <ul>
    <li>
      <h1 id="git-pull">git pull</h1>
      <hr />
    </li>
  </ul>
</blockquote>

<p><img src="/assets/img/git/fetch-pull/8.PNG" alt="Desktop View" /></p>

<p><br />
<br /></p>

<blockquote>
  <p>이번에 깃허브로 들어가서 이렇게 고쳐봤습니다.</p>
</blockquote>

<p><br /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>git pull origin main
git push 여기까지  
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="/assets/img/git/fetch-pull/9.PNG" alt="Desktop View" /></p>

<p><br />
<br />
<br /></p>

<p>자 아까랑 똑같은 방법으로 깃허브 -&gt; action -&gt; 해당되는 숫자 클릭을하면 변화를 보실 수 있을겁니다.<br />
그 후 노트북의 그 파일을 열어보면</p>

<p><br />
<br />
<br /></p>

<p><img src="/assets/img/git/fetch-pull/10.PNG" alt="Desktop View" /></p>

<p><br />
<br /></p>

<p>git pull은 제 노트북의 자료도 동일화 시키네요!<br />
자 이로서 <code class="language-plaintext highlighter-rouge">git fetch</code>와 <code class="language-plaintext highlighter-rouge">git pull</code>차이를 알아보았습니다. 자료들이 도움이 됬길 바랍니다 ㅎㅎ</p>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br /></p>

<p>아래 사진을 클릭하면 <code class="language-plaintext highlighter-rouge">제 취미공간</code>으로 이어집니다 ㅎㅎ 여기에서 메모 및 일상을 기록하는데 놀러오실 분들은 언제나 환영합니다!</p>

<p><br /></p>

<h1 id="링크로-이동하려면-사진을-클릭">링크로 이동하려면 사진을 클릭</h1>

<p><a href="https://discord.gg/zkzk5xtm"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQk-zPB4TCuWRNJVIF0aWgniDPNJgUTdXmILg&amp;usqp=CAU" alt="어서오셔 ㅎ" /></a></p>

<hr />
<h1 id="참고-">참고  </h1>
<hr />
<p>‘공부하는 공작새’        <a href="https://chaeyoung2.tistory.com/43">git fetch pull 사용법, fetch pull 차이점 알아보기</a></p>]]></content><author><name></name></author><category term="developer-tools" /><category term="git" /><category term="git" /><summary type="html"><![CDATA[]]></summary></entry><entry><title type="html">[head detached at] git push가 되지않음, head detached at</title><link href="https://joonhwan2.github.io/posts/git-fetch-head-detached/" rel="alternate" type="text/html" title="[head detached at] git push가 되지않음, head detached at" /><published>2022-08-18T00:00:00+09:00</published><updated>2022-08-18T15:50:33+09:00</updated><id>https://joonhwan2.github.io/posts/git-fetch-head-detached</id><content type="html" xml:base="https://joonhwan2.github.io/posts/git-fetch-head-detached/"><![CDATA[<p><br /></p>

<blockquote>
  <h2 id="공대-아로마님의-블로그를-참고하여-작성했습니다">‘공대 아로마’님의 블로그를 참고하여 작성했습니다.</h2>
  <p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br /></p>
</blockquote>

<p><br />
<br /></p>

<blockquote>
  <h1 id="문제-발생-">🚨문제 발생  </h1>
  <p><code class="language-plaintext highlighter-rouge">git fetch origin/main</code> 을 한 후<br />
<code class="language-plaintext highlighter-rouge">git push origin main</code>후 오류가 뜸<br />
<code class="language-plaintext highlighter-rouge">git status</code>을 하였더니 사진과 같은 오류</p>

  <ul>
    <li>사진 참고</li>
  </ul>
</blockquote>

<p><br />
<br /></p>

<p><img src="/assets/img/git-error/head-detached-at/1.PNG" alt="Desktop View" /></p>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br /></p>

<blockquote>
  <h1 id="내가-해결한-방법">🔑내가 해결한 방법</h1>
  <h4 id="저는-git-연습할-겸-빠른-해결법을-사용하지-않았습니다">(저는 git 연습할 겸 빠른 해결법을 사용하지 않았습니다)</h4>
</blockquote>

<p><br />
<br /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>git branch
</pre></td></tr></tbody></table></code></pre></div></div>
<p>깃 브랜치 보유상태 확인 명령어</p>

<p><img src="/assets/img/git-error/head-detached-at/3.PNG" alt="Desktop View" /></p>

<p><br />
<br />
<br />
<br />
<br /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>git branch joonhwan              <span class="o">(</span><span class="sb">`</span>준환<span class="sb">`</span> 브랜치 만들기<span class="o">)</span>  <span class="sb">`</span>준환<span class="sb">`</span> 브랜치가 없는 경우 가능 
git checkout joonhwan            <span class="o">(</span><span class="sb">`</span>준환<span class="sb">`</span>을 주요 브랜치로 쓰겠다<span class="o">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <h3 id="참고-ㅎ">참고 ㅎ</h3>
  <ul>
    <li>git checkout -b joonhwan <br />
준환을 주요 브랜치로 만들어 쓰겠다<br />
(준환 브랜치를 만들지 않은경우 가능)</li>
  </ul>
</blockquote>

<p><img src="/assets/img/git-error/head-detached-at/4.PNG" alt="Desktop View" /></p>

<p>이어서</p>

<p><br /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>git branch <span class="nt">-D</span> candy              <span class="o">(</span> candy 브랜치 제거<span class="o">)</span>
git branch <span class="nt">-D</span> water              <span class="o">(</span> water 브랜치 제거<span class="o">)</span>
git branch <span class="nt">-D</span> main               <span class="o">(</span> main 브랜치 제거<span class="o">)</span>
git branch <span class="nt">-m</span> joonhwan main      <span class="o">(</span>브랜치 joonhwan -&gt; main<span class="o">)</span>
git push origin main
</pre></td></tr></tbody></table></code></pre></div></div>
<h1 id="끝">끝</h1>

<h1 id="준환과-함께-깃-명령어-알아보러-가기"><a href="https://joonhwan2.github.io/posts/git-add/">준환과 함께 깃 명령어 알아보러 가기🤓</a></h1>

<p><br />
<br />
<br />
<br />
<br />
<br /></p>

<h2 id="보시고-미흡한-부분이-있다면-피드백은-언제나-환영합니다">보시고 미흡한 부분이 있다면 피드백은 언제나 환영합니다!</h2>

<p><br />
<br />
아래 사진을 클릭하면 <code class="language-plaintext highlighter-rouge">제 취미공간</code>으로 이어집니다 ㅎㅎ 여기에서 메모 및 일상을 기록하는데 놀러오실 분들은 언제나 환영합니다!</p>

<p><br /></p>

<h1 id="링크로-이동하려면-사진을-클릭">링크로 이동하려면 사진을 클릭</h1>

<p><a href="https://discord.gg/zkzk5xtm"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQk-zPB4TCuWRNJVIF0aWgniDPNJgUTdXmILg&amp;usqp=CAU" alt="어서오셔 ㅎ" /></a></p>

<p><br />
<br />
<br />
<br />
<br /></p>

<h1 id="참고">참고</h1>

<p>‘공대 아로마’    <a href="https://aroma-dev.tistory.com/4">git push가 안 될 때 / detached HEAD 문제 해결 방법</a></p>

<p><br /></p>]]></content><author><name></name></author><category term="etc" /><category term="error" /><category term="git error" /><summary type="html"><![CDATA[]]></summary></entry></feed>