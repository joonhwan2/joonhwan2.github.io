<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Node.js &amp; 네이버지도로 내 근처 약국들 찾기 2" /><meta property="og:locale" content="en" /><meta name="description" content="A minimal, responsive, and powerful Jekyll theme for presenting professional writing." /><meta property="og:description" content="A minimal, responsive, and powerful Jekyll theme for presenting professional writing." /><link rel="canonical" href="https://joonhwan2.github.io/posts/pharmacy-searching-with-navermap-api-2/" /><meta property="og:url" content="https://joonhwan2.github.io/posts/pharmacy-searching-with-navermap-api-2/" /><meta property="og:site_name" content="고준환" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-09-12T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Node.js &amp; 네이버지도로 내 근처 약국들 찾기 2" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-09-21T07:58:43+09:00","datePublished":"2022-09-12T00:00:00+09:00","description":"A minimal, responsive, and powerful Jekyll theme for presenting professional writing.","headline":"Node.js &amp; 네이버지도로 내 근처 약국들 찾기 2","mainEntityOfPage":{"@type":"WebPage","@id":"https://joonhwan2.github.io/posts/pharmacy-searching-with-navermap-api-2/"},"url":"https://joonhwan2.github.io/posts/pharmacy-searching-with-navermap-api-2/"}</script><title>Node.js & 네이버지도로 내 근처 약국들 찾기 2 | 고준환</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="고준환"><meta name="application-name" content="고준환"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/icon.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">고준환</a></div><div class="site-subtitle font-italic">어서오시게</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/joonhwan2" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['rhwnsghks97.gmail.com',''].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Node.js & 네이버지도로 내 근처 약국들 찾기 2</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4 pb-5"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Node.js & 네이버지도로 내 근처 약국들 찾기 2</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1662908400" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Sep 12, 2022 </em> </span> <span> Updated <em class="" data-ts="1663714723" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Sep 21, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/username">고준환 J.K</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="7884 words"> <em>43 min</em> read</span></div></div></div><div class="post-content"><p><br /> <br /> <br /></p><p>이제 index.html로 갑시다</p><div class="language-html highlighter-rouge"><div class="code-header"> <span data-label-text="HTML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>                $(document).ready(async function(){
                    let XY = await getLocation();

                    alert("위도" + XY.lat);
                    alert("경도" + XY.lng);
</pre></table></code></div></div><p>이 부분을 보면 document.ready 함수에서 문서가 document로 로드된 후 ready상태일 때<br /> 현재 위치를 가리키고 그걸 alert 경고창으로 띄우는 걸 나타냅니다 일단 <code class="language-plaintext highlighter-rouge">alert 2개 주석</code>처리합시다.</p><p>그 후 index.js의 이 경로로 접속되게 합시다 <code class="language-plaintext highlighter-rouge">/pharmach_list</code><br /> 이걸 위해 index.html로 돌아와 ajax를 사용합니다 즉 jquery</p><div class="language-html highlighter-rouge"><div class="code-header"> <span data-label-text="HTML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre>                    //지도를 삽입할 HTML 요소 또는 HTML 요소의 id를 지정합니다.
                    var mapDiv = document.getElementById('map'); // 'map'으로 선언해도 동일

                    //옵션 없이 지도 객체를 생성하면 서울 시청을 중심으로 하는 16 레벨의 지도가 생성됩니다.
                    var map = new naver.maps.Map(mapDiv);
                    $.ajax({
                        url: "/pharmach_list",
                        type: "GET",
                        cache: "false",
                        dataType: "json",
                        data: {"Q0": "서울특별시", "Q1": "강남구", "QT": "", "QN": "", "ORD": "", "pageNo": "1", "numOfRows": "1000"},
                        success: function(data) {
                            console.log(data);
                        },
                        error: function(request, status, error) {

                        }

                    });
</pre></table></code></div></div><ol><li>url은 경로<li>type에서 GET방식은 주석처리한 주소의 ?뒤의 값들을 눈에 보이게 하나하나 입력해줌, 그래서<br /> <code class="language-plaintext highlighter-rouge">/pharmach_list</code>를 정의할 때 app.get을 사용했음<li>데이터 값은 index.js에서 찾으면됨<li>에러는 3가지 변수를 받음</ol><p><br /> <br /> <br /></p><p>index.js 로 가서 수정합시다</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>                <span class="nx">params</span><span class="p">:</span> <span class="p">{</span>
                    <span class="dl">"</span><span class="s2">serviceKey</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">mL6hpE93V2cGEHnZNYbp2kbpZIm2IFyc9rhdh2wIaUseyjghN%2FlJSV7tSchmbL47mZsX8gNcLVtGpsTxQkstdA%3D%3D</span><span class="dl">"</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">Q0</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">Q0</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">Q1</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">Q1</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">QT</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">QT</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">QN</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">QN</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">ORD</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">ORD</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">pageNo</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">pageNo</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">numOfRows</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">numOfRows</span>
                <span class="p">}</span>
</pre></table></code></div></div><p><br /> <br /></p><p>이렇게 하면 index.html로 전달한 값이 nodejs로 갔다가 nodejs에서 다시 nodejs에서 api를 호출하여<br /> 원하는 값이 변환됩니다. index.html을 보면 나오지만 data변수의 값을 콘솔에 출력한 것을 통해<br /> 디버깅을 가능하게하여 매우 유용합니다.</p><p><br /> <br /> <br /> <br /> <br /> <br /></p><h2 id="여기까지-요약"><span class="mr-2">여기까지 요약</span><a href="#여기까지-요약" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><br /></p><p>우선 api 변수가 실행되고 나면 .then으로 들어와 Header에다가 cors를 잡는 오류를 넣었습니다,<br /> 그런데! response변수가 api내에서 실행되었는데 실제로 response를 return하는 부분은 바깥에 있기에</p><ul><li>return response를 알맞은 위치인 위쪽으로 보내줍시다.<li>response 선언한 부분 역시 api 선언문 안에 넣어줍시다<li>try catch문 역시 axios를 쓰는 위치로 바꿔줍시다</ul><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
</pre><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/pharmach_list</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>

        <span class="kd">let</span> <span class="nx">api</span> <span class="o">=</span> <span class="k">async</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">response</span> <span class="o">=</span> <span class="kc">null</span>
            
            <span class="k">try</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">http://apis.data.go.kr/B552657/ErmctInsttInfoInqireService/getParmacyListInfoInqire</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
                <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
                    <span class="dl">"</span><span class="s2">serviceKey</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">mL6hpE93V2cGEHnZNYbp2kbpZIm2IFyc9rhdh2wIaUseyjghN%2FlJSV7tSchmbL47mZsX8gNcLVtGpsTxQkstdA%3D%3D</span><span class="dl">"</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">Q0</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">Q0</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">Q1</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">Q1</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">QT</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">QT</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">QN</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">QN</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">ORD</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">ORD</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">pageNo</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">pageNo</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">numOfRows</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">numOfRows</span>
                <span class="p">}</span>
            <span class="p">})</span>
        <span class="p">}</span>






        <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
        <span class="p">}</span>





        

            <span class="k">return</span> <span class="nx">response</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">api</span><span class="p">().</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span>  <span class="p">{</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Access-Control-Allow-Origin</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">*</span><span class="dl">"</span><span class="p">)</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
        <span class="p">});</span>
<span class="p">});</span>
</pre></table></code></div></div><p><br /> <br /></p><p>그리고 req.query.Q0    req.query.Q1 이런것들은 프로그램 변수에 할당된 것들이라<br /> 바꿔줘야 할 것이 있습니다.<br /> 공공데이터포털 -&gt; 마이페이지<br /> 여기서 인증키가 (인코딩, 디코딩) 방식이 있습니다.<br /> url은 인코딩방식, 저희의 경우엔 디코딩 방식을 써야합니다. 이제 디코딩 키를 복사하여<br /> index.js에서 serviceKey 바꿔줍시다</p><p>그 후</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nx">node</span> <span class="nx">index</span><span class="p">.</span><span class="nx">js</span>
</pre></table></code></div></div><p>입력 후 localhost 들어가서 <code class="language-plaintext highlighter-rouge">F12</code> 누른 후 아래사진과 같이 순서대로 누르면 리스트가 쫙 나옵니다</p><p><img data-src="/assets/img/api/naver-map-api-pharmacy/15.png" alt="Desktop View" data-proofer-ignore></p><p><br /> <br /> <br /> <br /></p><p>자 이렇게 나오는 이유는 index.html을 보면 <code class="language-plaintext highlighter-rouge">/pharmach_list</code> 이 url이 제대로 실행되어 콘솔의 data결과물이<br /> console.log로 찍힌 것을 알 수 있습니다.</p><p><br /> <br /> <br /></p><p><img data-src="/assets/img/api/naver-map-api-pharmacy/16.png" alt="Desktop View" data-proofer-ignore></p><p><br /> <br /> <br /></p><p>여기서 코드를 조금 수정해봅시다 <br /> 약국 데이터를 받고난 후 지도가 뜨도록 수정해봅시다</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>                    <span class="c1">//지도를 삽입할 HTML 요소 또는 HTML 요소의 id를 지정합니다.</span>
                    <span class="kd">var</span> <span class="nx">mapDiv</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">map</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// 'map'으로 선언해도 동일</span>

                    <span class="c1">//옵션 없이 지도 객체를 생성하면 서울 시청을 중심으로 하는 16 레벨의 지도가 생성됩니다.</span>
                    <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nb">Map</span><span class="p">(</span><span class="nx">mapDiv</span><span class="p">);</span>
</pre></table></code></div></div><p><br /></p><p>이 코드를 ajax 코드 밑의 console.log(data); 아래에 옮겨줍시다<br /> <br /> 그 후 https://navermaps.github.io/maps.js/docs/tutorial-digest.example.html<br /> 이 주소로 와서 ‘지도 이동하기’를 찾읍시다<br /> 코드를 자세히 보면 위도경도값을 LatLng객체를 생성해 그것을 웹에 설정해주면<br /> panTo라는 명령으로 이동하고, 그리고 처음지도를 실행할 때 LatLng를 center라는 옵션을 주게되면<br /> 해당 설정된 경도, 위도로 웹이 이동됨.<br /> 그리고 그 곳에 이 코드를 복사하여 mapOptions변수를 만들고 아래에 붙입시다</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>    <span class="nx">center</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="mf">37.5666805</span><span class="p">,</span> <span class="mf">126.9784147</span><span class="p">),</span>
    <span class="nx">zoom</span><span class="p">:</span> <span class="mi">9</span>
</pre></table></code></div></div><p><br /> 그 후 아까 자리 옮겼던 2번째 변수의 끝에 mapOptions인자를 하나 더 넣은 것으로 수정함으로써<br /> 옵션에 있는 내용의 위도와 경도 값이 들어감. 그리고 숫자가 37.xxxxx 126.xxxx 인데 그 자리를<br /> <code class="language-plaintext highlighter-rouge">XY.lat</code> <code class="language-plaintext highlighter-rouge">XY.lng</code>로 바꿉시다.</p><p><br /> <br /> <br /></p><p>이제 localhost로 가보면 이렇게 나옵니다!</p><p><br /> <br /></p><p><img data-src="/assets/img/api/naver-map-api-pharmacy/17.png" alt="Desktop View" data-proofer-ignore></p><p><br /></p><p>여기까지의 <code class="language-plaintext highlighter-rouge">index.js</code> <code class="language-plaintext highlighter-rouge">index.html</code>코드를 보여드릴테니 잘 안된다면 무엇이 틀린건지 비교해보시길 바랍니다.</p><h2 id="indexjs"><span class="mr-2">index.js</span><a href="#indexjs" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
</pre><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">);</span>  
<span class="kd">let</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span> <span class="p">();</span>                                       
<span class="kd">let</span> <span class="nx">port</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">80</span><span class="p">;</span>                
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="dl">"</span><span class="s2">public_html</span><span class="dl">"</span><span class="p">));</span>                     

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span>                                  
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">HTML 서버 시작됨</span><span class="dl">"</span><span class="p">)</span>
<span class="p">})</span>

<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/pharmach_list</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>

        <span class="kd">let</span> <span class="nx">api</span> <span class="o">=</span> <span class="k">async</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">response</span> <span class="o">=</span> <span class="kc">null</span>
            
            <span class="k">try</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">http://apis.data.go.kr/B552657/ErmctInsttInfoInqireService/getParmacyListInfoInqire</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
                <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
                    <span class="dl">"</span><span class="s2">serviceKey</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">mL6hpE93V2cGEHnZNYbp2kbpZIm2IFyc9rhdh2wIaUseyjghN/lJSV7tSchmbL47mZsX8gNcLVtGpsTxQkstdA==</span><span class="dl">"</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">Q0</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">Q0</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">Q1</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">Q1</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">QT</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">QT</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">QN</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">QN</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">ORD</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">ORD</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">pageNo</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">pageNo</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">numOfRows</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">numOfRows</span>
                <span class="p">}</span>
            <span class="p">})</span>
        <span class="p">}</span>






        <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
        <span class="p">}</span>







            <span class="k">return</span> <span class="nx">response</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">api</span><span class="p">().</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span>  <span class="p">{</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Access-Control-Allow-Origin</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">*</span><span class="dl">"</span><span class="p">)</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
        <span class="p">});</span>
<span class="p">});</span>
<span class="c1">//  https://apis.data.go.kr/B552657/ErmctInsttInfoInqireService/getParmacyListInfoInqire?serviceKey=mL6hpE93V2cGEHnZNYbp2kbpZIm2IFyc9rhdh2wIaUseyjghN%2FlJSV7tSchmbL47mZsX8gNcLVtGpsTxQkstdA%3D%3D&amp;Q0=%EC%84%9C%EC%9A%B8%ED%8A%B9%EB%B3%84%EC%8B%9C&amp;Q1=%EA%B0%95%EB%82%A8%EA%B5%AC&amp;QT=1&amp;QN=%EC%82%BC%EC%84%B1%EC%95%BD%EA%B5%AD&amp;ORD=NAME&amp;pageNo=1&amp;numOfRows=10</span>
</pre></table></code></div></div><p><br /> <br /> <br /> <br /> <br /> <br /> <br /></p><h2 id="indexhtml"><span class="mr-2">index.html</span><a href="#indexhtml" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-html highlighter-rouge"><div class="code-header"> <span data-label-text="HTML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
</pre><td class="rouge-code"><pre><span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>     
        <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=아이디 &amp;amp;submodules=geocoder"</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://code.jquery.com/jquery-3.6.1.min.js"</span> <span class="na">integrity=</span><span class="s">"sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="</span> <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;/head&gt;</span>    
        <span class="nt">&lt;body&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"margin-top: 20px; margin-bottom: 10px; font-weight: bold;"</span><span class="nt">&gt;</span>
                약국 지도💊
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"map"</span> <span class="na">style=</span><span class="s">"width:100%; height:80%"</span><span class="nt">&gt;</span>

            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/body&gt;</span>
            <span class="nt">&lt;script&gt;</span>
                <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="k">async</span> <span class="kd">function</span><span class="p">(){</span>
                    <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getLocation</span><span class="p">();</span>

                    <span class="c1">//alert("위도" + XY.lat);</span>
                    <span class="c1">//alert("경도" + XY.lng);</span>

                    <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
                        <span class="na">url</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/pharmach_list</span><span class="dl">"</span><span class="p">,</span>
                        <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>   <span class="c1">// GET을 통해 밑에 주석처리한 api url 부분 ?뒤부터 눈에 보이게끔 값들을 하나하나 입력해줌</span>
                        <span class="na">cache</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">//cache는 쓰지 않을거라 false</span>
                        <span class="na">dataType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>    <span class="c1">//dataType은 json으로 받겠다</span>
                        <span class="na">data</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">Q0</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">서울특별시</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Q1</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">강남구</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">QT</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">QN</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ORD</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">pageNo</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">numOfRows</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1000</span><span class="dl">"</span><span class="p">},</span>   
                        <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>

                            <span class="kd">var</span> <span class="nx">mapOptions</span> <span class="o">=</span> <span class="p">{</span>
                                <span class="na">center</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">),</span>
                                <span class="na">zoom</span><span class="p">:</span> <span class="mi">9</span>
                            <span class="p">}</span>

                                                        <span class="c1">//지도를 삽입할 HTML 요소 또는 HTML 요소의 id를 지정합니다.</span>
                            <span class="kd">var</span> <span class="nx">mapDiv</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">map</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// 'map'으로 선언해도 동일</span>

                            <span class="c1">//옵션 없이 지도 객체를 생성하면 서울 시청을 중심으로 하는 16 레벨의 지도가 생성됩니다.</span>
                            <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nb">Map</span><span class="p">(</span><span class="nx">mapDiv</span><span class="p">,</span> <span class="nx">mapOptions</span><span class="p">);</span>

                        <span class="p">},</span>
                        <span class="na">error</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span> <span class="p">{</span>

                        <span class="p">}</span>

                    <span class="p">});</span>
                <span class="p">});</span>
                
                <span class="k">async</span>  <span class="kd">function</span> <span class="nx">getLocation</span><span class="p">()</span> <span class="p">{</span>
                    <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>
                    <span class="k">if</span><span class="p">(</span><span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">)</span> <span class="p">{</span>

                        <span class="kd">let</span> <span class="nx">promise</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">rejected</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                            <span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">.</span><span class="nx">getCurrentPosition</span><span class="p">((</span><span class="nx">position</span><span class="p">)</span> <span class="o">=&gt;</span><span class="p">{</span>
                                <span class="nx">resolve</span><span class="p">(</span><span class="nx">position</span><span class="p">);</span>
                            <span class="p">});</span>
                        <span class="p">});</span>

                        <span class="kd">let</span> <span class="nx">position</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">promise</span><span class="p">;</span>
                        
                        <span class="c1">//위도 position.coords.latitude</span>
                        <span class="c1">//경도 position.coords.longitude</span>
                        <span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">latitude</span><span class="p">;</span>
                        <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">longitude</span><span class="p">;</span>
                           
                    <span class="p">}</span>
                    <span class="k">return</span> <span class="nx">XY</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></table></code></div></div><p>자, <code class="language-plaintext highlighter-rouge">index.html</code>의 zoom: 9 —&gt; 14로 바꾸어봅시다 그러면 더 가까운 위치로 보이게 될 것입니다.<br /> 근데 아직 제일 중요한 제 위치 근처로 약국데이터들을 받아오지 못했습니다.<br /> 현재 위도와 경도만 받아왔는데 이제 위도와 경도의 주소를 가지고오는 역할의 함수가 필요합니다.</p><p><br /></p><p>https://navermaps.github.io/maps.js/docs/tutorial-digest.example.html –&gt; 아래쪽에 보면 <code class="language-plaintext highlighter-rouge">주소와 좌표 검색하기 API</code> 클릭<br /> 여길 보면 reverseGeocode api가 있는데 이를 사용시 위도, 경도 -&gt; 주소로 변환 <br /></p><p>이제 <code class="language-plaintext highlighter-rouge">index.html</code>로 돌아가서 ajax 위에 적어줍시다 naver reverseGeocode 불러주려면 submodule이 geocoder여야 가능하다<br /> 참고로 reverseGeocode는 비동기형이다 그래서 await를 적어주고 인자를 적기위해 대괄호 추가하겠습니다.<br /> LatLng 객체를 만들어 주기 위해 함수를 넣고 첫번째 인자와 두번째 인자를 넣어줍시다<br /> 그리고 두번째 인자를 function형태로 받습니다 그리고 받을 때 status라는 변수와 response라는 변수로 받겠습니다.<br /> 그리고 response.result에는 결과값을 받겠습니다. 그리고 그 변수를 result로 선언해줍니다, 그리고 그 밑에 result.items라고 하면<br /> items 변수가 담깁니다. items변수도 선언하겠습니다 그리고 시도와 시구군 값이 제대로 있는지 콘솔로 찍어봅시다.<br /> 완성된 코드는 아래와 같습니다.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre>                <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="k">async</span> <span class="kd">function</span><span class="p">(){</span>
                    <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getLocation</span><span class="p">();</span>

                    <span class="c1">//alert("위도" + XY.lat);</span>
                    <span class="c1">//alert("경도" + XY.lng);</span>

                    <span class="k">await</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Service</span><span class="p">.</span><span class="nx">reverseGeocode</span><span class="p">({</span>
                        <span class="na">location</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">)</span>
                    <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">status</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
                        <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
                        <span class="kd">let</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">items</span><span class="p">;</span>
                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addrdetail</span><span class="p">.</span><span class="nx">sido</span><span class="p">);</span> <span class="c1">// 시도값</span>
                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addrdetail</span><span class="p">.</span><span class="nx">sigugun</span><span class="p">);</span> <span class="c1">// 시구군</span>


                    <span class="p">});</span>

                    <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
</pre></table></code></div></div><p>여기까지하고 localhost에서 F12 -&gt;</p><p><br /> <br /></p><p><img data-src="/assets/img/api/naver-map-api-pharmacy/18.png" alt="Desktop View" data-proofer-ignore></p><p><br /> <br /> <br /> <br /></p><p>오 시도, 시군에 콘솔로그 해준 내용이 잘 나오군요!</p><p><br /> <br /> <br /></p><p>공공데이터포털 -&gt; 마이페이지, 잠깐 사진을 봅시다, 공백을 허용하지않군요.</p><p><br /> <br /> <br /> <br /></p><p><img data-src="/assets/img/api/naver-map-api-pharmacy/19.png" alt="Desktop View" data-proofer-ignore></p><p><br /> <br /> <br /></p><p>이제 <code class="language-plaintext highlighter-rouge">경상북도 xx시</code>, <code class="language-plaintext highlighter-rouge">경상남도 xx시</code>로 나누어지는 경우를 생각해봅시다. 공백을 제거하기 위해<br /> index.html의 시도, 시구군 함수 수정합시다, 일단 2개 주석처리</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre><td class="rouge-code"><pre>                <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="k">async</span> <span class="kd">function</span><span class="p">(){</span>
                    <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getLocation</span><span class="p">();</span>

                    <span class="c1">//alert("위도" + XY.lat);</span>
                    <span class="c1">//alert("경도" + XY.lng);</span>

                    <span class="k">await</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Service</span><span class="p">.</span><span class="nx">reverseGeocode</span><span class="p">({</span>
                        <span class="na">location</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">)</span>
                    <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">status</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
                        <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
                        <span class="kd">let</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">items</span><span class="p">;</span>
                        <span class="c1">//console.log(items[0].addrdetail.sido); // 시도값</span>
                        <span class="c1">//console.log(items[0].addrdetail.sigugun); // 시구군</span>
                        <span class="kd">let</span> <span class="nx">sido_arr</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addrdetail</span><span class="p">.</span><span class="nx">sido</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">);</span>
                        <span class="kd">let</span> <span class="nx">gubun_arr</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addrdetail</span><span class="p">.</span><span class="nx">sigugun</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">);</span>

                        <span class="kd">let</span> <span class="nx">sido</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
                        <span class="kd">let</span> <span class="nx">gubun</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
                        <span class="k">if</span><span class="p">(</span><span class="nx">sido_arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">sido</span> <span class="o">=</span> <span class="nx">sido_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                            <span class="nx">gugun</span> <span class="o">=</span> <span class="nx">gubun_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">sido_arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">sido</span> <span class="o">=</span> <span class="nx">sido_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                            <span class="nx">gugun</span> <span class="o">=</span> <span class="nx">gubun_arr</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
                        <span class="p">}</span>
                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sido</span><span class="p">);</span>
                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">gugun</span><span class="p">);</span>
                    <span class="p">});</span>
</pre></table></code></div></div><p>이렇게되면 2개의 요소를 가진 배열이 되어, 한줄에 있던 <code class="language-plaintext highlighter-rouge">경상남도 xx시</code><br /> –&gt;<br /> <code class="language-plaintext highlighter-rouge">경상남도</code><br /> <code class="language-plaintext highlighter-rouge">xx시</code></p><p><br /></p><p>그리고 새롭게 편집될 변수도 미리 정의해줍시다.<br /> 만약 시도가 1이라는 것은 <code class="language-plaintext highlighter-rouge">서울특별시</code> 처럼 한큐에 끝날때 시도와 구군의 첫번째 요소가됨,<br /> 만약 그렇지 않고 시도 어레이가 1보다 클때, 즉 공백이 하나 있을때 ex) <code class="language-plaintext highlighter-rouge">경상남도 xx시</code> 그때 시도 어래이는 0, 그러나 구군 어레이는 첫번째 인자인 1을 적어주게 되면<br /> 시도와 구군이 공백이 제거된 상태로 만들어짐<br /> 이제 값이 제대로 잘 적혀있는지 콘솔로 시도, 구군을 확인해봅시다</p><p><br /> <br /></p><p><img data-src="/assets/img/api/naver-map-api-pharmacy/20.png" alt="Desktop View" data-proofer-ignore></p><p><br /> <br /></p><p>오 잘 나오군요!<br /> 이제 index.html로 가서 Q0에는 sido변수를, Q1에는 gugun변수를 넣어줍시다\</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>                    <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
                        <span class="na">url</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/pharmach_list</span><span class="dl">"</span><span class="p">,</span>
                        <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>   <span class="c1">// GET을 통해 밑에 주석처리한 api url 부분 ?뒤부터 눈에 보이게끔 값들을 하나하나 입력해줌</span>
                        <span class="na">cache</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">//cache는 쓰지 않을거라 false</span>
                        <span class="na">dataType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>    <span class="c1">//dataType은 json으로 받겠다</span>
                        <span class="na">data</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">Q0</span><span class="dl">"</span><span class="p">:</span> <span class="nx">sido</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Q1</span><span class="dl">"</span><span class="p">:</span> <span class="nx">gugun</span><span class="p">,</span> <span class="dl">"</span><span class="s2">QT</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">QN</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ORD</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">pageNo</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">numOfRows</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1000</span><span class="dl">"</span><span class="p">},</span>
</pre></table></code></div></div><p>그리고 이부분 역시 비동기이기 때문에 ajax구문 위치를 옮깁시다.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sido</span><span class="p">);</span>
                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">gugun</span><span class="p">);</span>
</pre></table></code></div></div><p><br /> <br /> <br /></p><p>이곳 아래에 배치합시다, 여기까지의 index.html 코드는 이렇게 됩니다</p><p><br /> <br /> <br /></p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
</pre><td class="rouge-code"><pre>                <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="k">async</span> <span class="kd">function</span><span class="p">(){</span>
                    <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getLocation</span><span class="p">();</span>

                    <span class="c1">//alert("위도" + XY.lat);</span>
                    <span class="c1">//alert("경도" + XY.lng);</span>

                    <span class="k">await</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Service</span><span class="p">.</span><span class="nx">reverseGeocode</span><span class="p">({</span>
                        <span class="na">location</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">)</span>
                    <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">status</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
                        <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
                        <span class="kd">let</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">items</span><span class="p">;</span>
                        <span class="c1">//console.log(items[0].addrdetail.sido); // 시도값</span>
                        <span class="c1">//console.log(items[0].addrdetail.sigugun); // 시구군</span>
                        <span class="kd">let</span> <span class="nx">sido_arr</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addrdetail</span><span class="p">.</span><span class="nx">sido</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">);</span>
                        <span class="kd">let</span> <span class="nx">gubun_arr</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addrdetail</span><span class="p">.</span><span class="nx">sigugun</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">);</span>

                        <span class="kd">let</span> <span class="nx">sido</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
                        <span class="kd">let</span> <span class="nx">gubun</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
                        <span class="k">if</span><span class="p">(</span><span class="nx">sido_arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">sido</span> <span class="o">=</span> <span class="nx">sido_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                            <span class="nx">gugun</span> <span class="o">=</span> <span class="nx">gubun_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">sido_arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">sido</span> <span class="o">=</span> <span class="nx">sido_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                            <span class="nx">gugun</span> <span class="o">=</span> <span class="nx">gubun_arr</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
                        <span class="p">}</span>
                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sido</span><span class="p">);</span>
                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">gugun</span><span class="p">);</span>

                        <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
                            <span class="na">url</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/pharmach_list</span><span class="dl">"</span><span class="p">,</span>
                            <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>   <span class="c1">// GET을 통해 밑에 주석처리한 api url 부분 ?뒤부터 눈에 보이게끔 값들을 하나하나 입력해줌</span>
                            <span class="na">cache</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">//cache는 쓰지 않을거라 false</span>
                            <span class="na">dataType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>    <span class="c1">//dataType은 json으로 받겠다</span>
                            <span class="na">data</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">Q0</span><span class="dl">"</span><span class="p">:</span> <span class="nx">sido</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Q1</span><span class="dl">"</span><span class="p">:</span> <span class="nx">gugun</span><span class="p">,</span> <span class="dl">"</span><span class="s2">QT</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">QN</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ORD</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">pageNo</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">numOfRows</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1000</span><span class="dl">"</span><span class="p">},</span>   
                            <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    
                                <span class="kd">var</span> <span class="nx">mapOptions</span> <span class="o">=</span> <span class="p">{</span>
                                    <span class="na">center</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">),</span>
                                    <span class="na">zoom</span><span class="p">:</span> <span class="mi">14</span>
                                <span class="p">}</span>
    
                                                            <span class="c1">//지도를 삽입할 HTML 요소 또는 HTML 요소의 id를 지정합니다.</span>
                                <span class="kd">var</span> <span class="nx">mapDiv</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">map</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// 'map'으로 선언해도 동일</span>
    
                                <span class="c1">//옵션 없이 지도 객체를 생성하면 서울 시청을 중심으로 하는 16 레벨의 지도가 생성됩니다.</span>
                                <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nb">Map</span><span class="p">(</span><span class="nx">mapDiv</span><span class="p">,</span> <span class="nx">mapOptions</span><span class="p">);</span>
    
                            <span class="p">},</span>
                            <span class="na">error</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    
                            <span class="p">}</span>
    
                        <span class="p">});</span>
                        
                    <span class="p">});</span>

                <span class="p">});</span>
                
                <span class="k">async</span>  <span class="kd">function</span> <span class="nx">getLocation</span><span class="p">()</span> <span class="p">{</span>
                    <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>
                    <span class="k">if</span><span class="p">(</span><span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">)</span> <span class="p">{</span>

                        <span class="kd">let</span> <span class="nx">promise</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">rejected</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                            <span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">.</span><span class="nx">getCurrentPosition</span><span class="p">((</span><span class="nx">position</span><span class="p">)</span> <span class="o">=&gt;</span><span class="p">{</span>
                                <span class="nx">resolve</span><span class="p">(</span><span class="nx">position</span><span class="p">);</span>
                            <span class="p">});</span>
                        <span class="p">});</span>

                        <span class="kd">let</span> <span class="nx">position</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">promise</span><span class="p">;</span>
                        
                        <span class="c1">//위도 position.coords.latitude</span>
                        <span class="c1">//경도 position.coords.longitude</span>
                        <span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">latitude</span><span class="p">;</span>
                        <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">longitude</span><span class="p">;</span>
                           
                    <span class="p">}</span>
                    <span class="k">return</span> <span class="nx">XY</span><span class="p">;</span>
                <span class="p">}</span>
</pre></table></code></div></div><p><br /> <br /> <br /></p><p>그리고 강력 새로고침을 해보면 빠밤</p><p><br /> <br /> <br /></p><p><img data-src="/assets/img/api/naver-map-api-pharmacy/21.png" alt="Desktop View" data-proofer-ignore></p><p><br /> <br /> <br /></p><h2 id="마지막으로-약국이-지도에-보이게-하는-작업만-남았습니다"><span class="mr-2">마지막으로 약국이 지도에 보이게 하는 작업만 남았습니다.\</span><a href="#마지막으로-약국이-지도에-보이게-하는-작업만-남았습니다" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>https://navermaps.github.io/maps.js/docs/tutorial-digest.example.html<br /> –&gt; 중간에 <code class="language-plaintext highlighter-rouge">정보창</code> 있는 곳에 <code class="language-plaintext highlighter-rouge">정보 창 옵션 사용하기</code> 클릭<br /> 푸른 아이콘 클릭시 그곳의 정보를 보여주는 역할 수행합니다.</p><p><br /></p><p>잠깐 localhost에서 F12 -&gt; console -&gt; items 클릭<br /> 그러면 아래와 같은 사진들이 보일 것입니다 <br /></p><p><img data-src="/assets/img/api/naver-map-api-pharmacy/22.png" alt="Desktop View" data-proofer-ignore></p><p><br /> <br /></p><p>총 81개의 각 배열들이 있고 제가 있는 곳은 아마 큰 번화가가 아니라 약국갯수가 이런데 다른 번화가가면 몇백개 나올 수도 있습니다.<br /> 복수형으로 만들어주어야하기 때문에 하나하나 엑세스하기 위해 반복문인 forEach 받읍시다, 첫번째인자로 it, 두번째 인자로 index<br /> 이 it변수에는 item 배열에 있는 81개가 각각 it변수에 담깁니다.<br /> function 영역은 81개 전체 배열갯수만큼 반복해서 실행되는 영역</p><p><br /></p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span>
</pre></table></code></div></div><p>이 곳 아래에 적어줍시다</p><p>이제 각 dutyName dutyAddr dutyTel1 dutyTime으로 변수 받읍시다<br /> 그리고 https://navermaps.github.io/maps.js/docs/tutorial-infowindow-options.example.html<br /> 이곳에서 marker부터 끝까지 복사하여 그 아래에 붙여넣기, 그리고 marker는 let 변수로 선언해줍시다.<br /> 이제 index.html을 보면 마커가 표시될 위치(position)이 있는데 position이 cityhall이라는 변수로 되있음<br /> 예제를 보면 cityhall이 있는 내용이 있습니다 그 부분 복사하여 dutyTime 아래에 넣읍시다. 근데 우리는 약국을 하니까<br /> let cityhall –&gt; let pharmacy_location 바꿔줍시다 그리고 position도 바꿔주고 아래에\</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">contentString</span> <span class="o">=</span> <span class="p">[</span>
<span class="o">---</span>
<span class="o">---</span>
<span class="o">---</span>
<span class="p">]</span>
</pre></table></code></div></div><p>—&gt;</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>                                    <span class="kd">var</span> <span class="nx">contentString</span> <span class="o">=</span> <span class="p">[</span>
                                            <span class="dl">'</span><span class="s1">&lt;div class="iw_inner"&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">   &lt;h3&gt;</span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyName</span><span class="o">+</span><span class="dl">'</span><span class="s1">&lt;/h3&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">   &lt;p&gt;</span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyAddr</span><span class="o">+</span><span class="dl">'</span><span class="s1">&lt;br /&gt;</span><span class="dl">'</span><span class="p">,</span> 
                                            <span class="dl">'</span><span class="s1">       </span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyTel1</span><span class="o">+</span><span class="dl">'</span><span class="s1">&lt;br /&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">       </span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyTime</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">   &lt;/p&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">&lt;/div&gt;</span><span class="dl">'</span>
                                        <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
</pre></table></code></div></div><p>참 이곳에 img src 한줄 지웁시다 우린 사진이 필요없으니</p><p><br /> <br /> <br /></p><p>그리고 localhost에서 F12를 누릅시다</p><p><br /> <br /></p><p><img data-src="/assets/img/api/naver-map-api-pharmacy/23.png" alt="Desktop View" data-proofer-ignore></p><p><br /> <br /></p><p>사진에 보면 행으로 번호가 0~16으로 있는데 이중에 아무거나 누르면 자세한 정보가 나오는데 그 안에 이 2개가 있을겁니다 <code class="language-plaintext highlighter-rouge">wgs84Lat</code> <code class="language-plaintext highlighter-rouge">wgs84Lon</code> 그거를 37.xxx 126.xxx 대신에 앞에 it.을 붙여 합쳐서 각각 고칩시다</p><p><br /> <br /> <br /></p><p>여기까지의 index.html 코드는 이렇습니다.</p><div class="language-html highlighter-rouge"><div class="code-header"> <span data-label-text="HTML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
</pre><td class="rouge-code"><pre><span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>     
        <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=b3cui5r9yl&amp;amp;submodules=geocoder"</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://code.jquery.com/jquery-3.6.1.min.js"</span> <span class="na">integrity=</span><span class="s">"sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="</span> <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;/head&gt;</span>    
        <span class="nt">&lt;body&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"margin-top: 20px; margin-bottom: 10px; font-weight: bold;"</span><span class="nt">&gt;</span>
                약국 지도💊
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"map"</span> <span class="na">style=</span><span class="s">"width:100%; height:80%"</span><span class="nt">&gt;</span>

            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/body&gt;</span>
            <span class="nt">&lt;script&gt;</span>
                <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="k">async</span> <span class="kd">function</span><span class="p">(){</span>
                    <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getLocation</span><span class="p">();</span>

                    <span class="c1">//alert("위도" + XY.lat);</span>
                    <span class="c1">//alert("경도" + XY.lng);</span>

                    <span class="k">await</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Service</span><span class="p">.</span><span class="nx">reverseGeocode</span><span class="p">({</span>
                        <span class="na">location</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">)</span>
                    <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">status</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
                        <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
                        <span class="kd">let</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">items</span><span class="p">;</span>
                        <span class="c1">//console.log(items[0].addrdetail.sido); // 시도값</span>
                        <span class="c1">//console.log(items[0].addrdetail.sigugun); // 시구군</span>
                        <span class="kd">let</span> <span class="nx">sido_arr</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addrdetail</span><span class="p">.</span><span class="nx">sido</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">);</span>
                        <span class="kd">let</span> <span class="nx">gubun_arr</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addrdetail</span><span class="p">.</span><span class="nx">sigugun</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">);</span>

                        <span class="kd">let</span> <span class="nx">sido</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
                        <span class="kd">let</span> <span class="nx">gubun</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
                        <span class="k">if</span><span class="p">(</span><span class="nx">sido_arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">sido</span> <span class="o">=</span> <span class="nx">sido_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                            <span class="nx">gugun</span> <span class="o">=</span> <span class="nx">gubun_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">sido_arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">sido</span> <span class="o">=</span> <span class="nx">sido_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                            <span class="nx">gugun</span> <span class="o">=</span> <span class="nx">gubun_arr</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
                        <span class="p">}</span>
                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sido</span><span class="p">);</span>
                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">gugun</span><span class="p">);</span>

                        <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
                            <span class="na">url</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/pharmach_list</span><span class="dl">"</span><span class="p">,</span>
                            <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>   <span class="c1">// GET을 통해 밑에 주석처리한 api url 부분 ?뒤부터 눈에 보이게끔 값들을 하나하나 입력해줌</span>
                            <span class="na">cache</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">//cache는 쓰지 않을거라 false</span>
                            <span class="na">dataType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>    <span class="c1">//dataType은 json으로 받겠다</span>
                            <span class="na">data</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">Q0</span><span class="dl">"</span><span class="p">:</span> <span class="nx">sido</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Q1</span><span class="dl">"</span><span class="p">:</span> <span class="nx">gugun</span><span class="p">,</span> <span class="dl">"</span><span class="s2">QT</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">QN</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ORD</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">pageNo</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">numOfRows</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1000</span><span class="dl">"</span><span class="p">},</span>   
                            <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    
                                <span class="kd">var</span> <span class="nx">mapOptions</span> <span class="o">=</span> <span class="p">{</span>
                                    <span class="na">center</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">),</span>
                                    <span class="na">zoom</span><span class="p">:</span> <span class="mi">14</span>
                                <span class="p">}</span>
    
                                                            <span class="c1">//지도를 삽입할 HTML 요소 또는 HTML 요소의 id를 지정합니다.</span>
                                <span class="kd">var</span> <span class="nx">mapDiv</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">map</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// 'map'으로 선언해도 동일</span>
    
                                <span class="c1">//옵션 없이 지도 객체를 생성하면 서울 시청을 중심으로 하는 16 레벨의 지도가 생성됩니다.</span>
                                <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nb">Map</span><span class="p">(</span><span class="nx">mapDiv</span><span class="p">,</span> <span class="nx">mapOptions</span><span class="p">);</span>
                                
                                <span class="nx">data</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">it</span><span class="p">,</span> <span class="nx">index</span><span class="p">){</span>
                                    <span class="kd">let</span> <span class="nx">dutyName</span> <span class="o">=</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyName</span><span class="p">;</span> <span class="c1">//약국명</span>
                                    <span class="kd">let</span> <span class="nx">dutyAddr</span> <span class="o">=</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyAddr</span><span class="p">;</span> <span class="c1">//주소</span>
                                    <span class="kd">let</span> <span class="nx">dutyTel1</span> <span class="o">=</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTel1</span><span class="p">;</span> <span class="c1">//전번</span>

                                    <span class="kd">let</span> <span class="nx">dutyTime</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span> <span class="c1">//업무시간</span>

                                    <span class="kd">let</span> <span class="nx">pharmacy_location</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">wgs84Lat</span><span class="p">,</span> <span class="nx">it</span><span class="p">.</span><span class="nx">wgs84Lon</span><span class="p">)</span>


                                    
                                    <span class="kd">let</span> <span class="nx">marker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Marker</span><span class="p">({</span>
                                        <span class="na">map</span><span class="p">:</span> <span class="nx">map</span><span class="p">,</span>
                                        <span class="na">position</span><span class="p">:</span> <span class="nx">pharmacy_location</span>
                                    <span class="p">});</span>
                                
                                    <span class="kd">var</span> <span class="nx">contentString</span> <span class="o">=</span> <span class="p">[</span>
                                            <span class="dl">'</span><span class="s1">&lt;div class="iw_inner"&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">   &lt;h3&gt;</span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyName</span><span class="o">+</span><span class="dl">'</span><span class="s1">&lt;/h3&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">   &lt;p&gt;</span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyAddr</span><span class="o">+</span><span class="dl">'</span><span class="s1">&lt;br /&gt;</span><span class="dl">'</span><span class="p">,</span> 
                                            <span class="dl">'</span><span class="s1">       </span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyTel1</span><span class="o">+</span><span class="dl">'</span><span class="s1">&lt;br /&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">       </span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyTime</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">   &lt;/p&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">&lt;/div&gt;</span><span class="dl">'</span>
                                        <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
                                        
                                        <span class="kd">var</span> <span class="nx">infowindow</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">InfoWindow</span><span class="p">({</span>
                                            <span class="na">content</span><span class="p">:</span> <span class="nx">contentString</span><span class="p">,</span>
                                            <span class="na">maxWidth</span><span class="p">:</span> <span class="mi">140</span><span class="p">,</span>
                                            <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#eee</span><span class="dl">"</span><span class="p">,</span>
                                            <span class="na">borderColor</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#2db400</span><span class="dl">"</span><span class="p">,</span>
                                            <span class="na">borderWidth</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                                            <span class="na">anchorSize</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Size</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
                                            <span class="na">anchorSkew</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                                            <span class="na">anchorColor</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#eee</span><span class="dl">"</span><span class="p">,</span>
                                            <span class="na">pixelOffset</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="o">-</span><span class="mi">20</span><span class="p">)</span>
                                        <span class="p">});</span>
                                        
                                <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Event</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="nx">marker</span><span class="p">,</span> <span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="nx">infowindow</span><span class="p">.</span><span class="nx">getMap</span><span class="p">())</span> <span class="p">{</span>
                                        <span class="nx">infowindow</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
                                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                                        <span class="nx">infowindow</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">map</span><span class="p">,</span> <span class="nx">marker</span><span class="p">);</span>
                                    <span class="p">}</span>
                                <span class="p">});</span>






                                <span class="p">});</span> 

                            <span class="p">},</span>
                            <span class="na">error</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    
                            <span class="p">}</span>
    
                        <span class="p">});</span>
                        
                    <span class="p">});</span>

                <span class="p">});</span>
                
                <span class="k">async</span>  <span class="kd">function</span> <span class="nx">getLocation</span><span class="p">()</span> <span class="p">{</span>
                    <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>
                    <span class="k">if</span><span class="p">(</span><span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">)</span> <span class="p">{</span>

                        <span class="kd">let</span> <span class="nx">promise</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">rejected</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                            <span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">.</span><span class="nx">getCurrentPosition</span><span class="p">((</span><span class="nx">position</span><span class="p">)</span> <span class="o">=&gt;</span><span class="p">{</span>
                                <span class="nx">resolve</span><span class="p">(</span><span class="nx">position</span><span class="p">);</span>
                            <span class="p">});</span>
                        <span class="p">});</span>

                        <span class="kd">let</span> <span class="nx">position</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">promise</span><span class="p">;</span>
                        
                        <span class="c1">//위도 position.coords.latitude</span>
                        <span class="c1">//경도 position.coords.longitude</span>
                        <span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">latitude</span><span class="p">;</span>
                        <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">longitude</span><span class="p">;</span>
                           
                    <span class="p">}</span>
                    <span class="k">return</span> <span class="nx">XY</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></table></code></div></div><p>그리고 localhost에서 강력 새로고침하여 확인해보면</p><p><br /></p><p><img data-src="/assets/img/api/naver-map-api-pharmacy/24.png" alt="Desktop View" data-proofer-ignore></p><p><br /></p><p>약국은 잘 뜨는데 보이는 폭이 좁아서 글자가 좀 잘리는 것 같군요.<br /> 폭 maxWidth 140 -&gt; 440으로 고칩시다 그리고 요일별 영업시간 번호 등 추가해줍시다.</p><p><br /></p><p>오 이제 잘나옵니다!</p><p><br /> <br /> <br /></p><p><img data-src="/assets/img/api/naver-map-api-pharmacy/25.png" alt="Desktop View" data-proofer-ignore></p><p><br /> <br /> <br /> <br /> <br /> <br /> <br /></p><p>여기까지의 <code class="language-plaintext highlighter-rouge">index.html</code>와 <code class="language-plaintext highlighter-rouge">index.js</code> 코드를 공개할테니 잘 안되시는 분들은 비교해보시고 수정해보세요ㅎ</p><p><br /> <br /> <br /></p><h2 id="indexhtml-1"><span class="mr-2">index.html</span><a href="#indexhtml-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-html highlighter-rouge"><div class="code-header"> <span data-label-text="HTML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
</pre><td class="rouge-code"><pre><span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>     
        <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=아이디 &amp;amp;submodules=geocoder"</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://code.jquery.com/jquery-3.6.1.min.js"</span> <span class="na">integrity=</span><span class="s">"sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="</span> <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;/head&gt;</span>    
        <span class="nt">&lt;body&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"margin-top: 20px; margin-bottom: 10px; font-weight: bold;"</span><span class="nt">&gt;</span>
                약국 지도💊
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"map"</span> <span class="na">style=</span><span class="s">"width:100%; height:80%"</span><span class="nt">&gt;</span>

            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/body&gt;</span>
            <span class="nt">&lt;script&gt;</span>
                <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="k">async</span> <span class="kd">function</span><span class="p">(){</span>
                    <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getLocation</span><span class="p">();</span>

                    <span class="c1">//alert("위도" + XY.lat);</span>
                    <span class="c1">//alert("경도" + XY.lng);</span>

                    <span class="k">await</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Service</span><span class="p">.</span><span class="nx">reverseGeocode</span><span class="p">({</span>
                        <span class="na">location</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">)</span>
                    <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">status</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
                        <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
                        <span class="kd">let</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">items</span><span class="p">;</span>
                        <span class="c1">//console.log(items[0].addrdetail.sido); // 시도값</span>
                        <span class="c1">//console.log(items[0].addrdetail.sigugun); // 시구군</span>
                        <span class="kd">let</span> <span class="nx">sido_arr</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addrdetail</span><span class="p">.</span><span class="nx">sido</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">);</span>
                        <span class="kd">let</span> <span class="nx">gubun_arr</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addrdetail</span><span class="p">.</span><span class="nx">sigugun</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">);</span>

                        <span class="kd">let</span> <span class="nx">sido</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
                        <span class="kd">let</span> <span class="nx">gubun</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
                        <span class="k">if</span><span class="p">(</span><span class="nx">sido_arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">sido</span> <span class="o">=</span> <span class="nx">sido_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                            <span class="nx">gugun</span> <span class="o">=</span> <span class="nx">gubun_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">sido_arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">sido</span> <span class="o">=</span> <span class="nx">sido_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                            <span class="nx">gugun</span> <span class="o">=</span> <span class="nx">gubun_arr</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
                        <span class="p">}</span>
                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sido</span><span class="p">);</span>
                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">gugun</span><span class="p">);</span>

                        <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
                            <span class="na">url</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/pharmach_list</span><span class="dl">"</span><span class="p">,</span>
                            <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>   <span class="c1">// GET을 통해 밑에 주석처리한 api url 부분 ?뒤부터 눈에 보이게끔 값들을 하나하나 입력해줌</span>
                            <span class="na">cache</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">//cache는 쓰지 않을거라 false</span>
                            <span class="na">dataType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>    <span class="c1">//dataType은 json으로 받겠다</span>
                            <span class="na">data</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">Q0</span><span class="dl">"</span><span class="p">:</span> <span class="nx">sido</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Q1</span><span class="dl">"</span><span class="p">:</span> <span class="nx">gugun</span><span class="p">,</span> <span class="dl">"</span><span class="s2">QT</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">QN</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ORD</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">pageNo</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">numOfRows</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1000</span><span class="dl">"</span><span class="p">},</span>   
                            <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    
                                <span class="kd">var</span> <span class="nx">mapOptions</span> <span class="o">=</span> <span class="p">{</span>
                                    <span class="na">center</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">),</span>
                                    <span class="na">zoom</span><span class="p">:</span> <span class="mi">20</span>
                                <span class="p">}</span>
    
                                                            <span class="c1">//지도를 삽입할 HTML 요소 또는 HTML 요소의 id를 지정합니다.</span>
                                <span class="kd">var</span> <span class="nx">mapDiv</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">map</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// 'map'으로 선언해도 동일</span>
    
                                <span class="c1">//옵션 없이 지도 객체를 생성하면 서울 시청을 중심으로 하는 16 레벨의 지도가 생성됩니다.</span>
                                <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nb">Map</span><span class="p">(</span><span class="nx">mapDiv</span><span class="p">,</span> <span class="nx">mapOptions</span><span class="p">);</span>
                                
                                <span class="nx">data</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">it</span><span class="p">,</span> <span class="nx">index</span><span class="p">){</span>
                                    <span class="kd">let</span> <span class="nx">dutyName</span> <span class="o">=</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyName</span><span class="p">;</span> <span class="c1">//약국명</span>
                                    <span class="kd">let</span> <span class="nx">dutyAddr</span> <span class="o">=</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyAddr</span><span class="p">;</span> <span class="c1">//주소</span>
                                    <span class="kd">let</span> <span class="nx">dutyTel1</span> <span class="o">=</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTel1</span><span class="p">;</span> <span class="c1">//전번</span>

                                    <span class="kd">let</span> <span class="nx">dutyTime</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span> <span class="c1">//업무시간</span>

                                    
                                    <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime1s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime1c</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">월요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime1s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime1c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                    <span class="p">}</span>
    
                                    <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime2s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime2c</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">화요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime2s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime2c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                    <span class="p">}</span>
    
                                    <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime3s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime3c</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">수요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime3s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime3c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                    <span class="p">}</span>
    
                                    <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime4s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime4c</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">목요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime4s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime4c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                    <span class="p">}</span>
    
                                    <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime5s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime5c</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">금요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime5s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime5c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                    <span class="p">}</span>
    
                                    <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime6s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime6c</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">토요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime6s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime6c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                    <span class="p">}</span>
    
                                    <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime7s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime7c</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">일요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime7s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime7c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                    <span class="p">}</span>
    
                                    <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime8s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime8c</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">공휴일</span><span class="dl">"</span><span class="p">;</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime8s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime8c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                    <span class="p">}</span>
                                    


                                    <span class="kd">let</span> <span class="nx">pharmacy_location</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">wgs84Lat</span><span class="p">,</span> <span class="nx">it</span><span class="p">.</span><span class="nx">wgs84Lon</span><span class="p">)</span>


                                    
                                    <span class="kd">let</span> <span class="nx">marker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Marker</span><span class="p">({</span>
                                        <span class="na">map</span><span class="p">:</span> <span class="nx">map</span><span class="p">,</span>
                                        <span class="na">position</span><span class="p">:</span> <span class="nx">pharmacy_location</span>
                                    <span class="p">});</span>
                                
                                    <span class="kd">var</span> <span class="nx">contentString</span> <span class="o">=</span> <span class="p">[</span>
                                            <span class="dl">'</span><span class="s1">&lt;div class="iw_inner"&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">   &lt;h3&gt;</span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyName</span><span class="o">+</span><span class="dl">'</span><span class="s1">&lt;/h3&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">   &lt;p&gt;</span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyAddr</span><span class="o">+</span><span class="dl">'</span><span class="s1">&lt;br /&gt;</span><span class="dl">'</span><span class="p">,</span> 
                                            <span class="dl">'</span><span class="s1">       </span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyTel1</span><span class="o">+</span><span class="dl">'</span><span class="s1">&lt;br /&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">       </span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyTime</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">   &lt;/p&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">&lt;/div&gt;</span><span class="dl">'</span>
                                        <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
                                        
                                        <span class="kd">var</span> <span class="nx">infowindow</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">InfoWindow</span><span class="p">({</span>
                                            <span class="na">content</span><span class="p">:</span> <span class="nx">contentString</span><span class="p">,</span>
                                            <span class="na">maxWidth</span><span class="p">:</span> <span class="mi">440</span><span class="p">,</span>
                                            <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#eee</span><span class="dl">"</span><span class="p">,</span>
                                            <span class="na">borderColor</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#2db400</span><span class="dl">"</span><span class="p">,</span>
                                            <span class="na">borderWidth</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                                            <span class="na">anchorSize</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Size</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
                                            <span class="na">anchorSkew</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                                            <span class="na">anchorColor</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#eee</span><span class="dl">"</span><span class="p">,</span>
                                            <span class="na">pixelOffset</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="o">-</span><span class="mi">20</span><span class="p">)</span>
                                        <span class="p">});</span>
                                        
                                <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Event</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="nx">marker</span><span class="p">,</span> <span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="nx">infowindow</span><span class="p">.</span><span class="nx">getMap</span><span class="p">())</span> <span class="p">{</span>
                                        <span class="nx">infowindow</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
                                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                                        <span class="nx">infowindow</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">map</span><span class="p">,</span> <span class="nx">marker</span><span class="p">);</span>
                                    <span class="p">}</span>
                                <span class="p">});</span>






                                <span class="p">});</span> 

                            <span class="p">},</span>
                            <span class="na">error</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    
                            <span class="p">}</span>
    
                        <span class="p">});</span>
                        
                    <span class="p">});</span>

                <span class="p">});</span>
                
                <span class="k">async</span>  <span class="kd">function</span> <span class="nx">getLocation</span><span class="p">()</span> <span class="p">{</span>
                    <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>
                    <span class="k">if</span><span class="p">(</span><span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">)</span> <span class="p">{</span>

                        <span class="kd">let</span> <span class="nx">promise</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">rejected</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                            <span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">.</span><span class="nx">getCurrentPosition</span><span class="p">((</span><span class="nx">position</span><span class="p">)</span> <span class="o">=&gt;</span><span class="p">{</span>
                                <span class="nx">resolve</span><span class="p">(</span><span class="nx">position</span><span class="p">);</span>
                            <span class="p">});</span>
                        <span class="p">});</span>

                        <span class="kd">let</span> <span class="nx">position</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">promise</span><span class="p">;</span>
                        
                        <span class="c1">//위도 position.coords.latitude</span>
                        <span class="c1">//경도 position.coords.longitude</span>
                        <span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">latitude</span><span class="p">;</span>
                        <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">longitude</span><span class="p">;</span>
                           
                    <span class="p">}</span>
                    <span class="k">return</span> <span class="nx">XY</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></table></code></div></div><p><br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /></p><h2 id="indexjs-1"><span class="mr-2">index.js</span><a href="#indexjs-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><br /> <br /></p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
</pre><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">);</span>  
<span class="kd">let</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span> <span class="p">();</span>                                       
<span class="kd">let</span> <span class="nx">port</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">80</span><span class="p">;</span>                
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="dl">"</span><span class="s2">public_html</span><span class="dl">"</span><span class="p">));</span>                     

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span>                                  
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">HTML 서버 시작됨</span><span class="dl">"</span><span class="p">)</span>
<span class="p">})</span>

<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/pharmach_list</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>

        <span class="kd">let</span> <span class="nx">api</span> <span class="o">=</span> <span class="k">async</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">response</span> <span class="o">=</span> <span class="kc">null</span>
            
            <span class="k">try</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">http://apis.data.go.kr/B552657/ErmctInsttInfoInqireService/getParmacyListInfoInqire</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
                <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
                    <span class="dl">"</span><span class="s2">serviceKey</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">mL6hpE93V2cGEHnZNYbp2kbpZIm2IFyc9rhdh2wIaUseyjghN/lJSV7tSchmbL47mZsX8gNcLVtGpsTxQkstdA==</span><span class="dl">"</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">Q0</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">Q0</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">Q1</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">Q1</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">QT</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">QT</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">QN</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">QN</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">ORD</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">ORD</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">pageNo</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">pageNo</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">numOfRows</span><span class="dl">"</span><span class="p">:</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">numOfRows</span>
                <span class="p">}</span>
            <span class="p">})</span>
        <span class="p">}</span>






        <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
        <span class="p">}</span>







            <span class="k">return</span> <span class="nx">response</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">api</span><span class="p">().</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span>  <span class="p">{</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Access-Control-Allow-Origin</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">*</span><span class="dl">"</span><span class="p">)</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
        <span class="p">});</span>
<span class="p">});</span>

</pre></table></code></div></div><p><br /> <br /> <br /> <br /> <br /></p><p>2022 09 19일 갑자기 내 위치를 나타내는 커스텀 마커가 추가하고싶어졌다. 그리하여 코드를 변형시켰다<br /> <code class="language-plaintext highlighter-rouge">index.html</code> 로 갑시다.</p><p><br /> <br /></p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">mapOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">center</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">),</span>
<span class="na">zoom</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span>

<span class="p">}</span>
<span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nb">Map</span><span class="p">(</span><span class="nx">mapDiv</span><span class="p">,</span> <span class="nx">mapOptions</span><span class="p">);</span>
</pre></table></code></div></div><p><br /></p><p>이문장 바로 아래에 이 문장들을 추가합시다</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre><td class="rouge-code"><pre>                                <span class="kd">var</span> <span class="nx">position</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">);</span>

                                <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nb">Map</span><span class="p">(</span><span class="dl">'</span><span class="s1">map</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
                                    <span class="na">center</span><span class="p">:</span> <span class="nx">position</span><span class="p">,</span>
                                    <span class="na">zoom</span><span class="p">:</span> <span class="mi">14</span>
                                <span class="p">});</span>

                                <span class="kd">var</span> <span class="nx">markerOptions</span> <span class="o">=</span> <span class="p">{</span>
                                    <span class="na">position</span><span class="p">:</span> <span class="nx">position</span><span class="p">,</span>
                                    <span class="na">map</span><span class="p">:</span> <span class="nx">map</span><span class="p">,</span>
                                    <span class="na">icon</span><span class="p">:</span> <span class="p">{</span>
                                        <span class="na">content</span><span class="p">:</span> <span class="p">[</span>
                                        <span class="dl">'</span><span class="s1">&lt;img src="/img/sugar.jpg" style="position:absolute; top:2px; left:2px; width:32px; height:32px; object-fit:cover; object-position:center center; border-radius:50%; z-index:6"&gt;</span><span class="dl">'</span><span class="p">,</span>
                                        <span class="dl">'</span><span class="s1">&lt;img src="/map-pin-afterUser.svg" style="position;absolute; top:0; left:0; z-index:5"&gt;</span><span class="dl">'</span><span class="p">,</span>
                                        <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">),</span>

                                        <span class="na">anchor</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">26</span><span class="p">)</span>
                                    <span class="p">}</span>
                                <span class="p">};</span>
                                <span class="kd">var</span> <span class="nx">marker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Marker</span><span class="p">(</span><span class="nx">markerOptions</span><span class="p">);</span>                            




                            <span class="kd">var</span> <span class="nx">circle</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Circle</span><span class="p">({</span>
                                <span class="na">map</span><span class="p">:</span> <span class="nx">map</span><span class="p">,</span>
                                <span class="na">center</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">),</span>
                                <span class="na">radius</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
                                <span class="na">fillColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">red</span><span class="dl">'</span><span class="p">,</span>
                                <span class="na">fillOpacity</span><span class="p">:</span> <span class="mf">0.2</span>
                            <span class="p">});</span>
</pre></table></code></div></div><p><br /></p><p>그 후 저의 경우에는 public 폴더를 만들어 그안에 img 폴더, 그안에 <code class="language-plaintext highlighter-rouge">sugar.jpg</code>를 저장하였습니다.<br /> 자 이상태로 바로 node index.js 실행하면 오류나서 커스텀 마커 안나옵니다</p><p><br /></p><p>무슨 말이냐면 <code class="language-plaintext highlighter-rouge">index.js</code>에 코드에 static으로 img 디렉터리를 지정하거나<br /> 리소스에 접근했을때 보내주는 코드가 없기 때문입니다.<br /> (이 부분은 뀰님께서 도와주셔서 해결할 수 있었습니다, 다시 한번 감사드립니다.)<br /> 이제 <code class="language-plaintext highlighter-rouge">index.js</code>로 가서 문장 하나 추가해주고 포트번호 80 -&gt; 5000 변경해줍시다</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="dl">'</span><span class="s1">public</span><span class="dl">'</span><span class="p">));</span>
</pre></table></code></div></div><p><br /> 그러면 사진처럼 빰!</p><p><img data-src="/assets/img/api/naver-map-api-pharmacy/26.png" alt="Desktop View" data-proofer-ignore></p><p><br /> <br /> <br /> <br /> <br /> <br /> <br /></p><p>자 여기까지의 파일트리와 <code class="language-plaintext highlighter-rouge">index.js</code>와 <code class="language-plaintext highlighter-rouge">index.html</code> 코드는 이렇습니다.</p><p><br /> <br /> <br /></p><p><img data-src="/assets/img/api/naver-map-api-pharmacy/27.png" alt="Desktop View" data-proofer-ignore></p><p><br /> <br /> <br /> <br /></p><h3 id="indexjs-2"><span class="mr-2">index.js</span><a href="#indexjs-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><br /></p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
</pre><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">);</span>
<span class="c1">// express모듈을 선언   +   어떤 모듈을 쓸건지 require로 지정   =    이제 이 구문을 통해 express모듈이 사용 가능한 상태가 됨</span>

<span class="kd">let</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>
<span class="c1">// axios 모듈을 사용하겠다</span>

<span class="kd">let</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span> <span class="p">();</span>
<span class="c1">// app 이라는 변수 하나를 더 선언하여 express객체를 할당하자     이제 이 구문을 통해 app이라는 변수는 express 모듈을 가르키게 됨</span>

<span class="kd">let</span> <span class="nx">port</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">5000</span><span class="p">;</span>


<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="dl">'</span><span class="s1">public</span><span class="dl">'</span><span class="p">));</span>
<span class="c1">// 커스텀 마커를 사용하기 위해 public 폴더 안 파일과 localhost:5000 연동되게 해줌</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="dl">"</span><span class="s2">public_html</span><span class="dl">"</span><span class="p">));</span>
<span class="c1">// express의 use 메소드를 선언하고 express.static이라고 괄호 사이에 입력한 후  public_html 로 지정하겠다</span>
<span class="c1">// 이제 public_html 폴더 아래에 있는 모든 파일들은 app.use 즉 express 모듈의 웹서버가 구동되게함</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">HTML 서버 시작됨</span><span class="dl">"</span><span class="p">)</span>
<span class="p">})</span>
<span class="c1">// express 서비스가 작동될 포트 지정 보통 80번 많이씀 그리고 포트 열렸는지 확인해주기위해 콘솔을 적음</span>
<span class="c1">// app.listen에 port를 사용해주고 대신 위에 포트 80변수를 선언해주자 이건 사용되기 앞서 그 이전에 설정되야함</span>
<span class="c1">// 이제 위로 가서 포트 80 변수를 선언해주자  process.env.PORT는 환경설정 내용이다</span>



<span class="c1">//현재 app.use를 사용해 웹서버를 열은 상황이다 근데</span>
<span class="c1">//한페이지만 이름을 pharmach_list따로 열어보겠다 </span>
<span class="c1">//이 경우는 app.get으로 가능하다</span>
<span class="c1">//그리고 여기 접속했을때 어떤 데이터를 보낼지 결정가능</span>

<span class="c1">/////////</span>

<span class="c1">////////</span>


<span class="nx">app</span><span class="p">.</span><span class="kd">get</span> <span class="p">(</span><span class="dl">"</span><span class="s2">/pharmach_list</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span>  <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">api</span> <span class="o">=</span> <span class="k">async</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">response</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

            <span class="k">try</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">http://apis.data.go.kr/B552657/ErmctInsttInfoInqireService/getParmacyListInfoInqire</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
                <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
                        <span class="dl">"</span><span class="s2">serviceKey</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">mL6hpE93V2cGEHnZNYbp2kbpZIm2IFyc9rhdh2wIaUseyjghN/lJSV7tSchmbL47mZsX8gNcLVtGpsTxQkstdA==</span><span class="dl">"</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">Q0</span><span class="dl">"</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">Q0</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">Q1</span><span class="dl">"</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">Q1</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">QT</span><span class="dl">"</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">QT</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">QN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">QN</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">ORD</span><span class="dl">"</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">ORD</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">pageNo</span><span class="dl">"</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">pageNo</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">numOfRows</span><span class="dl">"</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">numOfRows</span>    <span class="c1">//  1000개의 데이터를 1장에 한번에 받겠다 </span>
                    <span class="p">}</span>
                <span class="p">})</span>
            <span class="p">}</span>








            <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
            <span class="p">}</span>






            
            <span class="k">return</span> <span class="nx">response</span><span class="p">;</span>
        <span class="p">}</span>


        <span class="nx">api</span><span class="p">().</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Access-Control-Allow-Origin</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">*</span><span class="dl">"</span><span class="p">);</span>    <span class="c1">// * = all,   access control 근원(origin)으로 가능한 것들은 전부 허용해줘라    이렇게 세팅시 cors 로 인한 문제 해결 가능</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span> <span class="c1">// data.response.body가 위에 보이는 약국데이터다, 이를 pharmach_list 경로로 접근하는 컴퓨터에게 데이터 제공</span>
        <span class="p">});</span>  
<span class="p">});</span>
</pre></table></code></div></div><p><br /> <br /> <br /> <br /> <br /> <br /></p><h3 id="indexhtml-2"><span class="mr-2">index.html</span><a href="#indexhtml-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><br /></p><div class="language-html highlighter-rouge"><div class="code-header"> <span data-label-text="HTML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
</pre><td class="rouge-code"><pre><span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>     <span class="c">&lt;!-- script type는 자바스크립트, src를 넣어 소스는 다른 곳에 있다고 지정 ex) 네이버 open api에 있는 정보--&gt;</span>
        <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=xeulgqnc95&amp;amp;submodules=geocoder"</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://code.jquery.com/jquery-3.6.1.min.js"</span> <span class="na">integrity=</span><span class="s">"sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="</span> <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/head&gt;</span>    
        <span class="nt">&lt;body&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"margin-top: 20px; margin-bottom: 10px; font-weight: bold;"</span><span class="nt">&gt;</span>
                약국 지도💊
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"map"</span> <span class="na">style=</span><span class="s">"width:100%; height:80%"</span><span class="nt">&gt;</span>

            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;script&gt;</span>
            <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="k">async</span> <span class="kd">function</span><span class="p">(){</span>
                <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getLocation</span><span class="p">();</span>
                <span class="c1">//alert("위도" + XY.lat);</span>
                <span class="c1">//alert("경도" + XY.lng);</span>

                <span class="c1">// reverseGeocode는 비동기형이라 await 추가</span>
                <span class="k">await</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Service</span><span class="p">.</span><span class="nx">reverseGeocode</span><span class="p">({</span>
                    <span class="na">location</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">)</span>
                <span class="p">},</span><span class="kd">function</span><span class="p">(</span><span class="nx">status</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
                    <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
                    <span class="kd">let</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">items</span><span class="p">;</span>
                    <span class="c1">//console.log(items[0].addrdetail.sido);</span>
                    <span class="c1">//console.log(items[0].addrdetail.sigugun);</span>
                    <span class="kd">let</span> <span class="nx">sido_arr</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addrdetail</span><span class="p">.</span><span class="nx">sido</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">);</span>
                    <span class="kd">let</span> <span class="nx">gubun_arr</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addrdetail</span><span class="p">.</span><span class="nx">sigugun</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">);</span>

                    <span class="kd">let</span> <span class="nx">sido</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
                    <span class="kd">let</span> <span class="nx">gubun</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
                    <span class="k">if</span><span class="p">(</span><span class="nx">sido_arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">sido</span> <span class="o">=</span> <span class="nx">sido_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                        <span class="nx">gugun</span> <span class="o">=</span> <span class="nx">gubun_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="p">}</span>


                    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">sido_arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">sido</span> <span class="o">=</span> <span class="nx">sido_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                        <span class="nx">gugun</span> <span class="o">=</span> <span class="nx">sido_arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="p">}</span>
                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sido</span><span class="p">);</span>
                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">gugun</span><span class="p">);</span>


                    <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
                        <span class="na">url</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/pharmach_list</span><span class="dl">"</span><span class="p">,</span>
                        <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>   <span class="c1">// GET을 통해 밑에 주석처리한 api url 부분 ?뒤부터 눈에 보이게끔 값들을 하나하나 입력해줌</span>
                        <span class="na">cache</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">//cache는 쓰지 않을거라 false</span>
                        <span class="na">dataType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>    <span class="c1">//dataType은 json으로 받겠다</span>
                        <span class="na">data</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">Q0</span><span class="dl">"</span><span class="p">:</span> <span class="nx">sido</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Q1</span><span class="dl">"</span><span class="p">:</span> <span class="nx">gugun</span><span class="p">,</span> <span class="dl">"</span><span class="s2">QT</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">QN</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ORD</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">pageNo</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">numOfRows</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1000</span><span class="dl">"</span><span class="p">},</span>   
                        <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    
    
                            <span class="c1">//지도를 삽입할 HTML 요소 또는 HTML 요소의 id를 지정합니다.</span>
                            <span class="kd">var</span> <span class="nx">mapDiv</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">map</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// 'map'으로 선언해도 동일</span>
    
                            <span class="c1">//옵션 없이 지도 객체를 생성하면 서울 시청을 중심으로 하는 16 레벨의 지도가 생성됩니다.</span>
                            <span class="kd">var</span> <span class="nx">mapOptions</span> <span class="o">=</span> <span class="p">{</span>
                                <span class="na">center</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">),</span>
                                <span class="na">zoom</span><span class="p">:</span> <span class="mi">14</span>
                            <span class="p">}</span>
                            <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nb">Map</span><span class="p">(</span><span class="nx">mapDiv</span><span class="p">,</span> <span class="nx">mapOptions</span><span class="p">);</span>

<span class="c1">//////////////////////////////////////////////////////////////////////////////////////////</span>
                                <span class="kd">var</span> <span class="nx">position</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">);</span>

                                <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nb">Map</span><span class="p">(</span><span class="dl">'</span><span class="s1">map</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
                                    <span class="na">center</span><span class="p">:</span> <span class="nx">position</span><span class="p">,</span>
                                    <span class="na">zoom</span><span class="p">:</span> <span class="mi">14</span>
                                <span class="p">});</span>

                                <span class="kd">var</span> <span class="nx">markerOptions</span> <span class="o">=</span> <span class="p">{</span>
                                    <span class="na">position</span><span class="p">:</span> <span class="nx">position</span><span class="p">,</span>
                                    <span class="na">map</span><span class="p">:</span> <span class="nx">map</span><span class="p">,</span>
                                    <span class="na">icon</span><span class="p">:</span> <span class="p">{</span>
                                        <span class="na">content</span><span class="p">:</span> <span class="p">[</span>
                                        <span class="dl">'</span><span class="s1">&lt;img src="/img/sugar.jpg" style="position:absolute; top:2px; left:2px; width:32px; height:32px; object-fit:cover; object-position:center center; border-radius:50%; z-index:6"&gt;</span><span class="dl">'</span><span class="p">,</span>
                                        <span class="dl">'</span><span class="s1">&lt;img src="/map-pin-afterUser.svg" style="position;absolute; top:0; left:0; z-index:5"&gt;</span><span class="dl">'</span><span class="p">,</span>
                                        <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">),</span>

                                        <span class="na">anchor</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">26</span><span class="p">)</span>
                                    <span class="p">}</span>
                                <span class="p">};</span>
                                <span class="kd">var</span> <span class="nx">marker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Marker</span><span class="p">(</span><span class="nx">markerOptions</span><span class="p">);</span>                            




                            <span class="kd">var</span> <span class="nx">circle</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Circle</span><span class="p">({</span>
                                <span class="na">map</span><span class="p">:</span> <span class="nx">map</span><span class="p">,</span>
                                <span class="na">center</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span><span class="p">),</span>
                                <span class="na">radius</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
                                <span class="na">fillColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">red</span><span class="dl">'</span><span class="p">,</span>
                                <span class="na">fillOpacity</span><span class="p">:</span> <span class="mf">0.2</span>
                            <span class="p">});</span>
                            
 <span class="c1">//////////////////////////////////////////////////////////////////////////////</span>
                            
                            <span class="nx">data</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">it</span><span class="p">,</span> <span class="nx">index</span><span class="p">){</span>
                                <span class="kd">let</span> <span class="nx">dutyName</span> <span class="o">=</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyName</span><span class="p">;</span>
                                <span class="kd">let</span> <span class="nx">dutyAddr</span> <span class="o">=</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyAddr</span><span class="p">;</span>
                                <span class="kd">let</span> <span class="nx">dutyTel1</span> <span class="o">=</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTel1</span><span class="p">;</span>

                                <span class="kd">let</span> <span class="nx">dutyTime</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
                                <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime1s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime1c</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">월요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime1s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime1c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                <span class="p">}</span>

                                <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime2s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime2c</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">화요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime2s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime2c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                <span class="p">}</span>

                                <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime3s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime3c</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">수요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime3s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime3c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                <span class="p">}</span>

                                <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime4s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime4c</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">목요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime4s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime4c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                <span class="p">}</span>

                                <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime5s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime5c</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">금요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime5s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime5c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                <span class="p">}</span>

                                <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime6s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime6c</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">토요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime6s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime6c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                <span class="p">}</span>

                                <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime7s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime7c</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">일요일: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime7s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime7c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                <span class="p">}</span>

                                <span class="k">if</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime8s</span> <span class="o">&amp;&amp;</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime8c</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="nx">dutyTime</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">공휴일</span><span class="dl">"</span><span class="p">;</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime8s</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ~ </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">it</span><span class="p">.</span><span class="nx">dutyTime8c</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span><span class="p">;</span>
                                <span class="p">}</span>


                                <span class="kd">let</span> <span class="nx">pharmacy_location</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">wgs84Lat</span><span class="p">,</span> <span class="nx">it</span><span class="p">.</span><span class="nx">wgs84Lon</span><span class="p">)</span>

                                    <span class="kd">let</span> <span class="nx">marker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Marker</span><span class="p">({</span>
                                        <span class="na">map</span><span class="p">:</span> <span class="nx">map</span><span class="p">,</span>
                                        <span class="na">position</span><span class="p">:</span> <span class="nx">pharmacy_location</span>
                                    <span class="p">});</span>
                                
                                    <span class="kd">var</span> <span class="nx">contentString</span> <span class="o">=</span> <span class="p">[</span>
                                            <span class="dl">'</span><span class="s1">&lt;div class="iw_inner"&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">   &lt;h3&gt;</span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyName</span><span class="o">+</span><span class="dl">'</span><span class="s1">&lt;/h3&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">   &lt;p&gt;</span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyAddr</span><span class="o">+</span><span class="dl">'</span><span class="s1">&lt;br /&gt;</span><span class="dl">'</span><span class="p">,</span> 
                                            <span class="dl">'</span><span class="s1">       </span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyTel1</span><span class="o">+</span><span class="dl">'</span><span class="s1">&lt;br /&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">       </span><span class="dl">'</span><span class="o">+</span><span class="nx">dutyTime</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">   &lt;/p&gt;</span><span class="dl">'</span><span class="p">,</span>
                                            <span class="dl">'</span><span class="s1">&lt;/div&gt;</span><span class="dl">'</span>
                                        <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
                                    
                                    <span class="kd">var</span> <span class="nx">infowindow</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">InfoWindow</span><span class="p">({</span>
                                        <span class="na">content</span><span class="p">:</span> <span class="nx">contentString</span><span class="p">,</span>
                                        <span class="na">maxWidth</span><span class="p">:</span> <span class="mi">440</span><span class="p">,</span>
                                        <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#eee</span><span class="dl">"</span><span class="p">,</span>
                                        <span class="na">borderColor</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#2db400</span><span class="dl">"</span><span class="p">,</span>
                                        <span class="na">borderWidth</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                                        <span class="na">anchorSize</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Size</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
                                        <span class="na">anchorSkew</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                                        <span class="na">anchorColor</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#eee</span><span class="dl">"</span><span class="p">,</span>
                                        <span class="na">pixelOffset</span><span class="p">:</span> <span class="k">new</span> <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="o">-</span><span class="mi">20</span><span class="p">)</span>
                                    <span class="p">});</span>
                                    
                                    <span class="nx">naver</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Event</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="nx">marker</span><span class="p">,</span> <span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="k">if</span> <span class="p">(</span><span class="nx">infowindow</span><span class="p">.</span><span class="nx">getMap</span><span class="p">())</span> <span class="p">{</span>
                                            <span class="nx">infowindow</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
                                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                                            <span class="nx">infowindow</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">map</span><span class="p">,</span> <span class="nx">marker</span><span class="p">);</span>
                                        <span class="p">}</span>
                                    <span class="p">});</span>












                                    
                                    <span class="p">});</span>
    
                        <span class="p">},</span>
                        <span class="na">error</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
                            
                        <span class="p">}</span>
                    <span class="p">});</span>


                <span class="p">});</span>


            <span class="p">});</span>

            <span class="c1">// geolocation은 gps와 관련된 객체, 이 객체가 존재하면 getLocation 실행함</span>
            <span class="c1">// getCurrentPosition 사용시 현재 위치를 알 수 있다, position 이라는 객체를 통해 현 위치 파악</span>
            <span class="k">async</span> <span class="kd">function</span> <span class="nx">getLocation</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">let</span> <span class="nx">XY</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>
                <span class="k">if</span><span class="p">(</span><span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">)</span> <span class="p">{</span>

                    
                    <span class="kd">let</span> <span class="nx">promise</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">rejected</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                        <span class="nb">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">.</span><span class="nx">getCurrentPosition</span><span class="p">((</span><span class="nx">position</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                            <span class="nx">resolve</span><span class="p">(</span><span class="nx">position</span><span class="p">);</span>
                        <span class="p">});</span>
                    <span class="p">});</span>

                    <span class="kd">let</span> <span class="nx">position</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">promise</span><span class="p">;</span>

                    <span class="c1">//위도 position.coords.latitude </span>
                    <span class="c1">//경도 position.coords.longitude </span>
                    <span class="nx">XY</span><span class="p">.</span><span class="nx">lat</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">latitude</span>
                    <span class="nx">XY</span><span class="p">.</span><span class="nx">lng</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">longitude</span>
  
                <span class="p">}</span>
                <span class="k">return</span> <span class="nx">XY</span><span class="p">;</span>     
            <span class="p">}</span>        
        <span class="nt">&lt;/script&gt;</span>    
<span class="nt">&lt;/html&gt;</span>
</pre></table></code></div></div><p><br /> <br /> <br /></p><p><br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /></p><p>아래 사진을 클릭하면 <code class="language-plaintext highlighter-rouge">제 취미공간</code>으로 이어집니다 ㅎㅎ 여기에서 메모 및 일상을 기록하는데 놀러오실 분들은 언제나 환영합니다!</p><p><br /></p><h1 id="링크로-이동하려면-사진을-클릭">링크로 이동하려면 사진을 클릭</h1><p><a href="https://discord.com/channels/976352361142452234/976352361142452239"><img data-src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQk-zPB4TCuWRNJVIF0aWgniDPNJgUTdXmILg&amp;usqp=CAU" alt="어서오셔 ㅎ" data-proofer-ignore></a></p><hr /><h1 id="참고">참고</h1><hr /><p>‘소스놀이터’      <a href="https://www.youtube.com/watch?v=FKQxItpstIk&amp;t=1245s">Node.Js로 네이버 약국 지도 만들기 #2 (express &amp; axios 모듈, 비동기 문제 해결)</a>      30:12 ~</p><p><br /></p><p>‘소스놀이터’      <a href="https://www.youtube.com/watch?v=XC8vBN_WhYs">Node.Js로 네이버 약국 지도 만들기 #3 (LAST) (data.go.kr 오픈 API)</a>     </p><p><br /></p><p>http://expressjs.com/ko/starter/static-files.html</p><p><br /> <br /> <br /> <br /> <br /> <br /></p><hr /><h1 id="도와주신-분들">도와주신 분들</h1><hr /><p>‘뀰’ - https://github.com/devlaq</p><p><br /></p><p><code class="language-plaintext highlighter-rouge">유튜브</code> - 소스놀이터</p><p><br /></p><p><code class="language-plaintext highlighter-rouge">오중호랑이</code> - https://ojtiger.com/</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/developer-tools/'>developer-tools</a>, <a href='/categories/api/'>api</a>, <a href='/categories/node-js/'>Node.js</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/api/" class="post-tag no-text-decoration" >api</a> <a href="/tags/nodejs/" class="post-tag no-text-decoration" >nodejs</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Node.js+%26+%EB%84%A4%EC%9D%B4%EB%B2%84%EC%A7%80%EB%8F%84%EB%A1%9C+%EB%82%B4+%EA%B7%BC%EC%B2%98+%EC%95%BD%EA%B5%AD%EB%93%A4+%EC%B0%BE%EA%B8%B0+2+-+%EA%B3%A0%EC%A4%80%ED%99%98&url=https%3A%2F%2Fjoonhwan2.github.io%2Fposts%2Fpharmacy-searching-with-navermap-api-2%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Node.js+%26+%EB%84%A4%EC%9D%B4%EB%B2%84%EC%A7%80%EB%8F%84%EB%A1%9C+%EB%82%B4+%EA%B7%BC%EC%B2%98+%EC%95%BD%EA%B5%AD%EB%93%A4+%EC%B0%BE%EA%B8%B0+2+-+%EA%B3%A0%EC%A4%80%ED%99%98&u=https%3A%2F%2Fjoonhwan2.github.io%2Fposts%2Fpharmacy-searching-with-navermap-api-2%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fjoonhwan2.github.io%2Fposts%2Fpharmacy-searching-with-navermap-api-2%2F&text=Node.js+%26+%EB%84%A4%EC%9D%B4%EB%B2%84%EC%A7%80%EB%8F%84%EB%A1%9C+%EB%82%B4+%EA%B7%BC%EC%B2%98+%EC%95%BD%EA%B5%AD%EB%93%A4+%EC%B0%BE%EA%B8%B0+2+-+%EA%B3%A0%EC%A4%80%ED%99%98" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div><script src="https://utteranc.es/client.js" repo="joonhwan2/joonhwan2.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async> </script></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/pharmacy-heroku/">Node.js & 약국지도찾기, heroku 배포하기</a><li><a href="/posts/memo/">메모</a><li><a href="/posts/first-post/">메모</a><li><a href="/posts/pharmacy-searching-with-navermap-api-2/">Node.js & 네이버지도로 내 근처 약국들 찾기 2</a><li><a href="/posts/git-add/">[git] git add ~ push</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/blog/">blog</a> <a class="post-tag" href="/tags/github/">github</a> <a class="post-tag" href="/tags/jekyll/">jekyll</a> <a class="post-tag" href="/tags/git-error/">git error</a> <a class="post-tag" href="/tags/api/">api</a> <a class="post-tag" href="/tags/nodejs/">nodejs</a> <a class="post-tag" href="/tags/css/">css</a> <a class="post-tag" href="/tags/heroku/">heroku</a> <a class="post-tag" href="/tags/html/">html</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/pharmacy-searching-with-navermap-api/"><div class="card-body"> <em class="small" data-ts="1662476400" data-df="ll" > Sep 7, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Node.js & 네이버지도로 내 근처 약국들 찾기 1</h3><div class="text-muted small"><p> ‘소스놀이터’님의 유튜브영상을 보고 이렇게 좋은 작업물을 완성할 수 있었습니다. 양질의 자료를 제공해주신 ‘소스놀이터’님께 다시한번 감사의 말씀을 드립니다. vscode 설치 nodejs 설치완료 nodejs 환경변수 설정 이 3가지가 완료되어있다는 가정하에 시작하겠습니다. 1   폴더 만들기, 네이버api 가입...</p></div></div></a></div><div class="card"> <a href="/posts/pharmacy-heroku/"><div class="card-body"> <em class="small" data-ts="1662994800" data-df="ll" > Sep 13, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Node.js & 약국지도찾기, heroku 배포하기</h3><div class="text-muted small"><p> ‘소스놀이터’님의 유튜브영상을 보고 이렇게 좋은 작업물을 완성할 수 있었습니다. 양질의 자료를 제공해주신 ‘소스놀이터’님께 다시한번 감사의 말씀을 드립니다. 1   Heroku 회원가입 create app 클릭 heroku cli 클릭하면 이렇게 됩니다. 이제 Node.js 클릭 -&amp;g...</p></div></div></a></div><div class="card"> <a href="/posts/git-pull-fetch/"><div class="card-body"> <em class="small" data-ts="1660748400" data-df="ll" > Aug 18, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[git] git pull fetch 정리</h3><div class="text-muted small"><p> ‘공부하는 공작새’님의 블로그를 참고하여 작성했습니다. git fetch 원격저장소(깃허브 인터넷 상)에 있는 변경사항들을 로컬저장소(내 노트북)에 가져오기 전에 변경내용을 확인하고 싶은경우에 사용 만약 제가 공동으로 작업하는 파일을 github에 올리고 잤어요. 근데 다음...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/npm-init-error/" class="btn btn-outline-primary" prompt="Older"><p>[error: npm init]</p></a> <a href="/posts/pharmacy-heroku/" class="btn btn-outline-primary" prompt="Newer"><p>Node.js & 약국지도찾기, heroku 배포하기</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/username">고준환 J.K</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/blog/">blog</a> <a class="post-tag" href="/tags/github/">github</a> <a class="post-tag" href="/tags/jekyll/">jekyll</a> <a class="post-tag" href="/tags/git-error/">git error</a> <a class="post-tag" href="/tags/api/">api</a> <a class="post-tag" href="/tags/nodejs/">nodejs</a> <a class="post-tag" href="/tags/css/">css</a> <a class="post-tag" href="/tags/heroku/">heroku</a> <a class="post-tag" href="/tags/html/">html</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
